__NUXT_JSONP__("/", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv){return {data:[{articles:[{slug:"2024-01-19-understanding-crtds-a-gentle-introduction-chapter-1",description:"In the past two months, I’ve been diving deeper into the realm of distributed systems. The catalyst that started my research was discovering the world of local-first applications, a class of software that allows users to access and modify their data locally, while seamlessly synchronizing across devices, even in the face of connection failures.",layout:bN,title:"Understanding CRDTs: A Gentle Introduction (Chapter 1)",author:bO,date:"2024-01-19T00:00:00.000Z",categories:"distributed systems crdt set eventual convergence real time collaboration",social_title:"Understanding CRDTs",social_subtitle:"A Gentle Introduction (Chapter 1)",header:"understanding-crdt",adaptive_images:true,toc:[{id:cm,depth:aO,text:cn},{id:co,depth:aO,text:cp},{id:cq,depth:aO,text:cr},{id:cs,depth:aO,text:ct}],body:{type:aX,children:[{type:b,tag:i,props:{},children:[{type:a,value:cu},{type:b,tag:F,props:{href:cv,rel:[ar,as,at],target:au},children:[{type:a,value:cw}]},{type:a,value:cx}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From the lens of distributed system theory, local-first applications could be defined as multi-master, eventually-consistent, distributed databases. A replica of the database would run on every user’s device, allowing writes at all times and, when a connection with another replica is available, synchronize the changes. Moreover, depending on the specific algorithm chosen to implement this distributed database, we could relax many of the topology constraints of traditional systems: imagine a system that could seamlessly synchronize across user devices (eg. P2P), while also "},{type:b,tag:W,props:{},children:[{type:a,value:"optionally"}]},{type:a,value:" synchronizing with a central server."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"An arbitrary network topology",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This architecture allows applications to offer a superb UX, allowing users to work even without an internet connection (eg. when flying on a plane or in the subway), without sacrificing the convenience of synchronization across devices, something that we take for granted nowadays. But if the UX is so much better for the end user, why do so many apps fail to implement such a model? For example, Notion, a very popular knowledge-base app, can’t work without an internet connection, leading to poor user experience in low-connectivity scenarios."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The answer is that implementing a robust multi-master replication is not trivial, and introduces several challenges. For example, what happens when two users write to the same entry concurrently?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Example of a concurrent write across different replicas.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A traditional centralized database does not suffer from this problem, as all writes are handled by a single entity, which can decide with no ambiguity which update should take precedence."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"The centralized database has the final say on what update has priority.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage2.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But in a multi-master architecture, all replicas typically have the same priority, so how do we decide which update “win”?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"In a multi-master scenario, dealing with conflicts is not trivial.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage3.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first approach could be to have the "},{type:b,tag:W,props:{},children:[{type:a,value:"last"}]},{type:a,value:" update take precedence, a concept known as "},{type:b,tag:W,props:{},children:[{type:a,value:"Last Write Wins"}]},{type:a,value:" (LWW): in this scenario, the last update being performed overwrites the previous one. So theoretically, we could just attach to each update a timestamp, and the update with the highest timestamp wins. Sounds easy, right?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Concurrent write in a multi-master scenario, with timestamps attached.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage4.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Well, we have a problem, in fact, a serious problem: in a distributed system, clocks are never perfectly in sync. They can drift forward, backward, and even be completely off. And while most operating systems "},{type:b,tag:F,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FNetwork_Time_Protocol",rel:[ar,as,at],target:au},children:[{type:a,value:"will try their best to keep clocks in sync"}]},{type:a,value:", it’s not something we should rely on to guarantee correctness or integrity. Would you trust a database that 99.99% of the time works perfectly, but silently corrupts the data if the clock goes off?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And it gets worse, because even if clocks are perfectly in sync, the LWW semantic isn’t always appropriate. Imagine the scenario of a distributed counter: what happens if two replicas increment the counter concurrently? If we adopt the LWW semantic, one of the two increments is going to be lost."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"We can’t represent a counter with an LWW semantic, as concurrent increments would be lost.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage5.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It turns out that different use cases and data structures require different approaches to deal with conflicts. As you can imagine, this could get complex pretty quickly. Luckily for us, distributed system theory comes to the rescue with the concept of CRDT."}]},{type:a,value:f},{type:b,tag:av,props:{id:"introducing-crdts"},children:[{type:b,tag:F,props:{href:"#introducing-crdts",ariaHidden:U,tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"Introducing CRDTs"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:F,props:{href:cy,rel:[ar,as,at],target:au},children:[{type:b,tag:W,props:{},children:[{type:a,value:"Conflict-free Replicated Data Types"}]}]},{type:a,value:", or CRDTs for short, are a class of data structures that can be replicated across nodes in a network, with the following features (quoting "},{type:b,tag:F,props:{href:cy,rel:[ar,as,at],target:au},children:[{type:a,value:"Wikipedia"}]},{type:a,value:"):"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"The application can update any replica independently, "},{type:b,tag:F,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConcurrent_computing",rel:[ar,as,at],target:au},children:[{type:a,value:"concurrently"}]},{type:a,value:", and without "},{type:b,tag:F,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConcurrency_control",rel:[ar,as,at],target:au},children:[{type:a,value:"coordinating"}]},{type:a,value:" with other replicas."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"An algorithm (itself part of the data type) automatically resolves any inconsistencies that might occur."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"Although replicas may have different state at any particular point in time, they are guaranteed to eventually converge."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In other words, nodes can always access and modify their local copy of the CRDT as if it was a plain data structure (eg. a HashMap), and the CRDT algorithm takes care of conflict resolution and eventual convergence. It’s important to keep in mind that CRDTs do not require "},{type:b,tag:F,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConsensus_(computer_science)",rel:[ar,as,at],target:au},children:[{type:a,value:"consensus"}]},{type:a,value:" to operate: generally, there is no distinction between replicas in a CRDT, which contrasts with typical replicated databases, in which a particular node acts as a master, and others as read-only replicas."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The term "},{type:b,tag:W,props:{},children:[{type:a,value:"data structure"}]},{type:a,value:" we used previously is purposefully generic: depending on the chosen approach, CRDTs can model widely different types of data structures: maps, lists, strings, trees, etc. So if you need a distributed data structure with the semantics of a HashMap, you can use a CRDT-based HashMap, and if you need to implement real-time text editing (eg. Google Docs) you can use a CRDT-based List of characters. Moreover, CRDTs can be composed nicely, so if you have a CRDT Map and a CRDT List, you can compose them to represent a JSON-like CRDT data structure, with nested objects and values."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into our first CRDT, it’s important to discuss the concept of "},{type:b,tag:W,props:{},children:[{type:a,value:"intent preservation"}]},{type:a,value:". We defined CRDTs as data structures that automatically resolve conflicts and eventually converge to the same value across replicas, but that’s only part of the picture. For example, we could think of a HashMap that never stores any value that is given to it:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,"language-text"]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"class NoopMap {\n  set(key, value) {\n    \u002F\u002F DO NOTHING\n  }\n  \n  get(key) {\n        return undefined;\n  }\n}\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As crazy as it sounds, this data structure is a perfectly valid CRDT:"}]},{type:a,value:f},{type:b,tag:bP,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"Conflicts are automatically handled because no conflict can ever occur if we don’t store values"}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"Every replica always converges to the same value, an empty map"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can imagine, despite being formally definable as a CRDT, this data structure is of little practical use. The reason is that in order for a CRDT algorithm to be "},{type:b,tag:W,props:{},children:[{type:a,value:"good"}]},{type:a,value:" for practical purposes, it should try as much as possible to resolve conflicts while preserving the user’s intent, which has several important implications in our conflict resolution choices. We are going to cover this topic more in the following sections and chapters."}]},{type:a,value:f},{type:b,tag:av,props:{id:"our-first-crdt-set"},children:[{type:b,tag:F,props:{href:"#our-first-crdt-set",ariaHidden:U,tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"Our first CRDT: Set"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our CRDT adventure will start with a simple, yet very useful data structure: the Set."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"A generic Set data structure.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage6.png"},children:[]}]},{type:a,value:f},{type:b,tag:aP,props:{id:cm},children:[{type:b,tag:F,props:{href:"#first-step-add-only-set",ariaHidden:U,tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:cn}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To make our lives easier, we’ll narrow down our goal at first by creating an "},{type:b,tag:W,props:{},children:[{type:a,value:"Add-only"}]},{type:a,value:" Set, that is, a set to which we can add elements but not remove them (this is an important aspect, more on this later)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our goal is to create a CRDT with the semantics of an Add-only Set. In simple terms, we want a data structure with these features:"}]},{type:a,value:f},{type:b,tag:bP,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"Elements can be added to the structure ("},{type:b,tag:k,props:{},children:[{type:a,value:$}]},{type:a,value:cz}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"We can check if an element is present in the structure ("},{type:b,tag:k,props:{},children:[{type:a,value:N}]},{type:a,value:cz}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"Elements are not ordered (Set semantics)"}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"No duplicates (Set semantics)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For these examples, we will use JavaScript as it’s popular enough to be understood by most people (although some might argue that no one "},{type:b,tag:W,props:{},children:[{type:a,value:"really"}]},{type:a,value:" understands JavaScript \u002Fs)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s start by implementing our "},{type:b,tag:k,props:{},children:[{type:a,value:aw}]},{type:a,value:" class:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ax}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ak}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"Set"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v,be]},children:[{type:a,value:bf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:cC},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aY}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Pretty straightforward so far: we created a "},{type:b,tag:k,props:{},children:[{type:a,value:aw}]},{type:a,value:" class that wraps a Set and exposes the "},{type:b,tag:k,props:{},children:[{type:a,value:$}]},{type:a,value:bQ},{type:b,tag:k,props:{},children:[{type:a,value:N}]},{type:a,value:" operations."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Things start to get interesting when we introduce "},{type:b,tag:k,props:{},children:[{type:a,value:"CRDT"}]},{type:a,value:" semantics, which we are going to cover in the next section."}]},{type:a,value:f},{type:b,tag:aP,props:{id:co},children:[{type:b,tag:F,props:{href:"#adding-crdt-semantics",ariaHidden:U,tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:cp}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:cE},{type:b,tag:k,props:{},children:[{type:a,value:ax}]},{type:a,value:" currently lacks one of the most important features of a CRDT: convergence. In particular, we want every replica of our data structure to eventually converge to the same value."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Replicas eventually converge to the same Set value.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage7.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, we are not interested in the specific protocol used by different replicas to send each others’ changes. Let’s just assume that each replica will periodically send its "},{type:b,tag:k,props:{},children:[{type:a,value:ax}]},{type:a,value:" value to the other replicas."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Replicas sending to each other their entire values.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage8.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To handle the merging process, we’ll add a new method to our "},{type:b,tag:k,props:{},children:[{type:a,value:aw}]},{type:a,value:" structure: "},{type:b,tag:k,props:{},children:[{type:a,value:ap}]},{type:a,value:". This method takes another "},{type:b,tag:k,props:{},children:[{type:a,value:ax}]},{type:a,value:" and merges all its elements with the current set:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,v,be]},children:[{type:a,value:"for"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"let"}]},{type:a,value:" element "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"of"}]},{type:a,value:" otherSet"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With the "},{type:b,tag:k,props:{},children:[{type:a,value:ap}]},{type:a,value:" method, we can now propagate changes among replicas. In this example, we propagate changes from replica B to replica A:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aY}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:bS},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aY}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F Here we propagate the changes from replica B to replica A"}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite its simplicity, this approach offers some surprising advantages over traditional synchronization techniques:"}]},{type:a,value:f},{type:b,tag:bP,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"It’s highly "},{type:b,tag:W,props:{},children:[{type:a,value:"decentralized"}]},{type:a,value:": the algorithm imposes no constraint over the topology and communication between replicas. In particular, because the merging process is commutative and transitive, if replica A synchronizes with replica B, and then replica B synchronizes with replica C, then replica A and C will be in sync (as long as no concurrent update in A has happened in the meantime), despite having never communicated directly with each other."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"As a result, the system is extremely robust against network problems and downtimes, as it can transparently make use of a "},{type:b,tag:F,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMesh_networking#:~:text=A%20mesh%20network%20is%20a,data%20to%20and%20from%20clients.",rel:[ar,as,at],target:au},children:[{type:a,value:"mesh network"}]},{type:a,value:" rather than a traditional centralized solution."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can imagine, there are downsides as well, which we’ll gradually cover in the following sections."}]},{type:a,value:f},{type:b,tag:aP,props:{id:cq},children:[{type:b,tag:F,props:{href:"#adding-support-for-removals-a-naive-%CE%B1ttempt",ariaHidden:U,tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:cr}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Although an Add-only Set could be useful in some cases, many scenarios would also require removal operations, so our next goal is to add support for them. In short, we want to introduce a "},{type:b,tag:k,props:{},children:[{type:a,value:aR}]},{type:a,value:" method that replicas can use to remove an element from the Set."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first attempt could look as follows:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:"delete"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And if we try to run it:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:cC},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aY}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It works! Wait… does it? Apparently, the remove operation works correctly, but what happens when we synchronize the set across multiple replicas?"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:bS},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cG},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F Sync replica B with replica A"}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aY}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cG},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F Sync replica A with replica B"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F true!!! The 'a' came back!"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We have a problem: although replica A deleted element "},{type:b,tag:k,props:{},children:[{type:a,value:F}]},{type:a,value:", synchronizing with replica B causes the "},{type:b,tag:k,props:{},children:[{type:a,value:F}]},{type:a,value:" element to come back!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"After the second synchronization, the “a” element is undeleted from replica A, which is not the expected behavior.",src:"\u002Fposts\u002F2024-01-19-understanding-CRDTs-a-gentle-introduction-chapter-1\u002Fimage9.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:cE},{type:b,tag:k,props:{},children:[{type:a,value:aR}]},{type:a,value:" operation is quite flaky: depending on the synchronization sequence, elements can be randomly undeleted. How can we solve this problem?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Turns out that delete operations are one of the core complexities of CRDTs, and multiple approaches exist to deal with them. Each has its own set of tradeoffs, so we’ll discuss some of them in the upcoming sections."}]},{type:a,value:f},{type:b,tag:aP,props:{id:cs},children:[{type:b,tag:F,props:{href:"#adding-support-for-removals-the-set-pair-approach",ariaHidden:U,tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:ct}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first approach to deal with removals is the Set-pair technique. In a nutshell, instead of using a Set to represent the elements, we are going to use "},{type:b,tag:W,props:{},children:[{type:a,value:"two"}]},{type:a,value:": one for the additions and one for the removals. It might seem confusing at first, so let’s try to take it step by step."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s start with an empty set, which will be represented internally by two add-only sets:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, we add elements "},{type:b,tag:k,props:{},children:[{type:a,value:F}]},{type:a,value:bQ},{type:b,tag:k,props:{},children:[{type:a,value:br}]},{type:a,value:j}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If we now want to remove "},{type:b,tag:k,props:{},children:[{type:a,value:br}]},{type:a,value:", we could try deleting it directly from the "},{type:b,tag:k,props:{},children:[{type:a,value:aS}]},{type:a,value:" set, but we would then experience the same flakiness problem saw previously. Instead, we are going to "},{type:b,tag:W,props:{},children:[{type:a,value:$}]},{type:a,value:" the "},{type:b,tag:k,props:{},children:[{type:a,value:br}]},{type:a,value:" element to the "},{type:b,tag:k,props:{},children:[{type:a,value:aT}]},{type:a,value:" set:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can now define the content of the Set as:"}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"All the elements in the "},{type:b,tag:k,props:{},children:[{type:a,value:aS}]},{type:a,value:" Set that are not present in the "},{type:b,tag:k,props:{},children:[{type:a,value:aT}]},{type:a,value:" Set."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can implement this Set by elegantly composing two "},{type:b,tag:k,props:{},children:[{type:a,value:ax}]},{type:a,value:" together:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:aw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v,be]},children:[{type:a,value:"if"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n            "},{type:b,tag:c,props:{className:[d,v,be]},children:[{type:a,value:bf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cI]},children:[{type:a,value:"false"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\n\n        "},{type:b,tag:c,props:{className:[d,v,be]},children:[{type:a,value:bf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bo},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bo},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aG}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:bS},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:aY}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,E,C]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:al},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F false (still false, yey!)"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, our new Set remembers the removed element "},{type:b,tag:k,props:{},children:[{type:a,value:F}]},{type:a,value:" even after a synchronization!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Unfortunately, our current "},{type:b,tag:k,props:{},children:[{type:a,value:aw}]},{type:a,value:" still has some problems:"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"What happens if a replica adds an element after removing it? With the current implementation, once an element has been removed it won’t be restorable."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"Although we are "},{type:b,tag:W,props:{},children:[{type:a,value:"logically"}]},{type:a,value:" removing elements, the size of our data structure keeps increasing over time. If we perform many removals, that would bloat our memory consumption significantly."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the next chapter, we are going to answer these two questions and more, so stay tuned!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"PS: All the code is available in this repository: "},{type:b,tag:F,props:{href:cJ,rel:[ar,as,at],target:au},children:[{type:a,value:cJ}]}]}]},excerpt:{type:aX,children:[{type:b,tag:i,props:{},children:[{type:a,value:cu},{type:b,tag:F,props:{href:cv,rel:[ar,as,at],target:au},children:[{type:a,value:cw}]},{type:a,value:cx}]}]},dir:bW,path:"\u002Farticles\u002F2024-01-19-understanding-crtds-a-gentle-introduction-chapter-1",extension:bX,createdAt:aZ,updatedAt:aZ,cleanedSlug:"understanding-crtds-a-gentle-introduction-chapter-1"},{slug:"2024-01-15-fixing-the-network-request-failed-error-with-github-npm-packages",description:"The other day, I encountered this error while running npm install on a private repository:",layout:bN,title:cK,author:bO,date:"2024-01-15T00:00:00.000Z",categories:"github npm install package network request failed",social_title:cK,toc:[],body:{type:aX,children:[{type:b,tag:i,props:{},children:[{type:a,value:cL},{type:b,tag:k,props:{},children:[{type:a,value:cM}]},{type:a,value:cN}]},{type:a,value:f},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[O,K]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"npm "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:" code "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bY}]},{type:a,value:bZ},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:" syscall connect\nnpm "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:" errno "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bY}]},{type:a,value:bZ},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:" network request to https"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,"regex"]},children:[{type:b,tag:c,props:{className:[d,cO]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,"regex-source","language-regex"]},children:[{type:a,value:"pkg-npm"},{type:b,tag:c,props:{className:[d,cP,C]},children:[{type:a,value:o}]},{type:a,value:"githubusercontent"},{type:b,tag:c,props:{className:[d,cP,C]},children:[{type:a,value:o}]},{type:a,value:"com"}]},{type:b,tag:c,props:{className:[d,cO]},children:[{type:a,value:P}]}]},{type:b,tag:c,props:{className:[d,a_,h]},children:[{type:a,value:a$}]},{type:a,value:" failed"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:"reason"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:" connect "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,a_,h]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:"443"}]},{type:a,value:bZ},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:"This"}]},{type:a,value:" is a problem related to network connectivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cQ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:"In"}]},{type:a,value:" most cases you are behind a proxy or have bad network settings"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cQ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:" network \nnpm "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:"If"}]},{type:a,value:" you are behind a proxy"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:" please make sure that the\nnpm "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aI}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"'proxy'"}]},{type:a,value:" config is "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ak}]},{type:a,value:" properly"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"  "},{type:b,tag:c,props:{className:[d,t]},children:[{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:"See"}]}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"'npm help config'"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This project uses GitHub’s private NPM registry to host some packages."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After trying multiple approaches (eg. making sure that the GitHub tokens were not expired) the fix turned out to be more interesting than expected: "},{type:b,tag:aq,props:{},children:[{type:a,value:"disabling and re-enabling the WiFi on my Macbook Pro."}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"My theory is that a system agent got into an inconsistent state, and restarting the internet connection was enough to unblock the situation."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is a humbling reminder of the effectiveness of restarting: one of the most underrated yet powerful troubleshooting techniques."}]}]},excerpt:{type:aX,children:[{type:b,tag:i,props:{},children:[{type:a,value:cL},{type:b,tag:k,props:{},children:[{type:a,value:cM}]},{type:a,value:cN}]}]},dir:bW,path:"\u002Farticles\u002F2024-01-15-fixing-the-network-request-failed-error-with-github-npm-packages",extension:bX,createdAt:aZ,updatedAt:aZ,cleanedSlug:"fixing-the-network-request-failed-error-with-github-npm-packages"},{slug:"2023-01-19-good-software-architectures-are-mostly-about-boundaries",description:b_,layout:bN,title:cR,author:bO,date:"2023-01-19T00:00:00.000Z",categories:"software architecture design engineering",social_title:cR,toc:[{id:cS,depth:aO,text:cT},{id:cU,depth:aO,text:cV},{id:cW,depth:aO,text:cX}],body:{type:aX,children:[{type:b,tag:i,props:{},children:[{type:a,value:b_}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Boundaries",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we are going to discuss boundaries following a pragmatic approach, presenting examples of problematic boundaries and discussing possible solutions. In the process, we’ll also try to derive general and reusable guidelines to design better boundaries in the future."}]},{type:a,value:f},{type:b,tag:av,props:{id:"what-are-boundaries"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#what-are-boundaries",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"What are boundaries?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the problematic examples, let’s take a step back and define what a boundary means in the context of this article:"}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are the contracts between different software components, and model the communication between them."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Boundaries are contracts",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are contracts. Different languages call them in different ways: interfaces, traits, types, signatures, but in a nutshell, boundaries define what information goes in and out of any given software component. Boundaries exist at all levels of the stack, defining the interactions between high-level systems, all the way down to services, modules, and functions."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are a special part of a system. Despite accounting for a relatively small portion of a codebase, boundaries protect implementations from the outside world. A well-thought-out boundary lets consumers perform high-level operations without worrying about the low-level details of "},{type:b,tag:W,props:{},children:[{type:a,value:"how"}]},{type:a,value:" the operation is implemented."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are usually hard to change. Because boundaries define the interactions between software components, their shape strongly influences how consumers query producers. As a result, changing a boundary might require all its consumers to change. For example, let’s consider a web service, where its public API defines the boundary with clients. Changing the implementation of a route handler might be trivial, but changing the API shape should be done carefully, as we might break all dependent clients. This is one of the reasons why versioned APIs exist, and why changing boundaries is hard."}]},{type:a,value:f},{type:b,tag:av,props:{id:"good-and-bad-boundaries"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#good-and-bad-boundaries",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"Good and bad boundaries"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the highest level, good boundaries promote two important software engineering principles:"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:b,tag:aq,props:{},children:[{type:a,value:"Single responsibility"}]},{type:a,value:": every software component is only responsible for one domain area, minimizing the overlap with other components’ responsibilities."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:b,tag:aq,props:{},children:[{type:a,value:"Loose coupling"}]},{type:a,value:": every software component is weakly associated with the others so that a change in one component doesn’t affect the others. Moreover, software components should know as little as possible about the other components."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the same time, bad boundaries tend to display opposite properties:"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:b,tag:aq,props:{},children:[{type:a,value:"Multiple responsibilities"}]},{type:a,value:" (aka. “fat” software components): fewer modules that are responsible for several domain areas, and are hard to change."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:b,tag:aq,props:{},children:[{type:a,value:"Tight coupling"}]},{type:a,value:": software components that are strongly dependent on each other, knowing a lot about each other’s implementation details."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Good vs Bad boundaries",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage2.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another useful tool to evaluate the quality of a boundary is to analyze its "},{type:b,tag:W,props:{},children:[{type:a,value:"information leaks"}]},{type:a,value:", that is, the amount of unnecessary information that goes through it."}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Each software component should minimize the amount of information it has to deal with, accepting and exposing the least amount of information necessary to perform its responsibility."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When we allow a service or module to know more than it needs to, we expose it to the risk of becoming strongly coupled with other components, making the system hard to maintain in the long term."}]},{type:a,value:f},{type:b,tag:av,props:{id:"a-problematic-boundary"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#a-problematic-boundary",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"A problematic boundary"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After covering boundaries at a high level, we are now ready to tackle our first problematic boundary. We are going to discuss a common anti-pattern found in the front-end world, focusing on the process of designing good component interfaces."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our goal is to create a React component to display users’ avatars."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"The Avatar Component",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage3.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:cY},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" type defined in our codebase with the following schema:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:b$},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cZ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:c_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"\n  email"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"During the application lifecycle, we’ll obtain the currently logged-in "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" from our authentication API."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Given that we already have a "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" instance from our authentication layer and it contains all the information we need, a possible approach to implement the "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:" component could be to accept a "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" object as prop:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:c$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n  user"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:da},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,db,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" user "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ba}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F Then to use it"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:"Avatar user"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite displaying the user image and name correctly, this "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:" implementation is not great: by accepting a "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" as prop, we are leaking a lot of information through the interface boundary, which could hurt maintainability in the long run."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For example, suppose that in a few weeks, we are asked to implement a comment section under our application’s blog posts."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ad,props:{alt:"Comment List",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage4.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Ideally, we would like to re-use the "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:" component to display comments’ users. Unfortunately, the Comment API does not return a "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" object, but rather a "},{type:b,tag:k,props:{},children:[{type:a,value:bb}]},{type:a,value:" object, having the following schema:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:b$},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cZ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"\n  thumbnailUrl"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"\n  karma"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, "},{type:b,tag:k,props:{},children:[{type:a,value:bb}]},{type:a,value:" has both the first name and the image URL we need, so can we use it? Well, not exactly, as the "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:" component can only accept "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" objects, not "},{type:b,tag:k,props:{},children:[{type:a,value:bb}]},{type:a,value:" (s). If we tried to pass "},{type:b,tag:k,props:{},children:[{type:a,value:bb}]},{type:a,value:"s to the Avatar, besides the TypeScript compiler screaming at us, we would not be able to see the image, as in "},{type:b,tag:k,props:{},children:[{type:a,value:bb}]},{type:a,value:" the field is called "},{type:b,tag:k,props:{},children:[{type:a,value:bu}]},{type:a,value:" and not "},{type:b,tag:k,props:{},children:[{type:a,value:bj}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With deadlines looming, we might be tempted to work around the issue with hackish solutions:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F The lazy casting"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:dg},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:di},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:a,value:da},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F Or even worse, the mock values"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:dg},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:di},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:"\n    email"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:ag}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Why is it so hard? The problem is that "},{type:b,tag:aq,props:{},children:[{type:a,value:"despite only needing a first name and image URL to work, our"}]},{type:a,value:g},{type:b,tag:aq,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:aB}]}]},{type:a,value:g},{type:b,tag:aq,props:{},children:[{type:a,value:"component takes a full"}]},{type:a,value:g},{type:b,tag:aq,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:az}]}]},{type:a,value:g},{type:b,tag:aq,props:{},children:[{type:a,value:"as input!"}]},{type:a,value:" In other words, we are coupling the "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:" component with way more information than necessary, creating a "},{type:b,tag:W,props:{},children:[{type:a,value:"leaking boundary"}]},{type:a,value:". The problem might not become apparent until we either attempt to reuse the component, try mocking some data for testing, or start a refactor."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We’ll discuss other kinds of leaking boundaries throughout the article, but for now, let’s focus on the possible solutions. As we mentioned earlier, our main problem is that "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:" is tightly coupled with the "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:" type, which has way more information than necessary. In general, the solution is to make our component only dependent on the exact information we need:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:c$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:b$},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:c_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aA]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,db,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" firstName"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:" imageUrl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ba}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F Then to use it with both User and PublicUser"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:dj},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dk},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:dj},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dl},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dk},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dl},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:" now only depends on "},{type:b,tag:k,props:{},children:[{type:a,value:aU}]},{type:a,value:bQ},{type:b,tag:k,props:{},children:[{type:a,value:bj}]},{type:a,value:", so we can easily reuse it across the app. With this change, we promoted "},{type:b,tag:aq,props:{},children:[{type:a,value:"loose coupling"}]},{type:a,value:", preventing an information leak (for example with the User’s "},{type:b,tag:k,props:{},children:[{type:a,value:"email"}]},{type:a,value:" and PublicUser’s "},{type:b,tag:k,props:{},children:[{type:a,value:"karma"}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:av,props:{id:"towards-better-boundaries"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#towards-better-boundaries",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"Towards better boundaries"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the next examples, let’s summarize what we learned so far:"}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:dm}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"a-service-level-example"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#a-service-level-example",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"A service-level example"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After covering an example related to the front-end world, our next case study revolves around a hypothetical E-commerce website. In particular, our goal is to design a web service to generate product recommendations. The service will accept "},{type:b,tag:k,props:{},children:[{type:a,value:bl}]},{type:a,value:" (s) and return the list of product recommendations that might be relevant for the given users."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The main API endpoint could look as follows:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F Return a list of recommended products for the given user_id"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:bl},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:"recommended_products\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the implementation level, the service will generate product recommendations based on the users’ past order history. In a nutshell, the process could be approximated with these steps:"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"The service receives a "},{type:b,tag:k,props:{},children:[{type:a,value:bl}]},{type:a,value:" as input."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"The service fetches the list of recently purchased products for the given user."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"The service returns a list of similar products."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The initial implementation would return a JSON response, such as:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ce}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,a_,h]},children:[{type:a,value:a$}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a couple of weeks, the service implementation is completed and the team deploys it."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After some real-world testing, the product team realizes that despite providing good recommendations in most cases, the service occasionally returns non-relevant products for some users. Given that the recommendations are based on the recently purchased products, the product team asks the service developers to add the original “source data” alongside the recommendations. In other words, the service would not only return the product recommendations but also the list of purchased products that were used to generate it."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The service developers think “well, adding that data shouldn’t be a huge problem, we already have it in our API handler, we can just add an additional response field. We could turn it off by default and add an additional query parameter "},{type:b,tag:k,props:{},children:[{type:a,value:bx}]},{type:a,value:" to request it”."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Fast forward a couple of hours, and our API response looks as follows:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:bl},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:"recommended_products"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"?"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,cI]},children:[{type:a,value:U}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ce}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,a_,h]},children:[{type:a,value:a$}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:"\"latest_ordered_products\""}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:dn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\"Pizza Plate\""}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,a_,h]},children:[{type:a,value:a$}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The product team is happy. Thanks to this additional data, they figure out that the broken product recommendations were caused by some fancy Unicode characters contained in a few products’ names. A happy ending, right? Well, kind of. For now, we got the quick win the business needed at the expense of a minor information leak."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A few weeks afterward, a product manager realizes that users might be also interested in re-buying some of their previously purchased products. The (already busy) developers are therefore asked to add a new section to the E-commerce Homepage to show a “buy again” section, with some of their previously purchased products."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With the deadlines looming, the assigned developer investigates the easiest way to provide that information. After a painful experience the month before, the developer dreads the idea of using the Orders API again, as it’s a legacy, badly-designed service that it’s an absolute pain to use. During this search, the developer stumbles upon the Recommendation API and its "},{type:b,tag:k,props:{},children:[{type:a,value:bm}]},{type:a,value:" parameter. Eureka! Given that the frontend already uses the Recommendation API on the Homepage, getting the products necessary for the “buy again” section would be as straightforward as passing the "},{type:b,tag:k,props:{},children:[{type:a,value:bx}]},{type:a,value:" parameter and reading another JSON field."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Shortly thereafter, the “Buy again” section is up and running on the E-commerce homepage, and everyone is happy."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While nothing has broken yet, let’s stop for a moment to analyze the current situation:"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"The recommendation service, whose sole goal was to provide a list of recommended products, exposed the additional "},{type:b,tag:k,props:{},children:[{type:a,value:bm}]},{type:a,value:" field (an implementation detail) for debugging purposes."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"The frontend now uses this additional "},{type:b,tag:k,props:{},children:[{type:a,value:bm}]},{type:a,value:" field to implement the (unrelated) “buy again” feature."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We’ll soon discuss why this is a problem, but for now, let’s remember that ideally, all software components should have a single responsibility and be loosely coupled."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Fast-forward a few weeks, the company’s data scientists design a new recommendation algorithm based on user profiling. Instead of using the previous order history to generate the recommendations, the new algorithm would profile the users based on some demographic information, and suggest products that are relevant to the profile types. Remember, the goal of the recommendation service is to generate a list of recommended products for a given user ID."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The response format for the new algorithm is the same as the original API contract:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:a,value:bl},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:P}]},{type:a,value:"recommended_products\n\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,am,p]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:ce}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,a_,h]},children:[{type:a,value:a$}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While reviewing the code, the developers of the recommendation service stumble upon the "},{type:b,tag:k,props:{},children:[{type:a,value:bx}]},{type:a,value:" parameter. This time, the products are based on the users’ demographics rather than their past orders, so that information is not available. After a bit of consideration, the developers are confident they can remove it, as it was only used as a one-off debugging tool and it’s unlikely someone is still using it. Just to be safe, they look at the request metrics to verify that no client is using that parameter, and… Well, to their surprise, it’s heavily used! How come a one-off debugging tool is still being used after months?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After some investigation, they realize the Homepage needs that parameter to display the “Buy Again” section, and deploying the new recommendation service as-is will break it."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Needless to say, the release date is postponed, a lengthy discussion between the service team and the frontend team is started, and other expensive consequences."}]},{type:a,value:f},{type:b,tag:aP,props:{id:cS},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#what-went-wrong",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:cT}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From a high-level perspective, this issue was caused by a problematic boundary:"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"When the developers added the "},{type:b,tag:k,props:{},children:[{type:a,value:bm}]},{type:a,value:" field, they exposed an implementation detail, leaking some information not related to the main service responsibility."}]},{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"When the frontend team used the "},{type:b,tag:k,props:{},children:[{type:a,value:bm}]},{type:a,value:" field to implement the “buy again” feature, they created another "},{type:b,tag:W,props:{},children:[{type:a,value:"implicit"}]},{type:a,value:" responsibility for the recommendation service, violating the single responsibility principle."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Every time a service, module, or function exposes more information than necessary, we run the risk of getting consumers to depend on it. As a result, consumers become coupled with implementation details rather than abstract APIs, making the system harder to change."}]},{type:a,value:f},{type:b,tag:aP,props:{id:cU},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#how-we-could-have-prevented-it",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:cV}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"API requests and responses act as contracts. Therefore, we should be extremely careful with all the information we expose. Firstly, we should ask: “is this information absolutely necessary to perform the service responsibility?” and also “If I completely changed the implementation of the service, would this data still be relevant?”"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the case of the product recommendation service, the only responsibility was to return the list of recommended products for the given user. The fact that it was derived from the user’s latest purchases was an implementation detail, and should not have been exposed."}]},{type:a,value:f},{type:b,tag:av,props:{id:"another-step-forward"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#another-step-forward",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"Another step forward"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into our last example, let’s discuss what we learned so far:"}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:dm}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Good boundaries focus on a single responsibility"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"other-benefits-of-good-boundaries"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#other-benefits-of-good-boundaries",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"Other benefits of good boundaries"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We’ll close the article by discussing other benefits of good boundaries, starting again from a hypothetical scenario: we are hired as consultants by a rental company that is rebuilding its web application. As part of our duties, we are asked to create a function that, given a list of "},{type:b,tag:k,props:{},children:[{type:a,value:af}]},{type:a,value:"s, returns the closest to a given coordinate."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:cY},{type:b,tag:k,props:{},children:[{type:a,value:af}]},{type:a,value:" type defined in our codebase:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:a,value:cf},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bE}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, besides the address and owner information we find the "},{type:b,tag:k,props:{},children:[{type:a,value:aa}]},{type:a,value:" field, which is all we need to implement this functionality."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our method’s signature could look as follows:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,aF]},children:[{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:"houses"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:" longitude"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F ... code to calculate the closest house"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As part of our development process, we also want to make sure it works correctly, so we start writing unit tests:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bH,h]},children:[{type:a,value:ba}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\"123\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bE}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\"John\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:dp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:"mockHouse2"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:dn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bE}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\"Bob\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:dp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ci},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite covering the main use case of our function, this test is unnecessarily verbose and hard to maintain due to all the unrelated fields we need to specify in the mocks. Why do we need to specify an owner in the mock if we are only interested in using the "},{type:b,tag:k,props:{},children:[{type:a,value:aa}]},{type:a,value:" field? If at some point in the future, another field is added to the "},{type:b,tag:k,props:{},children:[{type:a,value:af}]},{type:a,value:" type, we would need to update the test even if the change is unrelated to the functionality we are testing. In short, this would become a maintenance burden."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first approach to mitigate the problem could be to use casting:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bH,h]},children:[{type:a,value:ba}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:dq},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,bM]},children:[{type:a,value:bk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:dr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,bM]},children:[{type:a,value:bk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ci},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This approach solves the maintenance and verbosity issues, though it has one potential problem: while TypeScript is smart enough to check whether what we are casting is reasonable (for example, if we tried to do "},{type:b,tag:k,props:{},children:[{type:a,value:"{ foo: true } as House"}]},{type:a,value:", it wouldn’t let us do it, as the two types are too incompatible), there are still some cases in which that casting could silence a problem. For example, let’s say for whatever reason we needed to add an "},{type:b,tag:k,props:{},children:[{type:a,value:ds}]},{type:a,value:" field to the "},{type:b,tag:k,props:{},children:[{type:a,value:af}]},{type:a,value:" coordinates:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:a,value:cf},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bE}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ds}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F \u003C- This field"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note: adding a field to the "},{type:b,tag:k,props:{},children:[{type:a,value:aa}]},{type:a,value:" field doesn’t make much sense in this context, but there are cases where adding a field could likely happen. For the sake of this example, pretend "},{type:b,tag:k,props:{},children:[{type:a,value:aa}]},{type:a,value:" is one of them :)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now we have a problem: our test would still pass the TypeScript compilation without errors, even though we would want to be notified of this new incompatibility:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:cg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bH,h]},children:[{type:a,value:ba}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:dq},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:dt}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,bM]},children:[{type:a,value:bk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:dr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:dt}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,bM]},children:[{type:a,value:bk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:ci},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a lucky case, the test would fail at runtime in an obvious way, letting us realize the problem quickly. In an unlucky scenario, we would lose time to track down a cryptic error and fix it."}]},{type:a,value:f},{type:b,tag:aP,props:{id:cW},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#an-alternative-approach",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:cX}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A possible alternative would be to define the "},{type:b,tag:k,props:{},children:[{type:a,value:bn}]},{type:a,value:" function with a more focused boundary:"}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:a,value:cf},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:du}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:r}]},{type:a,value:" getClosestEntity"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ck}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"extends"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:du}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"entities"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:" latitude"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:" number "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ck}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u002F\u002F ...code to calculate the closest entity"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, the "},{type:b,tag:k,props:{},children:[{type:a,value:cl}]},{type:a,value:" method is generic and can perform its task with whatever object has "},{type:b,tag:k,props:{},children:[{type:a,value:aa}]},{type:a,value:" in it, including "},{type:b,tag:k,props:{},children:[{type:a,value:af}]},{type:a,value:"(s). This has two advantages:"}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"Tests could be lean and without casts, which would be optimal in terms of maintainability"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:G,props:{className:[I]},children:[{type:b,tag:J,props:{className:[K,O]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\"returns closest entity correctly\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bH,h]},children:[{type:a,value:ba}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:" mockEntity1 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:" mockEntity2 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:Q}]},{type:a,value:" closestEntity "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:dv},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:" mockEntity2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,p]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:j}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"closestEntity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,x,r,t]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:dv},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:aE,props:{},children:[{type:a,value:f},{type:b,tag:M,props:{},children:[{type:a,value:"We could reuse the "},{type:b,tag:k,props:{},children:[{type:a,value:cl}]},{type:a,value:" function with many different entities without changing the implementation"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aK,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Important note: the example we just discussed is very likely over-engineered. I choose a simple example to make the point easier to understand, but I wouldn’t suggest this approach for such a simple use case. This approach really shines when applied to complex algorithms and logic we need to share in several different contexts."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"conclusion"},children:[{type:b,tag:F,props:{ariaHidden:U,href:"#conclusion",tabIndex:X},children:[{type:b,tag:c,props:{className:[Y,Z]},children:[]}]},{type:a,value:"Conclusion"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Throughout the article, we gave a general overview of boundaries. We started by defining boundaries and, through a series of examples, discussed the difference between good and bad ones, along with the consequences they can have on the software we produce."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As always, balancing best practices and over-engineering is hard. You shouldn’t always apply these techniques, but rather, consider them as an additional tool to create better software."}]}]},excerpt:{type:aX,children:[{type:b,tag:i,props:{},children:[{type:a,value:b_}]}]},dir:bW,path:"\u002Farticles\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries",extension:bX,createdAt:aZ,updatedAt:aZ,cleanedSlug:"good-software-architectures-are-mostly-about-boundaries"}]}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","\n"," ","operator","p",":","code",";",")","(",".","property","{","function","}","property-access","literal-property","keyword",",","method","string","\n    ","=","\n  ","class-name","\n      ","console","a","div","comment","nuxt-content-highlight","pre","line-numbers","number","li","has","language-javascript","\u002F","const","'a'","\u003C","\u003E","true","constant","em",-1,"icon","icon-link","log","add","coordinates","longitude","latitude","img","maybe-class-name","House","\n\n","\n        ","this"," string","set","replicaA","string-property","\n       ","new","merge","strong","nofollow","noopener","noreferrer","_blank","h1","CRDTSet","CRDTAddOnlySet","\n\n    ","User","builtin","Avatar","[","]","ol","parameter","\u002F\u002F true","ERR","!"," number","blockquote","\n     ","1","2",2,"h2","'b'","remove","elements","removals","firstName","\"\"","mockHouse1","root","\u002F\u002F false","2024-01-19T14:27:43.397Z","spread","...","=\u003E","PublicUser"," publicUser"," \n","control-flow","return","replicaB","language-typescript","user","imageUrl","as","user_id","latest_ordered_products","getClosestHouse","otherSet","\nreplicaA","\n\nreplicaA","b"," network ","type","thumbnailUrl","\"product_id\"","\"product_name\"","include_latest_purchases","id","address","street","city","state","owner","name","phoneNumber","test","arrow","6","7","expect","toBe","module","post","Federico Terzi","ul"," and "," replicaA "," replicaB ","\nreplicaB","elements ","\nremovals ","\u002Farticles",".md","ETIMEDOUT","\nnpm ","As software engineers, we are always asked to design maintainable and extensible software architectures. While design patterns and best practices help, most of them are just facades to one larger and fundamental principle: designing good boundaries.","\n  firstName","GET","users","\"recommended_products\"","1234","\"Pizza Cutter\"","type ","\"returns closest house correctly\""," closestHouse "," mockHouse2","closestHouse","T","getClosestEntity","first-step-add-only-set","First step: Add-only Set","adding-crdt-semantics","Adding CRDT semantics","adding-support-for-removals-a-naive-αttempt","Adding support for Removals: a Naive Αttempt","adding-support-for-removals-the-set-pair-approach","Adding support for Removals: the Set-pair Approach","In the past two months, I’ve been diving deeper into the realm of distributed systems. The catalyst that started my research was discovering the world of ","https:\u002F\u002Flocalfirstweb.dev\u002F","local-first applications",", a class of software that allows users to access and modify their data locally, while seamlessly synchronizing across devices, even in the face of connection failures.","https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConflict-free_replicated_data_type"," operation)","class","constructor"," set ","\n\nset","Our ","\nset","       "," b","boolean","https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fcrdt-experiments","Fixing the “network request failed” error with GitHub NPM packages","The other day, I encountered this error while running ","npm install"," on a private repository:","regex-delimiter","char-set","npm","Good Software Architectures are mostly about Boundaries","what-went-wrong","What went wrong","how-we-could-have-prevented-it","How we could have prevented it","an-alternative-approach","An alternative approach","Let’s assume we already have a ","\n  lastName","\n  imageUrl","Props"," User","function-variable"," Props","img src","Avatar \n  user","\n    firstName","\n    lastName","lastName","\n    imageUrl","Avatar firstName"," imageUrl","publicUser","Good boundaries do not leak any unnecessary information","\"456\"","point","\"1234\""," mockHouse1 "," mockHouse2 ","extra","\u002F\u002F \u003C-- missing the 'extra' field, but typescript does not complain","WithCoordinates","mockEntity1")));