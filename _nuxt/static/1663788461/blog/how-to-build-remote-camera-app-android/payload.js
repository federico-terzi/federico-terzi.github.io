__NUXT_JSONP__("/blog/how-to-build-remote-camera-app-android", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV){return {data:[{article:{slug:"2019-08-27-how-to-build-remote-camera-app-android",description:"I love automating things, especially the boring ones. Having a Youtube channel, I found that editing videos can be very time-consuming and so I started thinking about ways to improve my workflow.",layout:"post",title:"Building a Remote Camera App for Android",author:"Federico Terzi",date:"2019-08-27T00:00:00.000Z",categories:"android development",toc:[{id:ad,depth:ae,text:af},{id:ag,depth:ae,text:ah},{id:ai,depth:V,text:aj},{id:ak,depth:V,text:al},{id:am,depth:V,text:an}],body:{type:ao,children:[{type:b,tag:g,props:{},children:[{type:a,value:ap},{type:b,tag:n,props:{href:aq,rel:[s,t,u],target:v},children:[{type:a,value:ar}]},{type:a,value:as}]},{type:a,value:f},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"My main bottlenecks are "},{type:b,tag:o,props:{},children:[{type:a,value:"cutting the video clips"}]},{type:a,value:at},{type:b,tag:o,props:{},children:[{type:a,value:"transferring the videos to the PC"}]},{type:a,value:". Because I record those videos with my smartphone, I wanted an app that could:"}]},{type:a,value:f},{type:b,tag:"ul",props:{},children:[{type:a,value:f},{type:b,tag:W,props:{},children:[{type:a,value:"Control the camera from my PC"}]},{type:a,value:f},{type:b,tag:W,props:{},children:[{type:a,value:"Organize the clip files in a way that makes editing easier"}]},{type:a,value:f},{type:b,tag:W,props:{},children:[{type:a,value:"Send the clips automatically to my computer"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I searched for a while on the Play Store, but I couldn’t find an app that completely satisfied my needs and so, being a developer, "},{type:b,tag:K,props:{},children:[{type:a,value:"I decided to create my own"}]},{type:a,value:h}]},{type:a,value:f},{type:b,tag:au,props:{id:ad},children:[{type:b,tag:n,props:{href:"#forking-open-camera",ariaHidden:x,tabIndex:y},children:[{type:b,tag:c,props:{className:[z,A]},children:[]}]},{type:a,value:af}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Creating a Camera App isn’t a trivial task, so it made sense to start from an existing project. Luckily for me, Mark Harman created "},{type:b,tag:n,props:{href:"https:\u002F\u002Fopencamera.sourceforge.io\u002F",rel:[s,t,u],target:v},children:[{type:a,value:"Open Camera"}]},{type:a,value:", an awesome open-source camera App for Android that I used as a starting point."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The goal at this point was clear, "},{type:b,tag:o,props:{},children:[{type:a,value:"forking Open Camera"}]},{type:a,value:" and adding the "},{type:b,tag:o,props:{},children:[{type:a,value:"remote control"}]},{type:a,value:at},{type:b,tag:o,props:{},children:[{type:a,value:"file transfer"}]},{type:a,value:" functionality."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The Open Camera repository is hosted on "},{type:b,tag:o,props:{},children:[{type:a,value:"Sourceforge"}]},{type:a,value:" but I wanted to fork it on "},{type:b,tag:o,props:{},children:[{type:a,value:"Github"}]},{type:a,value:". Thanks to the "},{type:b,tag:n,props:{href:"https:\u002F\u002Fgithub.com\u002Fnew\u002Fimport",rel:[s,t,u],target:v},children:[{type:a,value:"Github Importer"}]},{type:a,value:" utility, the process was painless."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:L,props:{alt:"Forking Open Camera on Github",src:"\u002Fposts\u002Fopencameraimport.png"},children:[]}]},{type:a,value:f},{type:b,tag:au,props:{id:ag},children:[{type:b,tag:n,props:{href:"#compile-the-sources",ariaHidden:x,tabIndex:y},children:[{type:b,tag:c,props:{className:[z,A]},children:[]}]},{type:a,value:ah}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"After cloning the repository, I was ready to open the project with Android Studio to study the source, but first, I had to check if I could compile the app."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I started the compilation process, but as I already had Open Camera installed on my smartphone, "},{type:b,tag:o,props:{},children:[{type:a,value:"I got a naming conflict"}]},{type:a,value:B}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:L,props:{alt:"Naming Conflict Package Android",src:"\u002Fposts\u002Fandroidnamingconflict.png"},children:[]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This happened because both the original and my forked version "},{type:b,tag:K,props:{},children:[{type:a,value:"shared the same package id"}]},{type:a,value:". To fix this problem, all I had to do was to rename the package. All occurrences of "},{type:b,tag:k,props:{},children:[{type:a,value:"net.sourceforge.opencamera"}]},{type:a,value:" had been replaced with "},{type:b,tag:k,props:{},children:[{type:a,value:"com.federicoterzi.opencamerastudio"}]},{type:a,value:h}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This was easily accomplished with the "},{type:b,tag:o,props:{},children:[{type:a,value:"refactoring functions"}]},{type:a,value:" of Android Studio, combined with the very useful "},{type:b,tag:K,props:{},children:[{type:a,value:"Find in Path"}]},{type:a,value:" action."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"It’s also necessary to "},{type:b,tag:o,props:{},children:[{type:a,value:"change the folder structure"}]},{type:a,value:" to reflect the new package name. "},{type:b,tag:n,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F16804093\u002Frename-package-in-android-studio",rel:[s,t,u],target:v},children:[{type:a,value:"This StackOverflow question"}]},{type:a,value:" helped me in the process."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"At this point, I had a shiny new app on my smartphone, "},{type:b,tag:K,props:{},children:[{type:a,value:"Open Camera Studio"}]},{type:a,value:", ready to be tweaked."}]},{type:a,value:f},{type:b,tag:X,props:{id:ai},children:[{type:b,tag:n,props:{href:"#studying-the-source",ariaHidden:x,tabIndex:y},children:[{type:b,tag:c,props:{className:[z,A]},children:[]}]},{type:a,value:aj}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I wanted to manage the camera app remotely, so the next thing to do was to find out "},{type:b,tag:o,props:{},children:[{type:a,value:"how Open Camera controlled the recordings"}]},{type:a,value:h}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I started digging in the source code. I wanted to find the UI code that triggered the recording and the class "},{type:b,tag:k,props:{},children:[{type:a,value:"MainUI"}]},{type:a,value:" caught my attention."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:L,props:{alt:"Open Camera MainUI class",src:"\u002Fposts\u002Fopencameraui.png"},children:[]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Scrolling through the source, I stumbled upon the "},{type:b,tag:k,props:{},children:[{type:a,value:"onKeyDown"}]},{type:a,value:" method, apparently used to manage the events from volume buttons and selfie sticks, which in turn called the MainActivity’s takePicture method."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:L,props:{alt:"Open Camera Take Picture",src:"\u002Fposts\u002Fopencameratakepicture.png"},children:[]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"After a bit of experimenting, I determined that the "},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:" method enabled both the start and the stop of a video recording, so I was ready for the next phase."}]},{type:a,value:f},{type:b,tag:X,props:{id:ak},children:[{type:b,tag:n,props:{href:"#adding-remote-superpowers",ariaHidden:x,tabIndex:y},children:[{type:b,tag:c,props:{className:[z,A]},children:[]}]},{type:a,value:al}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"There are many ways to make the app capable of receiving remote commands, but I found that the most versatile one is the "},{type:b,tag:o,props:{},children:[{type:a,value:"bundled web server"}]},{type:a,value:" approach: a basic "},{type:b,tag:K,props:{},children:[{type:a,value:"HTTP web server"}]},{type:a,value:" is started in the app itself and other devices in the network can send requests ( such as commands ) and get responses ( such as video files )."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This solution also has the additional advantage that it could be possible to create a "},{type:b,tag:o,props:{},children:[{type:a,value:"Web App"}]},{type:a,value:", hosted by the web server itself, to control the smartphone from any web browser in the network. I chose a different route though because I wanted to keep things simple."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The easiest way to bundle a web server on Android is the "},{type:b,tag:n,props:{href:"https:\u002F\u002Fgithub.com\u002FNanoHttpd\u002Fnanohttpd",rel:[s,t,u],target:v},children:[{type:a,value:"NanoHTTPD Library"}]},{type:a,value:", which can be used by including the following dependency in the Gradle config file:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,"language-text"]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"implementation 'org.nanohttpd:nanohttpd:2.3.1'\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I was also necessary to add the following permissions in the "},{type:b,tag:k,props:{},children:[{type:a,value:"AndroidManifest.xml"}]},{type:a,value:B}]},{type:a,value:f},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,"language-xml"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,R]},children:[{type:b,tag:c,props:{className:[d,R]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:av}]},{type:a,value:aw}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ax]},children:[{type:b,tag:c,props:{className:[d,ay]},children:[{type:a,value:az}]},{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aB]},children:[{type:b,tag:c,props:{className:[d,e,aC]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:S}]},{type:a,value:"android.permission.ACCESS_WIFI_STATE"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:S}]}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,R]},children:[{type:b,tag:c,props:{className:[d,R]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:av}]},{type:a,value:aw}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ax]},children:[{type:b,tag:c,props:{className:[d,ay]},children:[{type:a,value:az}]},{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aB]},children:[{type:b,tag:c,props:{className:[d,e,aC]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:S}]},{type:a,value:"android.permission.INTERNET"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:S}]}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aD}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I then created the "},{type:b,tag:k,props:{},children:[{type:a,value:N}]},{type:a,value:" class extending the "},{type:b,tag:k,props:{},children:[{type:a,value:aE}]},{type:a,value:" class and overriding the "},{type:b,tag:k,props:{},children:[{type:a,value:T}]},{type:a,value:" method. This function will be called anytime a client makes an HTTP request to the bundled webserver."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"At this point, I needed a way to trigger the "},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:" method when the "},{type:b,tag:k,props:{},children:[{type:a,value:T}]},{type:a,value:" method was called. Unfortunately, I could not call it directly as the "},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:" method must be called from the "},{type:b,tag:o,props:{},children:[{type:a,value:"main thread"}]},{type:a,value:". So I used the powerful "},{type:b,tag:n,props:{href:"https:\u002F\u002Fdeveloper.android.com\u002Freference\u002Fandroid\u002Fsupport\u002Fv4\u002Fcontent\u002FLocalBroadcastManager",rel:[s,t,u],target:v},children:[{type:a,value:Y}]},{type:a,value:" class to setup a receiver in the MainActivity that called the "},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:" method and a "},{type:b,tag:o,props:{},children:[{type:a,value:"broadcast"}]},{type:a,value:" from the "},{type:b,tag:k,props:{},children:[{type:a,value:T}]},{type:a,value:" method to trigger it:"}]},{type:a,value:f},{type:b,tag:aF,props:{id:"broadcastreceiver"},children:[{type:b,tag:n,props:{href:"#broadcastreceiver",ariaHidden:x,tabIndex:y},children:[{type:b,tag:c,props:{className:[z,A]},children:[]}]},{type:a,value:Z}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In the MainActivity I added the receiver code:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,_]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aG}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Z}]},{type:a,value:" studioCommandReceiver "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:G}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:$}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,"annotation",e]},children:[{type:a,value:"@Override"}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aH}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"void"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"onReceive"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"Context"}]},{type:a,value:" context"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:aI}]},{type:a,value:" intent"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:"\n            "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,"boolean"]},children:[{type:a,value:"false"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"And the code to register\u002Funregister it:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,_]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aH}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"static"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"final"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"String"}]},{type:a,value:" STUDIO_BROADCAST_ID "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:G}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:"\"STUDIO_BROADCAST\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F Inside the onResume() method"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"registerReceiver"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:"\n                "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:$}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"IntentFilter"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F Inside the onPause() method"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"unregisterReceiver"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:aF,props:{id:"server"},children:[{type:b,tag:n,props:{href:"#server",ariaHidden:x,tabIndex:y},children:[{type:b,tag:c,props:{className:[z,A]},children:[]}]},{type:a,value:"Server"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:N}]},{type:a,value:" class:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,"language-kotlin"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"package"}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"studio\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"Intent\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"support"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"v4"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"LocalBroadcastManager\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"MainActivity\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:" fi"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"iki"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"elonen"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"NanoHTTPD\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"File\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:J}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"IOException\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"class"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:a,value:" mainActivity"},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:B}]},{type:a,value:" MainActivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:a,value:" port "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:B}]},{type:a,value:" Int"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:B}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"port"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:"\n\n    "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"override"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"fun"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"session"},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:B}]},{type:a,value:" IHTTPSession"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:B}]},{type:a,value:" Response "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:a,value:" intent "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:G}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"MainActivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n        LocalBroadcastManager"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"mainActivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"sendBroadcast"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"intent"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"return"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"newFixedLengthResponse"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,"string-literal","singleline"]},children:[{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:"\"OK\""}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"And finally, the code to start the StudioServer in the MainActivity:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,_]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aG}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:N}]},{type:a,value:" studioServer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F In the onCreate() method"}]},{type:a,value:"\nstudioServer "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:G}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:$}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,"number"]},children:[{type:a,value:"8000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F In the onResume() method"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"try"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:"\n    studioServer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"start"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"catch"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"IOException"}]},{type:a,value:" e"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:"\n    e"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"printStackTrace"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F In the onPause() method"}]},{type:a,value:"\nstudioServer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"stop"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Now every time the MainActivity is opened, a "},{type:b,tag:o,props:{},children:[{type:a,value:"WebServer is started on port 8000"}]},{type:a,value:h}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Let’s say the smartphone has 192.168.1.100 as IP, then any other device in the same network can access the server at the address: "},{type:b,tag:n,props:{href:aU,rel:[s,t,u],target:v},children:[{type:a,value:aU}]},{type:a,value:". Anytime a request is made, the app should start\u002Fstop a recording."}]},{type:a,value:f},{type:b,tag:X,props:{id:am},children:[{type:b,tag:n,props:{href:"#whats-next",ariaHidden:x,tabIndex:y},children:[{type:b,tag:c,props:{className:[z,A]},children:[]}]},{type:a,value:an}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This was a very basic proof of concept you can use as a starting point when building something similar. I also added many features to the app, such as file transfer and clip naming, that you can check out in the "},{type:b,tag:n,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002FOpenCameraStudio",rel:[s,t,u],target:v},children:[{type:a,value:"Github Repository"}]},{type:a,value:h}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In the next article, we will see how to create the Desktop control panel in Go."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:L,props:{alt:"Open Camera Studio Remote Desktop App",src:"\u002Fposts\u002FOCSDesktopGui.png"},children:[]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Stay tuned :)"}]}]},excerpt:{type:ao,children:[{type:b,tag:g,props:{},children:[{type:a,value:ap},{type:b,tag:n,props:{href:aq,rel:[s,t,u],target:v},children:[{type:a,value:ar}]},{type:a,value:as}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F2019-08-27-how-to-build-remote-camera-app-android",extension:".md",createdAt:aV,updatedAt:aV}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","\n","p","."," ","keyword","code","(",")","a","strong","function","class-name",";","nofollow","noopener","noreferrer","_blank","operator","true",-1,"icon","icon-link",":","div","nuxt-content-highlight","pre","line-numbers","=","{","}","import","em","img","takePicture","StudioServer","\n        ","\n\n","comment","tag","\"","serve",",",2,"li","h2","LocalBroadcastManager","BroadcastReceiver","language-java","new","getInstance","this","val","forking-open-camera",3,"Forking Open Camera","compile-the-sources","Compile the Sources","studying-the-source","Studying the Source","adding-remote-superpowers","Adding Remote Superpowers","whats-next","What’s next?","root","I love automating things, especially the boring ones. Having a ","https:\u002F\u002Fwww.youtube.com\u002Fc\u002FFedericoTerzi","Youtube channel",", I found that editing videos can be very time-consuming and so I started thinking about ways to improve my workflow."," and ","h3","\u003C","uses-permission","attr-name","namespace","android:","name","attr-value","attr-equals","\u002F\u003E","NanoHTTPD","h4","private","public","Intent","\n    ","string","studioCommandReceiver","STUDIO_BROADCAST_ID"," com","federicoterzi","opencamerastudio"," android","content"," java","io","http:\u002F\u002F192.168.1.100:8000\u002F","2022-09-21T19:26:19.099Z")));