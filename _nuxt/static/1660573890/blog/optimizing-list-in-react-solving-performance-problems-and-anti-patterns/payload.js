__NUXT_JSONP__("/blog/optimizing-list-in-react-solving-performance-problems-and-anti-patterns", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm){return {data:[{article:{slug:"2022-02-04-optimizing-list-in-react-solving-performance-problems-and-anti-patterns",description:bo,layout:"post",title:"Optimizing Lists in React - Solving Performance Problems and Anti-patterns",author:"Federico Terzi",date:"2022-02-04T00:00:00.000Z",categories:"react list performance optimizations patterns anti-patterns",social_title:"Optimizing Lists in React",social_subtitle:"Solving Performance Problems and Anti-patterns",toc:[{id:by,depth:aY,text:bz},{id:bA,depth:aY,text:bB},{id:bC,depth:aY,text:bD},{id:bE,depth:aY,text:bF}],body:{type:bG,children:[{type:b,tag:l,props:{},children:[{type:a,value:bo}]},{type:a,value:g},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"It’s easy to write inefficient code in React, with useless re-renders being the common enemy. Usually, you start from a simple application and gradually build features on top of it. At first, the application is small enough to make the inefficiencies unnoticeable, but as the complexity grows, so does the component hierarchy, and thus, the number of re-renders. Then, once the application speed becomes unbearable (according to your standards), you start profiling and optimizing the problematic areas."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this article, we are going to discuss the optimization process for lists, which are notorious sources of performance problems in React. Most of these techniques apply to both React and React Native applications."}]},{type:a,value:g},{type:b,tag:an,props:{id:"starting-from-a-problematic-example"},children:[{type:b,tag:N,props:{href:"#starting-from-a-problematic-example",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Starting from a problematic example"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We’ll start from a problematic example and gradually discuss the process of identifying and solving the different issues."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"Problematic List example",src:"\u002Fposts\u002Freact-list\u002Freact_list_example.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The proposed example is a simple list of selectable items, with a few performance problems. Clicking on an item toggles the selection status, but the operation is visibly laggy. Our goal is to make the selection feel snappy. You can find the complete code as follows (a "},{type:b,tag:N,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Fcommonreactlistmistakes-9f3ex",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"Codesandbox"}]},{type:a,value:" is also available)."}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q,aQ]},children:[{type:a,value:bH}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bI]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" useState "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,aQ]},children:[{type:a,value:bJ}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aH]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F Create mock data with elements containing increasing items"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:" data "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"new"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:"Array"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,aR]},children:[{type:a,value:"100"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:"fill"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"_"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"+"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aR]},children:[{type:a,value:bM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:bN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,aZ,a_]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:at}]},{type:a,value:" n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,aZ,a_]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:at}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"template-string"]},children:[{type:b,tag:c,props:{className:[d,bO,aH]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,aH]},children:[{type:a,value:"Item "}]},{type:b,tag:c,props:{className:[d,"interpolation"]},children:[{type:b,tag:c,props:{className:[d,bQ,e]},children:[{type:a,value:"${"}]},{type:a,value:bN},{type:b,tag:c,props:{className:[d,bQ,e]},children:[{type:a,value:m}]}]},{type:b,tag:c,props:{className:[d,bO,aH]},children:[{type:a,value:bP}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,q,aQ]},children:[{type:a,value:"export"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,aQ]},children:[{type:a,value:"default"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:bR}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F An array containing the selected items"}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:bS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F Select or unselect the given item"}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aJ,o]},children:[{type:a,value:L}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:aV}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:a$}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,ba,k]},children:[{type:a,value:bb}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:bc}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:be}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:bf},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bg}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:a,value:P}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:"className"}]},{type:b,tag:c,props:{className:[d,"attr-value"]},children:[{type:b,tag:c,props:{className:[d,e,"attr-equals"]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bT}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bT}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:"List Example"}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aK}]},{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:aL}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aK}]},{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aJ,o]},children:[{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:aL}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aK}]},{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aJ,o]},children:[{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:W}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" name"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:bU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:bW}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:bX}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:bY}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bs}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:a,value:aj}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bt}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aZ,a_]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:at}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aH]},children:[{type:a,value:ca}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:at}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,cb]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aK}]},{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F This is an example of an expensive JS operation that we might"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F execute in the render function to simulate a load."}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F In real-world applications, this operation could be either a custom"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F JS elaboration or just a complex render"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aJ,o]},children:[{type:a,value:bs}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F Here we use selected just because we want to simulate"}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F an operation that depends on the props"}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:cd}]},{type:a,value:" total "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:" selected "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bt}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aR]},children:[{type:a,value:bM}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:at}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aR]},children:[{type:a,value:ce}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:"for"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:cd}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aR]},children:[{type:a,value:ce}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aR]},children:[{type:a,value:"200000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"++"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n    total "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"+="}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"known-class-name",as]},children:[{type:a,value:"Math"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:"random"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:" total"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aI}]}]}]},{type:a,value:g},{type:b,tag:bh,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If you want to practice, feel free to pause reading and try to spot the problems yourself first"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Let’s dive into the analysis."}]},{type:a,value:g},{type:b,tag:an,props:{id:"missing-key-prop"},children:[{type:b,tag:N,props:{href:"#missing-key-prop",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Missing key prop"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The first thing we can notice from the console is that we are not passing the "},{type:b,tag:j,props:{},children:[{type:a,value:aG}]},{type:a,value:" prop when rendering the list items."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"Missing key prop warning",src:"\u002Fposts\u002Freact-list\u002Fmissing_key_prop.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"which is caused by this code:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you might already know, the "},{type:b,tag:j,props:{},children:[{type:a,value:aG}]},{type:a,value:" prop is critical for dynamic lists to work correctly in React, as it helps the framework identify which items have changed, are added, or are removed."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"A common beginners’ anti-pattern is to solve the problem by passing the item’s index:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:" index"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"index"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Despite working for simple use-cases, this approach leads to multiple unexpected behaviors when the list is dynamic, with items being added or removed. For example, if you delete an item in the middle of a list at index N, then all list items located at positions N+1 will now have a different key. That causes React to “confuse” which mapped component belongs to which items. If you want to know more about the potential pitfalls of using the index as key, "},{type:b,tag:N,props:{href:"https:\u002F\u002Frobinpokorny.medium.com\u002Findex-as-a-key-is-an-anti-pattern-e0349aece318",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"this article"}]},{type:a,value:" is a great resource."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Therefore, you should specify a key prop with something that uniquely identifies the item being rendered. If the data you’re receiving is coming from a backend, you might be able to use the database’s unique id as key. Otherwise, you could generate a client-side random id with "},{type:b,tag:N,props:{href:"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fnanoid",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"nanoid"}]},{type:a,value:" when creating the items."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Luckily, each of our own items has it’s own id property, so we should handle it as follows:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:W}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Adding the key solves the previous warning, but we still have a significant lag when selecting an item. It’s time to go serious and open the profiler."}]},{type:a,value:g},{type:b,tag:an,props:{id:"profiling-the-list"},children:[{type:b,tag:N,props:{href:"#profiling-the-list",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Profiling the list"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Now that we solved the "},{type:b,tag:j,props:{},children:[{type:a,value:aG}]},{type:a,value:" warning, we are ready to tackle the performance problem. At this stage, using a profiler can help to track down the slow areas and therefore guide our optimization, so that’s what we are going to do."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"When working with React, there are two main profilers you can use: the browser’s built-in profiler, such as the one available inside Chrome’s Dev Tools, and the profiler provided by the React DevTools extension. Both of them are useful in different scenarios. From my experience, the React DevTools’ profiler is a good starting point, as it gives you a component-aware performance representation, which is helpful to track down the specific components that are causing problems, whereas the browser’s profiler works at a lower level and it’s mostly helpful in those cases where the performance problems are not directly related to a component, for example, due to a slow method or Redux reducer."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"For this reason, we are going to start with the React DevTools’ profiler, so make sure to have the extension installed. Then, you can access the Profiler tool from Chrome’s dev tools \u003E Profiler. Before starting, we are going to set up two settings that will help us in the optimization process:"}]},{type:a,value:g},{type:b,tag:au,props:{},children:[{type:a,value:g},{type:b,tag:aj,props:{},children:[{type:a,value:"In Chrome’s Performance tab, set CPU throttling to x6. That will simulate a slower CPU, making slowdowns much more evident."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"CPU throttling",src:"\u002Fposts\u002Freact-list\u002Fprofiler_cpu_throttle.png"},children:[]}]},{type:a,value:g},{type:b,tag:au,props:{},children:[{type:a,value:g},{type:b,tag:aj,props:{},children:[{type:a,value:"In React DevTools Profiler tab, click on the Gear icon \u003E Profiler \u003E “Record why each component rendered while profiling”. This will help us track down the causes for useless re-renders."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"React profiler settings",src:"\u002Fposts\u002Freact-list\u002Freact_profile_settings.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Once the configuration is done, we are ready to profile our sample todo app. Go ahead and click on the Record button, then select some items in the list and, finally, hit stop recording. This is the result we obtain after selecting 3 items:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"React profiler results",src:"\u002Fposts\u002Freact-list\u002Freact_app_profiler_result.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"On the top right side, you see highlighted in red the commits, which, in short, are the renders that caused the DOM to update. As you can see, the current commit took 2671 milliseconds to render. By hovering on the various elements, we can tell that most of the time is spent rendering the list items, with an average of 26 milliseconds per item."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Spending 26 milliseconds rendering a single item is not inherently bad. As long as the entire operation takes less than 100ms, the action would still be perceived as snappy by the user. Our biggest problem is that selecting a single item causes all the items to be re-rendered, and that’s what we are going to tackle in the next section."}]},{type:a,value:g},{type:b,tag:bh,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"A question we should ask ourselves at this point is: what’s the expected number of items to re-render after an action? In this particular case, the answer is one, as the result of a click is a new item being selected, with none of the others being affected. Another scenario might be a single-selection list, where at most one item could be selected at any given time. In that case, clicking on an item should cause the re-render of two items, as we need to render both the selected one and the one being unselected."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:an,props:{id:"preventing-re-renders-with-reactmemo"},children:[{type:b,tag:N,props:{href:"#preventing-re-renders-with-reactmemo",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Preventing re-renders with React.memo"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In the previous section, we discussed how selecting a single item causes the entire list to be re-rendered.\nIdeally, we would like to re-render only the items whose \"looks\" are affected by the new selection.\nWe can do that using the "},{type:b,tag:N,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-api.html#reactmemo",rel:[ao,ap,aq],target:ar},children:[{type:a,value:av}]},{type:a,value:" higher-order component."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In a nutshell, "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" compares the new props with the old ones and, if they are equal, it reuses the previous render.\nOtherwise, if the props are different, it re-renders the component.\nIt's important to note that React executes a "},{type:b,tag:aN,props:{},children:[{type:a,value:cf}]},{type:a,value:" of the props, which must be taken\ninto account when passing objects and methods as props.\nYou can also override the comparison function, though I would advise against it, as it makes\nthe code less maintainable (more on this later)."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Now that we know the basics of "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:", let's create another component by wrapping the "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:" with it:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q,aQ]},children:[{type:a,value:bH}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bI]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" memo "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,aQ]},children:[{type:a,value:bJ}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aH]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:az}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We can now use "},{type:b,tag:j,props:{},children:[{type:a,value:az}]},{type:a,value:" instead of "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:" in the list:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:az}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Nice! We now have memoized the "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:". If you go ahead and try the application, you'll notice something is wrong...\nThe application is still slow!"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If we open up the profiler as we previously did and record a selection, we should be presented with something like the following:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"React profiler after memoizing",src:"\u002Fposts\u002Freact-list\u002Freact_app_memoized_profiler.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, "},{type:b,tag:aN,props:{},children:[{type:a,value:"we are still re-rendering all the items"}]},{type:a,value:"! Why is it happening?\nIf you hover on one of the list items, you'll see the \"Why did this render?\" section. In our case, it says "},{type:b,tag:j,props:{},children:[{type:a,value:"Props changed: (onClick)"}]},{type:a,value:",\nwhich means our items are re-rendering due to the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback we are passing to each item."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As we previously discussed, "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" does a "},{type:b,tag:al,props:{},children:[{type:a,value:cf}]},{type:a,value:" of the props by default.\nWhich basically means calling the strick equality operator "},{type:b,tag:j,props:{},children:[{type:a,value:aB}]},{type:a,value:" over each prop. In our case, the check would\nbe roughly equivalent to:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,aO]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"arePropsEqual"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:" prevProps"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aW}]},{type:a,value:cg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aW}]},{type:a,value:cg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:I}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"While "},{type:b,tag:j,props:{},children:[{type:a,value:K}]},{type:a,value:bv},{type:b,tag:j,props:{},children:[{type:a,value:G}]},{type:a,value:" are compared by "},{type:b,tag:al,props:{},children:[{type:a,value:"value"}]},{type:a,value:" (because they are primitive types, string and boolean respectively), "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" is compared\nby "},{type:b,tag:al,props:{},children:[{type:a,value:"reference"}]},{type:a,value:" (being a function).\nWhen we created the list items, we passed the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback as an anonymous closure:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Every time the list re-renders, "},{type:b,tag:aN,props:{},children:[{type:a,value:"each item receives a new callback function"}]},{type:a,value:".\nFrom an equality perspective, the callback "},{type:b,tag:al,props:{},children:[{type:a,value:"has changed"}]},{type:a,value:", and therefore the "},{type:b,tag:j,props:{},children:[{type:a,value:az}]},{type:a,value:" is re-rendered."}]},{type:a,value:g},{type:b,tag:bh,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If the equality aspect is still unclear to you, go ahead and open the JS console inside your browser.\nIf you type "},{type:b,tag:j,props:{},children:[{type:a,value:"true === true"}]},{type:a,value:", you'll notice that the result is "},{type:b,tag:j,props:{},children:[{type:a,value:$}]},{type:a,value:".\nBut if you type "},{type:b,tag:j,props:{},children:[{type:a,value:"(() =\u003E {}) === (() =\u003E {})"}]},{type:a,value:", you'll get "},{type:b,tag:j,props:{},children:[{type:a,value:ch}]},{type:a,value:" as result.\nThat's because two functions are equal only if they share the same identity, and\nevery time we create a new closure we generate a new identity."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Therefore, we need a way to keep the identity of the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback stable to prevent useless re-renders,\nand that's what we are going to discuss in the next sections."}]},{type:a,value:g},{type:b,tag:bj,props:{id:by},children:[{type:b,tag:N,props:{href:"#a-common-anti-pattern",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:bz}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Before discussing the proposed solution, let's analyze a common (anti-)pattern being used in these cases.\nGiven that the "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" method accepts a custom comparator, you might be tempted to provide one that\nartifically "},{type:b,tag:al,props:{},children:[{type:a,value:"excludes"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" from the check. Something like the following:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:az}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aW}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:G}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F The onClick prop is not compared"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this case, even with a changing "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback, the list items won't be re-rendered unless "},{type:b,tag:j,props:{},children:[{type:a,value:K}]},{type:a,value:" or "},{type:b,tag:j,props:{},children:[{type:a,value:G}]},{type:a,value:" are updated.\nIf you go ahead and try this approach, you'll notice the list feels snappy now, but something is wrong:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"React list custom comparator",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_custom_comparator.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, selecting multiple items doesn't work as expected now, with items being randomly selected and unselected.\nThis is happening because the "},{type:b,tag:aN,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" function is not pure"}]},{type:a,value:", as it depends on the previous value of the "},{type:b,tag:j,props:{},children:[{type:a,value:G}]},{type:a,value:" items.\nIf you exclude the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback check from the "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" comparator, then your components might receive an outdated (stale)\nversion of the callback, causing all those glitches."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this particular case, the way the "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" is implemented is not optimal and we can easily convert it to a pure function\n(in fact, we are going to do that in the next section). But my point here is: "},{type:b,tag:aN,props:{},children:[{type:a,value:"by excluding the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback from the "},{type:b,tag:j,props:{},children:[{type:a,value:bi}]},{type:a,value:"\ncomparator, you're exposing the application to subtle staleness bugs"}]},{type:a,value:s}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Some might argue that as long as the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback is kept "},{type:b,tag:al,props:{},children:[{type:a,value:"pure"}]},{type:a,value:", then this approach is perfectly acceptable.\nPersonally, I consider this an anti-pattern for two reasons:"}]},{type:a,value:g},{type:b,tag:au,props:{},children:[{type:a,value:g},{type:b,tag:aj,props:{},children:[{type:a,value:"In complex codebases is relatively easy to transform a pure function into a non-pure one by mistake."}]},{type:a,value:g},{type:b,tag:aj,props:{},children:[{type:a,value:"By writing a custom comparator,  you're creating an additional maintenance burden. What if the "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:" needs to accept another "},{type:b,tag:j,props:{},children:[{type:a,value:bw}]},{type:a,value:" parameter in the future?"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Then, you'll need to refactor to the comparator, as shown below. If you forget to add it (which is relatively easy in complex codebases with multiple contributors), then you are again exposing your component to staleness bugs."}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:az}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:bu},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aW}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:G}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aW}]},{type:a,value:aX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:bw}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:aB}]},{type:a,value:am},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If a custom comparator is not advisable, what should we do to solve this problem then?"}]},{type:a,value:g},{type:b,tag:an,props:{id:"making-callback-identities-stable"},children:[{type:b,tag:N,props:{href:"#making-callback-identities-stable",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Making callback identities stable"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Our goal is to use the \"base\" version of "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" without a custom comparator.\nChoosing this path will both improve the maintainability of the component and its robustness against future changes.\nFor the memoization to work correctly though, we'll need to "},{type:b,tag:aN,props:{},children:[{type:a,value:"refactor the callback to keep its identity stable"}]},{type:a,value:", otherwise\nthe equality check performed by "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" will prevent the memoization."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The traditional way to keep function identities stable in React is to use the "},{type:b,tag:j,props:{},children:[{type:a,value:Y}]},{type:a,value:" hook.\nThe hook accepts a function and a dependency array, and as long as the dependencies won't change, neither will the identity of the callback.\nLet's refactor our example to use "},{type:b,tag:j,props:{},children:[{type:a,value:Y}]},{type:a,value:at}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Our first attempt is to move the anonymous closure "},{type:b,tag:j,props:{},children:[{type:a,value:"() =\u003E toggleItem(item)"}]},{type:a,value:" inside a separate method inside "},{type:b,tag:j,props:{},children:[{type:a,value:Y}]},{type:a,value:at}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aJ,o]},children:[{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:aL}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:bk},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F How do we get the item?"}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:az}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aK}]},{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We are now facing a problem: previously, the anonymous closure captured the current "},{type:b,tag:j,props:{},children:[{type:a,value:r}]},{type:a,value:" in the "},{type:b,tag:j,props:{},children:[{type:a,value:".map"}]},{type:a,value:" iteration and then passed it to the "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:"\nfunction as an argument. But now, we are not declaring the "},{type:b,tag:j,props:{},children:[{type:a,value:aP}]},{type:a,value:" handler inside the iteration, so how can we access the \"selected item\" in the callback?\nLet's discuss a possible solution:"}]},{type:a,value:g},{type:b,tag:bj,props:{id:bA},children:[{type:b,tag:N,props:{href:"#refactoring-the-listitem-component",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:bB}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Currently, the "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:bl},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" callback doesn't provide any information about the item being selected.\nIf it did, we would be able to easily solve this problem, so let's refactor the "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:bv},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:" components to provide this information."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Firstly, we change the "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:" component to accept the full "},{type:b,tag:j,props:{},children:[{type:a,value:r}]},{type:a,value:" object, and given that the "},{type:b,tag:j,props:{},children:[{type:a,value:K}]},{type:a,value:" prop is now redundant we remove it.\nThen, we introduce an handler for the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" event to also provide the "},{type:b,tag:j,props:{},children:[{type:a,value:r}]},{type:a,value:" as argument. This is our end result:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aJ,o]},children:[{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:W}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:bU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:bW}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:bX}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:bY}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bs}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:a,value:aj}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bt}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aZ,a_]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:at}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aH]},children:[{type:a,value:ca}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:at}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,cb]},children:[{type:a,value:cc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aK}]},{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" now provides the current item as a parameter."}]},{type:a,value:g},{type:b,tag:bh,props:{},children:[{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"But wait! You used an anonymous closure again in the "},{type:b,tag:j,props:{},children:[{type:a,value:aj}]},{type:a,value:bl},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" handler, shouldn't we avoid them to prevent re-renderings?\nWhile we "},{type:b,tag:al,props:{},children:[{type:a,value:"could"}]},{type:a,value:" create another memoized callback with "},{type:b,tag:j,props:{},children:[{type:a,value:Y}]},{type:a,value:" inside the "},{type:b,tag:j,props:{},children:[{type:a,value:W}]},{type:a,value:" component to handle the click event, that would offer no performance improvements in this case.\nThe problem with the anonymous closure we discussed earlier in the "},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:" item was that it broke the "},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" memoization for the "},{type:b,tag:j,props:{},children:[{type:a,value:az}]},{type:a,value:". Given that we are "},{type:b,tag:al,props:{},children:[{type:a,value:ci}]},{type:a,value:" memoizing the "},{type:b,tag:j,props:{},children:[{type:a,value:aj}]},{type:a,value:" element, then there is no performance benefit from having a stable identity for this callback."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We can then refactor the "},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:" component to pass the "},{type:b,tag:j,props:{},children:[{type:a,value:r}]},{type:a,value:" prop instead of "},{type:b,tag:j,props:{},children:[{type:a,value:K}]},{type:a,value:" and to make use of the newly available "},{type:b,tag:j,props:{},children:[{type:a,value:r}]},{type:a,value:" information in the "},{type:b,tag:j,props:{},children:[{type:a,value:aP}]},{type:a,value:" callback:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,ag]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,aJ,o]},children:[{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:aL}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:bk},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F We now receive the selected item"}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:az}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,u]},children:[{type:a,value:aU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F We pass the full item instead of the name"}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,A]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,C,D]},children:[{type:b,tag:c,props:{className:[d,E,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aF}]}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,_]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,x]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aK}]},{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Z}]}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Nice! Let's go ahead and try the refactored version:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"React list example, after changes",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_2.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"It works... but it's still slow! If we open up the profiler, we can see the whole list is still being rendered:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"Profiler results after changes",src:"\u002Fposts\u002Freact-list\u002Freact_list_perf.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see from the profiler, the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" identity is still changing! That means our "},{type:b,tag:j,props:{},children:[{type:a,value:aP}]},{type:a,value:" identity is being changed at every re-render."}]},{type:a,value:g},{type:b,tag:bj,props:{id:bC},children:[{type:b,tag:N,props:{href:"#another-common-anti-pattern",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:bD}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Before diving into the proper solution, let's discuss a common anti-pattern used in these cases.\nGiven that the "},{type:b,tag:j,props:{},children:[{type:a,value:Y}]},{type:a,value:" accepts a dependency array, you could be tempted to specify an empty one to keep the identity fixed:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,aO]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aA},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:bk},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Despite keeping the identity stable, "},{type:b,tag:aN,props:{},children:[{type:a,value:"this approach suffers from the same staleness bugs we discussed in previous sections"}]},{type:a,value:".\nIf we run it, you'll notice the items get unselected as it happened when we specified the custom comparator:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:b,tag:af,props:{alt:"React list example with bugs",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_3.gif"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In general, you should always specify the correct dependencies in "},{type:b,tag:j,props:{},children:[{type:a,value:Y}]},{type:a,value:", "},{type:b,tag:j,props:{},children:[{type:a,value:"useEffect"}]},{type:a,value:bv},{type:b,tag:j,props:{},children:[{type:a,value:cj}]},{type:a,value:", otherwise, you're\nexposing the application to potentially hard-to-debug staleness bugs."}]},{type:a,value:g},{type:b,tag:an,props:{id:"solving-the-toggleitem-identity-problem"},children:[{type:b,tag:N,props:{href:"#solving-the-toggleitem-identity-problem",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Solving the toggleItem identity problem"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As we previously discussed, the problem with our "},{type:b,tag:j,props:{},children:[{type:a,value:aP}]},{type:a,value:" callback is that its "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" dependency identity changes at each render, causing it to re-render as well:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,aO]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aA},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:bk},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:L},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Our first attempt is to wrap "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" with "},{type:b,tag:j,props:{},children:[{type:a,value:Y}]},{type:a,value:" as we did with "},{type:b,tag:j,props:{},children:[{type:a,value:aP}]},{type:a,value:at}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,aO]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aA},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:aV}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:a$}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,ba,k]},children:[{type:a,value:bb}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:bc}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:be}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:bf},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bg}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"This does "},{type:b,tag:al,props:{},children:[{type:a,value:ci}]},{type:a,value:" solve the problem though, as this callback depends on the external state variable "},{type:b,tag:j,props:{},children:[{type:a,value:G}]},{type:a,value:", which changes every time "},{type:b,tag:j,props:{},children:[{type:a,value:aD}]},{type:a,value:" is called. If we want its identity to remain stable, we need a way to make "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" pure. Luckily, we can use "},{type:b,tag:N,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#functional-updates",rel:[ao,ap,aq],target:ar},children:[{type:b,tag:j,props:{},children:[{type:a,value:aS}]},{type:a,value:"'s functional updates"}]},{type:a,value:" to accomplish our goal:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,aO]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aA},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:aV}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:a$}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,ba,k]},children:[{type:a,value:bb}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:bc}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:be}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:bf},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bg}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, we wrapped our previous logic inside the "},{type:b,tag:j,props:{},children:[{type:a,value:aD}]},{type:a,value:" call, which in turn provides the previous state value we need to compute the new selected items."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"If we go ahead and run the refactored example, it works and it's also snappy! We can also run the usual profiler to get a sense of what's happening:"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Hovering on the item being rendered:\n"},{type:b,tag:af,props:{alt:"Fixed react example",src:"\u002Fposts\u002Freact-list\u002Freact_list_memo_good_2.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Hovering on the other items:\n"},{type:b,tag:af,props:{alt:"Fixed react example 2",src:"\u002Fposts\u002Freact-list\u002Freact_list_memo_good_1.png"},children:[]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"As you can see, after selecting an item we only render the current one being selected now, while the others are being memoized."}]},{type:a,value:g},{type:b,tag:bj,props:{id:bE},children:[{type:b,tag:N,props:{href:"#a-note-on-functional-state-updates",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:bF}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In the example we just discussed, converting our "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" method to the functional mode of "},{type:b,tag:j,props:{},children:[{type:a,value:aS}]},{type:a,value:" was relatively trivial.\nIn real-world scenarios, things might not be as straightforward."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"For example, your function might depend on multiple state pieces:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,aO]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aA},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:bS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:bm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:" setEnabled"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,"boolean"]},children:[{type:a,value:ch}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F Only toggle the items if enabled"}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:aV}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:bm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:aV}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:a$}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,ba,k]},children:[{type:a,value:bb}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:bc}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,q,O]},children:[{type:a,value:ai}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,J,o,u]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:be}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:bf},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bg}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:bm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Every time the "},{type:b,tag:j,props:{},children:[{type:a,value:bm}]},{type:a,value:" value changes, your "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" identity will change as well.\nIn these scenarios, you should either merge both sub-states into the same "},{type:b,tag:j,props:{},children:[{type:a,value:aS}]},{type:a,value:" call, or even better, convert it to a "},{type:b,tag:N,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#additional-hooks",rel:[ao,ap,aq],target:ar},children:[{type:b,tag:j,props:{},children:[{type:a,value:cl}]}]},{type:a,value:" one.\nGiven that "},{type:b,tag:j,props:{},children:[{type:a,value:cl}]},{type:a,value:bl},{type:b,tag:j,props:{},children:[{type:a,value:bn}]},{type:a,value:" function has a stable identity, you can scale this approach to complex states.\nMoreover, the same applies to "},{type:b,tag:N,props:{href:"https:\u002F\u002Fredux.js.org\u002F",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"Redux"}]},{type:a,value:bl},{type:b,tag:j,props:{},children:[{type:a,value:bn}]},{type:a,value:" function, so you can move the item toggle logic at the Redux level and convert our "},{type:b,tag:j,props:{},children:[{type:a,value:L}]},{type:a,value:" function to something as:"}]},{type:a,value:g},{type:b,tag:P,props:{className:[R]},children:[{type:b,tag:S,props:{className:[T,aO]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aA},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:" dispatch "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"useDispatch"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,Q]},children:[{type:a,value:"\u002F\u002F Given that the dispatch identity is stable, the `toggleItem` will be stable as well"}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:M}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,y,k]},children:[{type:a,value:z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"toggleItemAction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:B}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:an,props:{id:"virtualizing-the-list"},children:[{type:b,tag:N,props:{href:"#virtualizing-the-list",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Virtualizing the list?"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"Before closing the article, I wanted to briefly cover "},{type:b,tag:al,props:{},children:[{type:a,value:"list virtualization"}]},{type:a,value:", a common technique used to improve performance for long lists.\nIn a nutshell, list virtualization is based on the idea of rendering just a sub-set of the items in a given list (generally the currently visible ones) and deferring the others.\nFor example, if you have a list with a thousand items but only 10 are visible at any given time, then we might only render these 10 first, and the others can be rendered "},{type:b,tag:al,props:{},children:[{type:a,value:"on-demand"}]},{type:a,value:" when needed (i.e. after scrolling)."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"List virtualization offers two main advantages compared to rendering the entire list:"}]},{type:a,value:g},{type:b,tag:au,props:{},children:[{type:a,value:g},{type:b,tag:aj,props:{},children:[{type:a,value:"Faster initial start time, as we only need to render a subset of the list"}]},{type:a,value:g},{type:b,tag:aj,props:{},children:[{type:a,value:"Lower memory usage, as only a subset of the items is being rendered at any given time"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"That said, list virtualization is not a silver bullet you should always use, as it increases complexity and can be glitchy.\nPersonally, I'd avoid virtualized lists if you are only dealing with hundreds of items, as the memoization techniques we discussed in this article are often effective enough  (older mobile devices might require a lower threshold). As always, the right approach depends on the specific use case, so I'd highly recommend profiling your list before diving into more complex optimization techniques."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"We are going to cover virtualization in a future article. In the meanwhile, you can read more about virtualized lists in React, with libraries like "},{type:b,tag:N,props:{href:"https:\u002F\u002Fgithub.com\u002Fbvaughn\u002Freact-window",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"react-window"}]},{type:a,value:", and in React Native, with the built-in "},{type:b,tag:N,props:{href:"https:\u002F\u002Freactnative.dev\u002Fdocs\u002Fflatlist",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"FlatList"}]},{type:a,value:" component."}]},{type:a,value:g},{type:b,tag:an,props:{id:"conclusion"},children:[{type:b,tag:N,props:{href:"#conclusion",ariaHidden:$,tabIndex:ac},children:[{type:b,tag:c,props:{className:[ad,ae]},children:[]}]},{type:a,value:"Conclusion"}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In this article, we covered list optimization in depth. We started from a problematic example and gradually solved most of the performance problems.\nWe also discussed the main anti-patterns you should be aware of, along with potential ways to solve them."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"In conclusion, lists are often the cause of performance problems in React, as all items are being re-rendered every time something changes by default.\n"},{type:b,tag:j,props:{},children:[{type:a,value:av}]},{type:a,value:" is an effective tool to mitigate the issue, but you might need to refactor your application to make your props' identities stable."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"The final code is available in "},{type:b,tag:N,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Fcommonreactlistmistakes-solved-7sn20?file=\u002Fsrc\u002FApp.js",rel:[ao,ap,aq],target:ar},children:[{type:a,value:"this CodeSandbox"}]},{type:a,value:" if you're interested."}]},{type:a,value:g},{type:b,tag:l,props:{},children:[{type:a,value:"PS: there's one small "},{type:b,tag:j,props:{},children:[{type:a,value:cj}]},{type:a,value:" optimization left to add in our example, can you spot it yourself? :)"}]}]},excerpt:{type:bG,children:[{type:b,tag:l,props:{},children:[{type:a,value:bo}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F2022-02-04-optimizing-list-in-react-solving-performance-problems-and-anti-patterns",extension:".md",createdAt:cm,updatedAt:cm}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation"," ","\n","(",")","code","operator","p","}","{","function","=","keyword","item",".","\n  ","property-access",";","\n    ","tag","arrow","=\u003E","attr-name",",","script","language-javascript","script-punctuation","parameter","selected","\n      ","onClick","method","name","toggleItem","const","a","control-flow","div","comment","nuxt-content-highlight","pre","line-numbers","[","]","ListItem","\u003C","useCallback","\u003E","plain-text","true","\n        ","\n          ",-1,"icon","icon-link","img","language-jsx","maybe-class-name","return","li","includes","em"," nextProps","h1","nofollow","noopener","noreferrer","_blank","class-name",":","ul","React.memo","map"," item","data","MemoizedListItem","  ","===","\n\n  ","setSelected","selectedItems","\u002F\u003E","key","string","\n\n","function-variable","\u003C\u002F","List"," toggleItem ","strong","language-js","handleClick","module","number","useState","prevSelected","id","if","&&","\n    prevProps",2,"literal-property","property","!","spread","...","else","filter","current"," current ","!==","blockquote","memo","h2"," handleClick ","'s ","isEnabled","dispatch","React is the most popular front-end framework, and that’s for a reason. Besides being funded by one of the largest companies on the planet, it’s also built around a few key concepts (one-way data flow, immutable data, functional components, hooks) that make it easier than ever to create robust applications. That said, it’s not without pitfalls."," i "," data"," selectedItems","expensiveOperation","?","prevProps"," and ","color","??","a-common-anti-pattern","A common anti-pattern","refactoring-the-listitem-component","Refactoring the ListItem component","another-common-anti-pattern","Another common anti-pattern","a-note-on-functional-state-updates","A note on functional state updates","root","import","imports","from","\"react\""," i","1","n","template-punctuation","`","interpolation-punctuation","App"," setSelected","\""," selected"," onClick ","\u002F\u002F Run an expensive operation to simulate a load","\u002F\u002F In real-world JS applications, this could be either a custom","\u002F\u002F JS elaboration or a complex render.","style","selected ","textDecoration","\"line-through\"","nil","undefined","let","0","shallow comparison","\n         prevProps","false","not","useMemo"," prevSelected","useReducer","2022-08-15T14:30:28.841Z")));