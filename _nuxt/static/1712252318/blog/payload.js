__NUXT_JSONP__("/blog", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ,f_,f$,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs,gt,gu,gv,gw,gx,gy,gz,gA,gB,gC,gD,gE,gF,gG,gH,gI,gJ,gK,gL,gM,gN,gO,gP,gQ,gR,gS,gT,gU,gV,gW,gX,gY,gZ,g_,g$,ha,hb,hc,hd,he,hf,hg,hh,hi,hj,hk,hl,hm,hn,ho,hp,hq,hr,hs,ht,hu,hv,hw,hx,hy,hz,hA,hB,hC,hD,hE,hF,hG,hH,hI,hJ,hK,hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU,hV,hW,hX,hY,hZ,h_,h$,ia,ib,ic,id,ie,if0,ig,ih,ii,ij,ik,il,im,in0,io,ip,iq,ir,is,it,iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH,iI,iJ,iK,iL,iM,iN,iO,iP,iQ,iR,iS,iT,iU,iV,iW,iX,iY,iZ,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx,jy,jz,jA,jB,jC,jD,jE,jF,jG,jH,jI,jJ,jK,jL,jM,jN,jO,jP,jQ,jR,jS,jT,jU,jV,jW,jX,jY,jZ,j_,j$,ka,kb,kc,kd,ke,kf,kg,kh,ki,kj,kk,kl,km,kn,ko,kp,kq,kr,ks,kt,ku,kv,kw,kx,ky,kz,kA,kB,kC,kD,kE,kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,kY,kZ,k_,k$,la,lb,lc,ld,le,lf,lg,lh,li,lj,lk,ll,lm,ln,lo,lp,lq,lr,ls,lt,lu,lv,lw,lx,ly,lz,lA,lB,lC,lD,lE,lF,lG,lH,lI,lJ,lK,lL,lM,lN,lO,lP,lQ,lR,lS,lT,lU,lV,lW,lX,lY,lZ,l_,l$,ma,mb,mc,md,me,mf,mg,mh,mi,mj,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,mA,mB,mC,mD,mE,mF,mG,mH,mI,mJ,mK,mL,mM,mN,mO,mP,mQ,mR,mS,mT,mU,mV,mW,mX,mY,mZ,m_,m$,na,nb,nc,nd,ne,nf,ng,nh,ni,nj,nk,nl,nm,nn,no,np,nq,nr,ns,nt,nu,nv,nw,nx,ny,nz,nA,nB,nC,nD,nE,nF,nG,nH,nI,nJ,nK,nL,nM,nN,nO,nP,nQ,nR,nS,nT,nU,nV,nW,nX,nY,nZ,n_,n$,oa,ob,oc,od,oe,of,og,oh,oi,oj,ok,ol,om,on,oo,op,oq,or,os,ot,ou,ov,ow,ox,oy,oz,oA,oB,oC,oD,oE,oF,oG,oH,oI,oJ,oK,oL,oM,oN,oO,oP,oQ,oR,oS,oT,oU,oV,oW,oX,oY,oZ,o_,o$,pa,pb,pc,pd,pe,pf,pg,ph,pi,pj,pk,pl,pm,pn,po,pp,pq,pr,ps,pt,pu,pv,pw,px,py,pz,pA,pB,pC,pD,pE,pF,pG,pH,pI,pJ,pK,pL,pM,pN,pO,pP,pQ,pR,pS,pT,pU,pV,pW,pX,pY,pZ,p_,p$,qa,qb,qc,qd,qe,qf,qg,qh,qi,qj,qk,ql,qm,qn,qo,qp,qq,qr,qs,qt,qu,qv,qw,qx,qy,qz,qA,qB,qC,qD,qE,qF,qG,qH,qI,qJ,qK,qL,qM,qN,qO,qP,qQ,qR,qS,qT,qU,qV,qW,qX,qY,qZ,q_,q$,ra,rb,rc,rd,re,rf,rg,rh,ri,rj,rk,rl,rm,rn,ro,rp,rq,rr,rs,rt,ru,rv,rw,rx,ry,rz,rA,rB,rC,rD,rE,rF,rG,rH,rI,rJ,rK,rL,rM,rN,rO,rP,rQ,rR,rS,rT,rU,rV,rW,rX,rY,rZ,r_,r$,sa,sb,sc,sd,se,sf,sg,sh,si,sj,sk,sl,sm,sn,so,sp,sq,sr,ss,st,su,sv,sw,sx,sy,sz,sA,sB,sC,sD,sE){return {data:[{articles:[{slug:"2024-02-25-understanding-crdts-improving-our-set-chapter-2",description:"In the previous article, we implemented a basic Set with support for additions and removals, as well as basic CRDT semantics. Despite working in simple cases, we also highlighted two significant limitations:",layout:aU,title:"Understanding CRDTs: Improving our Set (Chapter 2)",author:aV,date:"2024-02-25T00:00:00.000Z",categories:in0,social_title:io,social_subtitle:"Improving our Set (Chapter 2)",header:ip,adaptive_images:e_,toc:[{id:iq,depth:ad,text:ir},{id:is,depth:ad,text:it},{id:iu,depth:ad,text:iv},{id:iw,depth:ad,text:ix},{id:iy,depth:ad,text:iz},{id:iA,depth:ad,text:iB}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:eg},{type:b,tag:gn,props:{to:iC},children:[{type:a,value:iD}]},{type:a,value:iE}]},{type:a,value:f},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"An element cannot be re-added to the Set after being removed"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Although a removal would "},{type:b,tag:Y,props:{},children:[{type:a,value:iF}]},{type:a,value:" remove an element from the Set, the underlying data structure’s size keeps increasing over time. If we perform many deletions, this could bloat the size of the structure significantly."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we’ll try to tackle the first problem, discussing different approaches and tradeoffs."}]},{type:a,value:f},{type:b,tag:av,props:{id:"supporting-additions-after-removals"},children:[{type:b,tag:t,props:{href:"#supporting-additions-after-removals",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Supporting additions after removals"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As we mentioned, our current Set implementation does not allow an element to be restored after being deleted:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:ei},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ej},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ej},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Add 'a' back"}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F false! Ouch, it should be true"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For some use cases, this is a significant limitation: imaging building a grocery list application. You might add some elements to your “to buy” set, and later remove them after the purchase. This would work for a while, but then you might find yourself needing to buy the same product again. In this case, you would need to add elements to the set again after deleting them."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The reason why we are unable to add an element back after its removal is that our current implementation always prioritizes the "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" set. Let’s take the following scenario as an example:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, our Set will logically contain only element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:", as element "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:" is present in the "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" set and thus ignored."}]},{type:a,value:f},{type:b,tag:af,props:{id:iq},children:[{type:b,tag:t,props:{href:"#attempt-0-removing-elements",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:ir}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If having "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:go},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" Set prevents us from restoring it, can’t we simply remove "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:" from "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" after re-adding it? For example:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Then user calls set.add(\"b\")"}]},{type:a,value:"\n\nelements "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Unfortunately, as we’ve seen in the previous chapter, removing elements from our sets becomes problematic once replicas and synchronization enter the picture. In those cases, deleting "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:iG},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" set could cause it to randomly disappear again during synchronization, so we need a better solution."}]},{type:a,value:f},{type:b,tag:af,props:{id:is},children:[{type:b,tag:t,props:{href:"#attempt-1-adding-timestamps",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:it}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s take a step back and focus on our expected outcome: our goal is to be able to add an element to the Set "},{type:b,tag:Y,props:{},children:[{type:a,value:el}]},{type:a,value:" removing it. If we had a way to determine whether our element was added before or after its removal, we could decide whether to ignore it or not. For example, if element "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:iH},{type:b,tag:Y,props:{},children:[{type:a,value:el}]},{type:a,value:iI},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:", then element "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:" should be included, but if element "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:iH},{type:b,tag:Y,props:{},children:[{type:a,value:"before"}]},{type:a,value:iI},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:", then it should be ignored. In other words, we need some kind of "},{type:b,tag:Y,props:{},children:[{type:a,value:iJ}]},{type:a,value:" between our Set operations."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"An initial approach to achieve ordering is to attach a timestamp to our additions and removals. We are going to do this by converting our "},{type:b,tag:j,props:{},children:[{type:a,value:bB}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" Sets into "},{type:b,tag:Y,props:{},children:[{type:a,value:"Maps:"}]}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Before"}]},{type:a,value:iK},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F After"}]},{type:a,value:iK},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, the keys of our map represent the elements, while the values represent the time in which the elements were added or removed."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note: in the previous example, timestamps are represented as string dates to make them easier to read and understand by humans. This implementation would be quite inefficient in practice, so we are going to use Unix timestamps in the actual code."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The time information will be provided by the "},{type:b,tag:j,props:{},children:[{type:a,value:aW}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:cd}]},{type:a,value:" methods:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:iL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:iM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:iL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:iM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With the time information, we can finally refine our Set logic to support additions after removals:"}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"An element is present in our Set if:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"It’s present in the "},{type:b,tag:j,props:{},children:[{type:a,value:bB}]},{type:a,value:" and not in the "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"OR if the timestamp in the "},{type:b,tag:j,props:{},children:[{type:a,value:bB}]},{type:a,value:" is greater or equal than the timestamp in the "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Thanks to the second condition, we are now able to add an element back after its removal. This works because whenever we "},{type:b,tag:j,props:{},children:[{type:a,value:aW}]},{type:a,value:" an element, we also update its timestamp, and if this timestamp is greater than the current "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" timestamp, we consider the element to be present."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A possible implementation for the "},{type:b,tag:j,props:{},children:[{type:a,value:aE}]},{type:a,value:" method could be:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" additionTime "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:e$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"additionTime "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,dJ]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Element was never added"}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:iN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:e$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"removalTime"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Was the element removed before or after its addition?"}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:iN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\u003C="}]},{type:a,value:gq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F The element was never removed"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Finally, to make our Set a proper CRDT, we’ll need to update the "},{type:b,tag:j,props:{},children:[{type:a,value:bo}]},{type:a,value:" method as well:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:em}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:gq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gr}]},{type:a,value:gs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" existingAdditionTime "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:e$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Update the local addition time only if the remote addition time is greater"}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:iO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,dJ]},children:[{type:a,value:bZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:iP}]},{type:a,value:iO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:" additionTime\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:gq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:iQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gr}]},{type:a,value:gs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" existingRemovalTime "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:e$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Update the local removal time only if the remote removal time is greater"}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:iR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,dJ]},children:[{type:a,value:bZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:iP}]},{type:a,value:iR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:" removalTime\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:iQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We are now ready to test our Set again (the full code is available "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fcrdt-experiments\u002Fblob\u002Fmain\u002Fcrdt-article-examples\u002Fpart-2\u002Fset-with-timestamps.js",rel:[K,L,M],target:N},children:[{type:b,tag:X,props:{},children:[{type:a,value:fa}]}]},{type:a,value:gt}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n  replicaA"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Wait for some time between operation."}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F This way, the new Date.getTime() call can't return the same value"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:dj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:en}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:ei},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:iS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:iS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:dj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:en}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:iT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:dj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:en}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:iT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F true! Yay, 'a' is back!"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Yay, our Set can now handle additions after removals! Is this ready for production? Well, not exactly. Our current implementation suffers from a subtle, but very problematic edge case, which we’ll discuss in the next section."}]},{type:a,value:f},{type:b,tag:af,props:{id:iu},children:[{type:b,tag:t,props:{href:"#physical-time-and-distributed-systems",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:iv}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the implementation we just discussed, timestamps play an important role: they allow us to tell which operation comes first. In other words, we are relying on timestamps to determine the "},{type:b,tag:Y,props:{},children:[{type:a,value:"ordering of operations"}]},{type:a,value:", which in turn determines which elements are present in the set and which are not. Unfortunately, this approach can break down in subtle ways when dealing with distributed systems."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Most of our devices, including laptops and mobile phones, rely on a hardware device to keep track of time: the clock. These clocks are usually based on quartz oscillators and are not very precise, so every device has its own notion of time. For example, this is a picture of my car’s clock:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eo,src:"\u002Fposts\u002F2024-02-25-understanding-crdts-improving-our-set\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Every few weeks, I might need to adjust the time, as it might have drifted by one or two minutes. Some of you might be wondering: why isn’t this time drift happening on our phones and laptops? Well… it is! The reason we don’t notice is a protocol known as "},{type:b,tag:t,props:{href:iU,rel:[K,L,M],target:N},children:[{type:a,value:"NTP "}]},{type:a,value:l},{type:b,tag:Y,props:{},children:[{type:a,value:"Network Time Protocol)"}]},{type:a,value:", which allows internet-connected devices to periodically sync their time with NTP servers, down to a \u003C100ms precision. Unfortunately, my car is quite old and doesn’t have any kind of internet connectivity, so NTP is not an option there. Until I keep my car, I’ll need to keep the time up to date manually (though as you can see from the year, I’m not particularly good at it :D )."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As long as the NTP protocol works, our devices will have a reasonably precise clock, so why shouldn’t we rely on timestamps for the operation ordering?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In software systems, data integrity is usually one of the top concerns. For example, let’s take two hypothetical bugs:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"A bug causing application instances to crash"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"A bug silently corrupting data in our database"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Which one sounds scarier?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As a result, when designing a data structure like our CRDT Set, we should always think about the worst-case scenarios: what happens if the time in our local machine goes off? Let’s see an example, starting from this Set state:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s say for some reason, our local time is completely off and we decide to remove element "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:". As we discussed before, this causes a new entry to be added to the "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:iV}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:iW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F \u003C- year is set to 2099"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From the user perspective, this works correctly: the element "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:" is removed (because 2099 \u003E 2024)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After a while, the CRDT Set is replicated to another replica, which might decide to add element "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:" again. As a result, we update the timestamp of entry "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:"  in the "},{type:b,tag:j,props:{},children:[{type:a,value:bB}]},{type:a,value:iV}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F \u003C- updated, but still less than 2099!"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:iW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But this time, the "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:" element does not come back… In fact, it will not come back for the next 75 years! By relying on physical timestamps to determine the order of operations, we might cause silent data loss or corruption in the case of out-of-time clocks. We can do better than that."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Aside: How likely is this out-of-time scenario to happen?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite being a rare occurrence, these are some scenarios in which a device’s time could experience some edge-case behaviors:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Firewalls could be misconfigured and temporarily block NTP synchronization, making the local clock slowly drift over time."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"When the drift between the local clock and the NTP server clock is too large, the NTP protocol might decide to reset the local clock. From the perspective of local applications, the clock would have jumped forward or backward in time."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Users could even misconfigure their local time on purpose, for example, trying to elude “trial periods” of certain proprietary software."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you want to know more about this topic, I highly recommend reading the “Unreliable Clocks” chapter from "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.oreilly.com\u002Flibrary\u002Fview\u002Fdesigning-data-intensive-applications\u002F9781491903063\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Designing Data-Intensive Applications"}]},{type:a,value:" by Martin Kleppmann, one of the best software engineering books ever written."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So if physical timestamps are not a good option for this use case, what should we use? A better mechanism to determine the order of operations in distributed systems is "},{type:b,tag:t,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FVersion_vector",rel:[K,L,M],target:N},children:[{type:b,tag:Y,props:{},children:[{type:a,value:"Version Vectors"}]}]},{type:b,tag:Y,props:{},children:[{type:a,value:x}]},{type:a,value:" which we are going to cover in the next section."}]},{type:a,value:f},{type:b,tag:af,props:{id:iw},children:[{type:b,tag:t,props:{href:"#attempt-2-version-vectors",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:ix}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Version Vectors are a mechanism for tracking changes to data in a distributed system. Most importantly, they can do so without relying on physical time."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To introduce Version Vectors, let’s imagine a distributed scenario in which two replicas exist. We’ll call them Alice and Bob:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eo,src:"\u002Fposts\u002F2024-02-25-understanding-crdts-improving-our-set\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When using Version Vectors, each replica has to have a "},{type:b,tag:X,props:{},children:[{type:a,value:iX}]},{type:a,value:" ID, which we’ll call "},{type:b,tag:Y,props:{},children:[{type:a,value:"replica ID"}]},{type:a,value:". For simplicity, Alice will have "},{type:b,tag:j,props:{},children:[{type:a,value:"ID = alice"}]},{type:a,value:" and Bob will have "},{type:b,tag:j,props:{},children:[{type:a,value:"ID = bob"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Version Vectors can be thought of as "},{type:b,tag:Y,props:{},children:[{type:a,value:"maps"}]},{type:a,value:", in which the keys are the replica IDs and the values are the number of changes to the data by the given replica. For example, when Alice adds a new element, the corresponding Version Vector will be:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"which can be read as “Alice has made one edit to the data so far”. If Alice performs another update, the Version Vector will become:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And if this value is then modified by Bob, the Version Vector will become:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"which can be read as “Alice has made 2 edits to the data, while Bob made one edit”."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When executing an operation (either "},{type:b,tag:j,props:{},children:[{type:a,value:aW}]},{type:a,value:cZ},{type:b,tag:j,props:{},children:[{type:a,value:cd}]},{type:a,value:" ), our CRDT Set will attach a Version Vector to the value, in the same way as we did with the timestamps:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"All good so far, but we still haven’t discussed how Version Vectors can help us. To answer that question, let’s take a step back: our goal is to determine whether a removal occurred "},{type:b,tag:Y,props:{},children:[{type:a,value:"before or after"}]},{type:a,value:" the corresponding addition, as that will determine whether the element is present in the set or not. In other words, we need a way to determine an "},{type:b,tag:Y,props:{},children:[{type:a,value:iJ}]},{type:a,value:" between the additions and removals of the same element. Version Vectors serve exactly that purpose, let’s see how:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Every time a replica executes an operation on a given element, it increments the corresponding counter in the Version Vector:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F After an operation by Alice"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Because we know that replica IDs are unique (more on this below), we can derive a partial ordering by comparing two version vectors. For example, given these two Version Vectors:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"we know that "},{type:b,tag:j,props:{},children:[{type:a,value:ep}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:a,value:"must"}]},{type:a,value:" have come "},{type:b,tag:Y,props:{},children:[{type:a,value:el}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:fb}]},{type:a,value:" (because the replica IDs are unique and each operation causes an increment in the current replica counter). For example, let’s consider the following scenario:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, because "},{type:b,tag:j,props:{},children:[{type:a,value:ep}]},{type:a,value:iY},{type:b,tag:Y,props:{},children:[{type:a,value:el}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:fb}]},{type:a,value:", we know that element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" was removed. On the other hand, the following scenario displays a Set in which the element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" is present:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F \u003C- 3 is greater than 2, so 'a' is present"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When multiple replicas modify the same data, each replica increments its own counter. For example:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F After Bob modifies the data"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"By comparing these two version vectors, we know that "},{type:b,tag:j,props:{},children:[{type:a,value:gv}]},{type:a,value:iY},{type:b,tag:Y,props:{},children:[{type:a,value:el}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:fb}]},{type:a,value:", because the former is a superset of the latter. In other words, a version vector A is greater than a version vector B if all counters of A are greater or equal to the corresponding counters on B."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So in the following scenario, we know that "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" is not present in the Set:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F \u003C- This VV is greater than {alice: 1}"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The trickiest scenario happens when two replicas modify the same data concurrently:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Alice modifies the value"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F At the same time, Bob modifies the value"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Does "},{type:b,tag:j,props:{},children:[{type:a,value:ep}]},{type:a,value:"  come before or after "},{type:b,tag:j,props:{},children:[{type:a,value:gv}]},{type:a,value:"? Neither of the two! The two version vectors are "},{type:b,tag:Y,props:{},children:[{type:a,value:"concurrent"}]},{type:a,value:". In other words, we can’t tell which update came first by just looking at their version vectors. What should we do in this case? Let’s discuss an example to illustrate a possible approach."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s assume both Alice and Bob start from the following state:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From the rules we discussed before, we know that this Set contains element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:iZ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, each replica updates its set concurrently. In particular, Alice removes and then adds "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" again:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While Bob only removes "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:", without adding it back:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When the two replicas synchronize, a conflict occurs: should "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" be present or not? Should the actions of Alice take precedence over the ones from Bob, or vice versa? It depends on the application, as different use cases require different approaches."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A safe approach we could use is "},{type:b,tag:Y,props:{},children:[{type:a,value:"prioritizing additions over removals when a conflict occurs"}]},{type:a,value:", a policy known as "},{type:b,tag:Y,props:{},children:[{type:a,value:"Add Wins"}]},{type:a,value:". According to this logic, if some replica deletes an element while another replica adds it, then the addition should “win”. This policy is the safest as it minimizes the risk of unwanted data loss. For example, it would be easy for Bob to remove element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" again if he’s really convinced about his choice, with minimal UX impact. But if we didn’t adopt the Add-Win policy, Alice might have element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" silently disappear after the synchronization, which could lead to a bad UX."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note: Different approaches to conflict resolution are possible, the most suitable of which depends on the specific use case. For example, some applications might require to “merge” elements when a conflict occurs, rather than having one override the other. Others might prefer the removal operation to take precedence."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If we opt for the Add-Wins policy in our CRDT Set, Alice’s addition will win over Bob’s removal. The only thing left to figure out is what the Version Vector will be."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When a conflict occurs, we are going to "},{type:b,tag:Y,props:{},children:[{type:a,value:bo}]},{type:a,value:" the two Version Vectors. A merge consists of creating a Version Vector whose counters are the maximum value across all conflicting vectors’ counters. For example, merging "},{type:b,tag:j,props:{},children:[{type:a,value:ep}]},{type:a,value:i_},{type:b,tag:j,props:{},children:[{type:a,value:gv}]},{type:a,value:" will result in "},{type:b,tag:j,props:{},children:[{type:a,value:"{alice: 2, bob: 1}"}]},{type:a,value:". By applying this logic to our previous example, we’ll end up with the following state:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F \u003C- merged vector"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F The value of the removals version vector doesn't really matter, as long as it's smaller than the addition version vector"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The resulting set will contain element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" , because the resulting vector ("},{type:b,tag:j,props:{},children:[{type:a,value:"{alice: 3, bob: 1}"}]},{type:a,value:" ) is greater than the vector in "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"An important side-effect of the merge, which might not be obvious at first, is that the resulting version vector now “encodes” the fact that it came after "},{type:b,tag:X,props:{},children:[{type:a,value:"both"}]},{type:a,value:" concurrent updates. In other words, we can tell for sure that this addition comes after both Alice’s addition and Bob’s removal. This allows us to accurately track the way our data evolves when multiple replicas update it."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We now have all the necessary ingredients to implement our Version Vector CRDT Set in JS. Because the implementation is quite long, I’ve decided to not include it in the article, but you can find it on the GitHub repo "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fcrdt-experiments\u002Fblob\u002Fmain\u002Fcrdt-article-examples\u002Fpart-2\u002Fset-with-version-vector.js",rel:[K,L,M],target:N},children:[{type:a,value:fa}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"All right! We now have implemented a CRDT Set that supports additions, removals, and concurrent updates without relying on physical clocks, making it more robust for use in distributed systems."}]},{type:a,value:f},{type:b,tag:af,props:{id:iy},children:[{type:b,tag:t,props:{href:"#remarks-on-replica-ids",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:iz}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"An important discussion we should have is related to Replica IDs. Version Vectors (as well as other approaches we’ll discuss in the upcoming chapters) rely on the fact that every replica has a "},{type:b,tag:X,props:{},children:[{type:a,value:iX}]},{type:a,value:" ID. Without the uniqueness guarantee, we couldn’t infer an ordering between two Version Vectors. For example, if two replicas had "},{type:b,tag:j,props:{},children:[{type:a,value:"Alice"}]},{type:a,value:" as replica ID, we couldn’t tell for sure if the version vector "},{type:b,tag:j,props:{},children:[{type:a,value:ep}]},{type:a,value:" comes after "},{type:b,tag:j,props:{},children:[{type:a,value:fb}]},{type:a,value:". We can infer an ordering only when we can safely assume that a replica counter will only be incremented by a single replica (based on the ReplicaID)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You will find this ID uniqueness requirement in most CRDT implementations. In fact, many CRDTs explicitly mention that it’s up to you to guarantee unique replica IDs, otherwise you might face data corruption (eg. "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdocs.rs\u002Fyrs\u002Flatest\u002Fyrs\u002F#quick-start",rel:[K,L,M],target:N},children:[{type:a,value:fa}]},{type:a,value:fc}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This requirement is made more complex by the fact that CRDTs are typically used in distributed P2P scenarios. In those cases, we can’t rely on a central authority to assign IDs that are guaranteed to be globally unique. The most popular solution in those cases is to generate a random replica ID large enough to be statistically unlikely to conflict with another replica ID. The downside of large replica IDs is that they can take up quite a bit of storage within our CRDT, depending on the implementation. So in these cases, we need to balance our accepted risk of data corruption with our efficiency requirements or introduce a global “coordination” entity to assign unique IDs."}]},{type:a,value:f},{type:b,tag:af,props:{id:iA},children:[{type:b,tag:t,props:{href:"#remarks-on-version-vectors-storage",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:iB}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Version Vectors are a powerful tool in our distributed systems toolbox. Their main downside is that they can take quite a bit of storage in our data structure, and in certain scenarios, a "},{type:b,tag:Y,props:{},children:[{type:a,value:"lot"}]},{type:a,value:" of storage."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The ideal scenario for Version Vectors is when any given data entry is only ever modified by a single replica:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, because our data is only modified by Alice, our Version Vector’s size doesn’t grow."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If at some point another replica decides to modify the data, our Version Vector’s size grows by one:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Therefore, the worst-case scenario happens when a data entry is modified by a different replica every time:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:i$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:bN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:co}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:i$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:"david"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"That adds up quickly!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The problem is that we can fall into this worst-case scenario quite easily if we are not careful. For example, given that replica IDs have to be unique, we could decide to solve the problem by generating a random ID every time our CRDT is initialized. At this point, every time we modify the same entry, the Version Vector size will grow by one. Given that our CRDT is likely to be initialized at least once every time the user starts our application, modifying the same entries will cause the Version Vector size to grow fast!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For some use cases, this might not be a significant problem, for example in scenarios in which the creation of new objects is more common than edits or when Replica IDs can be reused among different sessions. There is also a more efficient version of Version Vectors called "},{type:b,tag:Y,props:{},children:[{type:a,value:"Dotted Version Vectors"}]},{type:a,value:", which in some cases can bring significant space savings. We’ll hopefully cover it in a future chapter of the series, so stay tuned :)"}]},{type:a,value:f},{type:b,tag:av,props:{id:gw},children:[{type:b,tag:t,props:{href:ja,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:gx}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"That was quite a ride! We finally have a working CRDT Set implementation, but there is still a lot to discuss:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Our CRDT Set only keeps growing over time, even after we remove elements. Can we implement deletes more efficiently?"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"When we synchronize the replicas of our CRDT, we currently need to send the entire state to each other, which could become prohibitive expensive after a certain size. Can we implement a more efficient synchronization in which only the “new” data is sent over the wire?"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"What about other data structures like Lists and Maps?"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"These will be the topics of the next chapters, so stay tuned!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"PS: All the code is available in this repository: "},{type:b,tag:t,props:{href:fd,rel:[K,L,M],target:N},children:[{type:a,value:fd}]}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:eg},{type:b,tag:gn,props:{to:iC},children:[{type:a,value:iD}]},{type:a,value:iE}]}]},dir:aZ,path:"\u002Farticles\u002F2024-02-25-understanding-crdts-improving-our-set-chapter-2",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"understanding-crdts-improving-our-set-chapter-2"},{slug:"2024-01-27-screencapturekit-failing-to-capture-the-entire-display",description:gy,layout:aU,title:jb,author:aV,date:"2024-01-27T00:00:00.000Z",categories:"macos screencapturekit screen recording objective c bug",social_title:jb,toc:[],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:gy}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Here was a simplified version of my first attempt, in Objective-C:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"#"},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:fe}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:gA},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gB}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:fe}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:gA},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gC}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:fe}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:gA},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:jc}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:jc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:fe}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:"\n\n@"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"interface"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ff}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"NSObject"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"SCStreamOutput"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:"\n@end\n\n@implementation "},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:ff}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"stream"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gE}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"stream didOutputSampleBuffer"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"CMSampleBufferRef"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"sampleBuffer ofType"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"SCStreamOutputType"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"type\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fg}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fh},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"buffer received!\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Analysis here"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n@end\n\nint "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:"int argc"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" char "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:" argv"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n    @autoreleasepool "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"CGPreflightScreenCaptureAccess"}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fg}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fh},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"CGPreflightScreenCaptureAccess failed\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"CGSize"}]},{type:a,value:" displaySize "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"CGDisplayBounds"}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"CGMainDisplayID"}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"size"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Get the first display"}]},{type:a,value:"\n        __block "},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"SCDisplay"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:"display "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:"NULL"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n        dispatch_semaphore_t semaphore "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gF}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fi}]},{type:a,value:jd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:gG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:je},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,eq,V]},children:[{type:a,value:fj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:gH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n            display "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:gI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jf}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:jg},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:jh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Select display, excluding no window"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:er}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:ji},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:er}]},{type:a,value:es},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:jj},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:"display excludingWindows"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:jk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:jl}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:" config "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:jl}]},{type:a,value:es},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:jm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:jo},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:jo},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"queueDepth"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"8"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"showsCursor"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"pixelFormat"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" kCVPixelFormatType_32BGRA"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"colorSpaceName"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" kCGColorSpaceSRGB"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:ff}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:" delegate "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:ff}]},{type:a,value:es},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:jm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gE}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:" stream "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gE}]},{type:a,value:es},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:" initWithFilter"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:"filter configuration"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:"config delegate"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,eq,V]},children:[{type:a,value:fj}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:gN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:jq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:"BOOL"}]},{type:a,value:" did_add_output "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:"stream addStreamOutput"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:"delegate\n                                                "},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bc}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"SCStreamOutputTypeScreen"}]},{type:a,value:"\n                                   "},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:"sampleHandlerQueue"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:"nil\n                                                "},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bE}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:"did_add_output"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fg}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fh},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"addStreamOutput failed\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\n\n        dispatch_semaphore_t semaphore2 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gF}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:"stream startCaptureWithCompletionHandler"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:gG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,eq,V]},children:[{type:a,value:fj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:gH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fg}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fh},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"capture started\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:jr},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:jr},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"NSRunLoop"}]},{type:a,value:" currentRunLoop"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:" run"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can compile and run this program from the terminal by running:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"clang "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"mmacosx"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"version"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"min"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"12.3"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"fobjc"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"arc "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:fl},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:fl},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:fl},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:fl},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"AppKit"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"m"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"o main "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"main\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After providing the necessary permissions on the Settings, we are greeted with this output:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"19"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"41.567"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"6246"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"145858"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:" capture started\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So the capture started, but where are all our juicy buffers? I expected "},{type:b,tag:j,props:{},children:[{type:a,value:"buffer received"}]},{type:a,value:" to be printed many times per second, but it seems like our callback is never called."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I’ve spent many hours trying to debug the issue, until I’ve started experimenting more with the "},{type:b,tag:j,props:{},children:[{type:a,value:er}]},{type:a,value:": instead of calling the "},{type:b,tag:j,props:{},children:[{type:a,value:js}]},{type:a,value:" initialization, I’ve tried "},{type:b,tag:j,props:{},children:[{type:a,value:"initWithDesktopIndependentWindow:"}]},{type:a,value:", passing a random window… To my surprise, many "},{type:b,tag:j,props:{},children:[{type:a,value:"buffer received!"}]},{type:a,value:" logs started to appear!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For some reason, it seems that passing an empty windows array to "},{type:b,tag:j,props:{},children:[{type:a,value:js}]},{type:a,value:" causes the stream to never start (apparently "},{type:b,tag:t,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F77513220\u002Fhow-can-i-use-screencapturekit-to-capture-an-entire-desktop",rel:[K,L,M],target:N},children:[{type:a,value:"I’m not the only one that experienced this problem"}]},{type:a,value:fc}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A workaround I’ve came up with is using the "},{type:b,tag:j,props:{},children:[{type:a,value:"initWithDisplay:includingApplications:exceptingWindows:"}]},{type:a,value:" initialization method instead, passing all the available applications as input:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F ..."}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Get all the running applications"}]},{type:a,value:"\n__block "},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"SCRunningApplication"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:"apps "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:jq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\ndispatch_semaphore_t semaphore "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gF}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fi}]},{type:a,value:jd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:gG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:fi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:je},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,eq,V]},children:[{type:a,value:fj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:gH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n    display "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:gI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jf}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    apps "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:gI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"applications"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:gM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:jg},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:jh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Select display, including all applications"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:er}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:ji},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:er}]},{type:a,value:es},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:jj},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:"display includingApplications"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:"apps exceptingWindows"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:jk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Running this program produces:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.269"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.278"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.287"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.294"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.303"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.311"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.320"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.328"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.336"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.345"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.352"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.361"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.369"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.378"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:c_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bF}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bI}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bP}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"04.386"}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Success!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note: I’m currently running macOS 12.6.3, so newer versions might have already fixed this problem."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:gy}]}]},dir:aZ,path:"\u002Farticles\u002F2024-01-27-screencapturekit-failing-to-capture-the-entire-display",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"screencapturekit-failing-to-capture-the-entire-display"},{slug:"2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1",description:"In the past two months, I’ve been diving deeper into the realm of distributed systems. The catalyst that started my research was discovering the world of local-first applications, a class of software that allows users to access and modify their data locally, while seamlessly synchronizing across devices, even in the face of connection failures.",layout:aU,title:"Understanding CRDTs: A Gentle Introduction (Chapter 1)",author:aV,date:"2024-01-19T00:00:00.000Z",categories:in0,social_title:io,social_subtitle:"A Gentle Introduction (Chapter 1)",header:ip,adaptive_images:e_,toc:[{id:jt,depth:ad,text:ju},{id:jv,depth:ad,text:jw},{id:jx,depth:ad,text:jy},{id:jz,depth:ad,text:jA}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:jB},{type:b,tag:t,props:{href:jC,rel:[K,L,M],target:N},children:[{type:a,value:jD}]},{type:a,value:jE}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From the lens of distributed system theory, local-first applications could be defined as multi-master, eventually-consistent, distributed databases. A replica of the database would run on every user’s device, allowing writes at all times and, when a connection with another replica is available, synchronize the changes. Moreover, depending on the specific algorithm chosen to implement this distributed database, we could relax many of the topology constraints of traditional systems: imagine a system that could seamlessly synchronize across user devices (eg. P2P), while also "},{type:b,tag:Y,props:{},children:[{type:a,value:"optionally"}]},{type:a,value:" synchronizing with a central server."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"An arbitrary network topology",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This architecture allows applications to offer a superb UX, allowing users to work even without an internet connection (eg. when flying on a plane or in the subway), without sacrificing the convenience of synchronization across devices, something that we take for granted nowadays. But if the UX is so much better for the end user, why do so many apps fail to implement such a model? For example, Notion, a very popular knowledge-base app, can’t work without an internet connection, leading to poor user experience in low-connectivity scenarios."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The answer is that implementing a robust multi-master replication is not trivial, and introduces several challenges. For example, what happens when two users write to the same entry concurrently?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Example of a concurrent write across different replicas.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A traditional centralized database does not suffer from this problem, as all writes are handled by a single entity, which can decide with no ambiguity which update should take precedence."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"The centralized database has the final say on what update has priority.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage2.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But in a multi-master architecture, all replicas typically have the same priority, so how do we decide which update “win”?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"In a multi-master scenario, dealing with conflicts is not trivial.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage3.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first approach could be to have the "},{type:b,tag:Y,props:{},children:[{type:a,value:"last"}]},{type:a,value:" update take precedence, a concept known as "},{type:b,tag:Y,props:{},children:[{type:a,value:"Last Write Wins"}]},{type:a,value:" (LWW): in this scenario, the last update being performed overwrites the previous one. So theoretically, we could just attach to each update a timestamp, and the update with the highest timestamp wins. Sounds easy, right?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Concurrent write in a multi-master scenario, with timestamps attached.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage4.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Well, we have a problem, in fact, a serious problem: in a distributed system, clocks are never perfectly in sync. They can drift forward, backward, and even be completely off. And while most operating systems "},{type:b,tag:t,props:{href:iU,rel:[K,L,M],target:N},children:[{type:a,value:"will try their best to keep clocks in sync"}]},{type:a,value:", it’s not something we should rely on to guarantee correctness or integrity. Would you trust a database that 99.99% of the time works perfectly, but silently corrupts the data if the clock goes off?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And it gets worse, because even if clocks are perfectly in sync, the LWW semantic isn’t always appropriate. Imagine the scenario of a distributed counter: what happens if two replicas increment the counter concurrently? If we adopt the LWW semantic, one of the two increments is going to be lost."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"We can’t represent a counter with an LWW semantic, as concurrent increments would be lost.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage5.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It turns out that different use cases and data structures require different approaches to deal with conflicts. As you can imagine, this could get complex pretty quickly. Luckily for us, distributed system theory comes to the rescue with the concept of CRDT."}]},{type:a,value:f},{type:b,tag:av,props:{id:"introducing-crdts"},children:[{type:b,tag:t,props:{href:"#introducing-crdts",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Introducing CRDTs"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{href:jF,rel:[K,L,M],target:N},children:[{type:b,tag:Y,props:{},children:[{type:a,value:"Conflict-free Replicated Data Types"}]}]},{type:a,value:", or CRDTs for short, are a class of data structures that can be replicated across nodes in a network, with the following features (quoting "},{type:b,tag:t,props:{href:jF,rel:[K,L,M],target:N},children:[{type:a,value:"Wikipedia"}]},{type:a,value:gt}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"The application can update any replica independently, "},{type:b,tag:t,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConcurrent_computing",rel:[K,L,M],target:N},children:[{type:a,value:"concurrently"}]},{type:a,value:", and without "},{type:b,tag:t,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConcurrency_control",rel:[K,L,M],target:N},children:[{type:a,value:"coordinating"}]},{type:a,value:" with other replicas."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"An algorithm (itself part of the data type) automatically resolves any inconsistencies that might occur."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Although replicas may have different state at any particular point in time, they are guaranteed to eventually converge."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In other words, nodes can always access and modify their local copy of the CRDT as if it was a plain data structure (eg. a HashMap), and the CRDT algorithm takes care of conflict resolution and eventual convergence. It’s important to keep in mind that CRDTs do not require "},{type:b,tag:t,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConsensus_(computer_science)",rel:[K,L,M],target:N},children:[{type:a,value:"consensus"}]},{type:a,value:" to operate: generally, there is no distinction between replicas in a CRDT, which contrasts with typical replicated databases, in which a particular node acts as a master, and others as read-only replicas."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The term "},{type:b,tag:Y,props:{},children:[{type:a,value:"data structure"}]},{type:a,value:" we used previously is purposefully generic: depending on the chosen approach, CRDTs can model widely different types of data structures: maps, lists, strings, trees, etc. So if you need a distributed data structure with the semantics of a HashMap, you can use a CRDT-based HashMap, and if you need to implement real-time text editing (eg. Google Docs) you can use a CRDT-based List of characters. Moreover, CRDTs can be composed nicely, so if you have a CRDT Map and a CRDT List, you can compose them to represent a JSON-like CRDT data structure, with nested objects and values."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into our first CRDT, it’s important to discuss the concept of "},{type:b,tag:Y,props:{},children:[{type:a,value:"intent preservation"}]},{type:a,value:". We defined CRDTs as data structures that automatically resolve conflicts and eventually converge to the same value across replicas, but that’s only part of the picture. For example, we could think of a HashMap that never stores any value that is given to it:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"class NoopMap {\n  set(key, value) {\n    \u002F\u002F DO NOTHING\n  }\n  \n  get(key) {\n        return undefined;\n  }\n}\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As crazy as it sounds, this data structure is a perfectly valid CRDT:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Conflicts are automatically handled because no conflict can ever occur if we don’t store values"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Every replica always converges to the same value, an empty map"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can imagine, despite being formally definable as a CRDT, this data structure is of little practical use. The reason is that in order for a CRDT algorithm to be "},{type:b,tag:Y,props:{},children:[{type:a,value:"good"}]},{type:a,value:" for practical purposes, it should try as much as possible to resolve conflicts while preserving the user’s intent, which has several important implications in our conflict resolution choices. We are going to cover this topic more in the following sections and chapters."}]},{type:a,value:f},{type:b,tag:av,props:{id:"our-first-crdt-set"},children:[{type:b,tag:t,props:{href:"#our-first-crdt-set",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Our first CRDT: Set"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our CRDT adventure will start with a simple, yet very useful data structure: the Set."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"A generic Set data structure.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage6.png"},children:[]}]},{type:a,value:f},{type:b,tag:af,props:{id:jt},children:[{type:b,tag:t,props:{href:"#first-step-add-only-set",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:ju}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To make our lives easier, we’ll narrow down our goal at first by creating an "},{type:b,tag:Y,props:{},children:[{type:a,value:"Add-only"}]},{type:a,value:" Set, that is, a set to which we can add elements but not remove them (this is an important aspect, more on this later)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our goal is to create a CRDT with the semantics of an Add-only Set. In simple terms, we want a data structure with these features:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Elements can be added to the structure ("},{type:b,tag:j,props:{},children:[{type:a,value:aW}]},{type:a,value:jG}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"We can check if an element is present in the structure ("},{type:b,tag:j,props:{},children:[{type:a,value:aE}]},{type:a,value:jG}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Elements are not ordered (Set semantics)"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"No duplicates (Set semantics)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For these examples, we will use JavaScript as it’s popular enough to be understood by most people (although some might argue that no one "},{type:b,tag:Y,props:{},children:[{type:a,value:"really"}]},{type:a,value:" understands JavaScript \u002Fs)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s start by implementing our "},{type:b,tag:j,props:{},children:[{type:a,value:bU}]},{type:a,value:jH}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:et}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:jI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"Set"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:jJ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:jK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:jK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Pretty straightforward so far: we created a "},{type:b,tag:j,props:{},children:[{type:a,value:bU}]},{type:a,value:" class that wraps a Set and exposes the "},{type:b,tag:j,props:{},children:[{type:a,value:aW}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:aE}]},{type:a,value:" operations."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Things start to get interesting when we introduce "},{type:b,tag:j,props:{},children:[{type:a,value:"CRDT"}]},{type:a,value:" semantics, which we are going to cover in the next section."}]},{type:a,value:f},{type:b,tag:af,props:{id:jv},children:[{type:b,tag:t,props:{href:"#adding-crdt-semantics",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:jw}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:jL},{type:b,tag:j,props:{},children:[{type:a,value:cB}]},{type:a,value:" currently lacks one of the most important features of a CRDT: convergence. In particular, we want every replica of our data structure to eventually converge to the same value."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Replicas eventually converge to the same Set value.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage7.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, we are not interested in the specific protocol used by different replicas to send each others’ changes. Let’s just assume that each replica will periodically send its "},{type:b,tag:j,props:{},children:[{type:a,value:cB}]},{type:a,value:" value to the other replicas."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Replicas sending to each other their entire values.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage8.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To handle the merging process, we’ll add a new method to our "},{type:b,tag:j,props:{},children:[{type:a,value:bU}]},{type:a,value:" structure: "},{type:b,tag:j,props:{},children:[{type:a,value:bo}]},{type:a,value:". This method takes another "},{type:b,tag:j,props:{},children:[{type:a,value:cB}]},{type:a,value:" and merges all its elements with the current set:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:em}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" element "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gr}]},{type:a,value:gs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With the "},{type:b,tag:j,props:{},children:[{type:a,value:bo}]},{type:a,value:" method, we can now propagate changes among replicas. In this example, we propagate changes from replica B to replica A:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:ei},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ej},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Here we propagate the changes from replica B to replica A"}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite its simplicity, this approach offers some surprising advantages over traditional synchronization techniques:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"It’s highly "},{type:b,tag:Y,props:{},children:[{type:a,value:"decentralized"}]},{type:a,value:": the algorithm imposes no constraint over the topology and communication between replicas. In particular, because the merging process is commutative and transitive, if replica A synchronizes with replica B, and then replica B synchronizes with replica C, then replica A and C will be in sync (as long as no concurrent update in A has happened in the meantime), despite having never communicated directly with each other."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"As a result, the system is extremely robust against network problems and downtimes, as it can transparently make use of a "},{type:b,tag:t,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMesh_networking#:~:text=A%20mesh%20network%20is%20a,data%20to%20and%20from%20clients.",rel:[K,L,M],target:N},children:[{type:a,value:"mesh network"}]},{type:a,value:" rather than a traditional centralized solution."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can imagine, there are downsides as well, which we’ll gradually cover in the following sections."}]},{type:a,value:f},{type:b,tag:af,props:{id:jx},children:[{type:b,tag:t,props:{href:"#adding-support-for-removals-a-naive-%CE%B1ttempt",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:jy}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Although an Add-only Set could be useful in some cases, many scenarios would also require removal operations, so our next goal is to add support for them. In short, we want to introduce a "},{type:b,tag:j,props:{},children:[{type:a,value:cd}]},{type:a,value:" method that replicas can use to remove an element from the Set."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first attempt could look as follows:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:"delete"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And if we try to run it:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:jJ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:jM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:jM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It works! Wait… does it? Apparently, the remove operation works correctly, but what happens when we synchronize the set across multiple replicas?"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:ei},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ej},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:jN},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Sync replica B with replica A"}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:jN},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Sync replica A with replica B"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F true!!! The 'a' came back!"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We have a problem: although replica A deleted element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:", synchronizing with replica B causes the "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" element to come back!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"After the second synchronization, the “a” element is undeleted from replica A, which is not the expected behavior.",src:"\u002Fposts\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1\u002Fimage9.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:jL},{type:b,tag:j,props:{},children:[{type:a,value:cd}]},{type:a,value:" operation is quite flaky: depending on the synchronization sequence, elements can be randomly undeleted. How can we solve this problem?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Turns out that delete operations are one of the core complexities of CRDTs, and multiple approaches exist to deal with them. Each has its own set of tradeoffs, so we’ll discuss some of them in the upcoming sections."}]},{type:a,value:f},{type:b,tag:af,props:{id:jz},children:[{type:b,tag:t,props:{href:"#adding-support-for-removals-the-set-pair-approach",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:jA}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first approach to deal with removals is the Set-pair technique. In a nutshell, instead of using a Set to represent the elements, we are going to use "},{type:b,tag:Y,props:{},children:[{type:a,value:"two"}]},{type:a,value:": one for the additions and one for the removals. It might seem confusing at first, so let’s try to take it step by step."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s start with an empty set, which will be represented internally by two add-only sets:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, we add elements "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If we now want to remove "},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:", we could try deleting it directly from the "},{type:b,tag:j,props:{},children:[{type:a,value:bB}]},{type:a,value:" set, but we would then experience the same flakiness problem saw previously. Instead, we are going to "},{type:b,tag:Y,props:{},children:[{type:a,value:aW}]},{type:a,value:jO},{type:b,tag:j,props:{},children:[{type:a,value:aJ}]},{type:a,value:" element to the "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" set:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:t},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can now define the content of the Set as:"}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"All the elements in the "},{type:b,tag:j,props:{},children:[{type:a,value:bB}]},{type:a,value:" Set that are not present in the "},{type:b,tag:j,props:{},children:[{type:a,value:bb}]},{type:a,value:" Set."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can implement this Set by elegantly composing two "},{type:b,tag:j,props:{},children:[{type:a,value:cB}]},{type:a,value:" together:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:et}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:jI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:b}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:b},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:em}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:em},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:em},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:bb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cn}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:ei},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:bU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ej},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:cy}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ap,V]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F false (still false, yey!)"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, our new Set remembers the removed element "},{type:b,tag:j,props:{},children:[{type:a,value:t}]},{type:a,value:" even after a synchronization!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Unfortunately, our current "},{type:b,tag:j,props:{},children:[{type:a,value:bU}]},{type:a,value:" still has some problems:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"What happens if a replica adds an element after removing it? With the current implementation, once an element has been removed it won’t be restorable."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Although we are "},{type:b,tag:Y,props:{},children:[{type:a,value:iF}]},{type:a,value:" removing elements, the size of our data structure keeps increasing over time. If we perform many removals, that would bloat our memory consumption significantly."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:eg},{type:b,tag:gn,props:{to:"\u002Fblog\u002Funderstanding-crdts-improving-our-set-chapter-2"},children:[{type:a,value:"next chapter"}]},{type:a,value:", we are going to answer these two questions and more, so stay tuned!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"PS: All the code is available in this repository: "},{type:b,tag:t,props:{href:fd,rel:[K,L,M],target:N},children:[{type:a,value:fd}]}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:jB},{type:b,tag:t,props:{href:jC,rel:[K,L,M],target:N},children:[{type:a,value:jD}]},{type:a,value:jE}]}]},dir:aZ,path:"\u002Farticles\u002F2024-01-19-understanding-crdts-a-gentle-introduction-chapter-1",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"understanding-crdts-a-gentle-introduction-chapter-1"},{slug:"2024-01-15-fixing-the-network-request-failed-error-with-github-npm-packages",description:"The other day, I encountered this error while running npm install on a private repository:",layout:aU,title:jP,author:aV,date:"2024-01-15T00:00:00.000Z",categories:"github npm install package network request failed",social_title:jP,toc:[],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:jQ},{type:b,tag:j,props:{},children:[{type:a,value:jR}]},{type:a,value:jS}]},{type:a,value:f},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"npm "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:" code "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gO}]},{type:a,value:gP},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:" syscall connect\nnpm "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:" errno "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gO}]},{type:a,value:gP},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:" network request to https"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,"regex"]},children:[{type:b,tag:c,props:{className:[d,jT]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,"regex-source","language-regex"]},children:[{type:a,value:"pkg-npm"},{type:b,tag:c,props:{className:[d,jU,V]},children:[{type:a,value:s}]},{type:a,value:"githubusercontent"},{type:b,tag:c,props:{className:[d,jU,V]},children:[{type:a,value:s}]},{type:a,value:jV}]},{type:b,tag:c,props:{className:[d,jT]},children:[{type:a,value:ah}]}]},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:" failed"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:"reason"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" connect "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"443"}]},{type:a,value:gP},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:fm},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"This"}]},{type:a,value:" is a problem related to network connectivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:fm},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"In"}]},{type:a,value:" most cases you are behind a proxy or have bad network settings"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:" network \nnpm "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:fm},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"If"}]},{type:a,value:" you are behind a proxy"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" please make sure that the\nnpm "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:cM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:fm},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"'proxy'"}]},{type:a,value:" config is "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bC}]},{type:a,value:" properly"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,z]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:"See"}]}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"'npm help config'"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This project uses GitHub’s private NPM registry to host some packages."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After trying multiple approaches (eg. making sure that the GitHub tokens were not expired) the fix turned out to be more interesting than expected: "},{type:b,tag:X,props:{},children:[{type:a,value:"disabling and re-enabling the WiFi on my Macbook Pro."}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"My theory is that a system agent got into an inconsistent state, and restarting the internet connection was enough to unblock the situation."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is a humbling reminder of the effectiveness of restarting: one of the most underrated yet powerful troubleshooting techniques."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:jQ},{type:b,tag:j,props:{},children:[{type:a,value:jR}]},{type:a,value:jS}]}]},dir:aZ,path:"\u002Farticles\u002F2024-01-15-fixing-the-network-request-failed-error-with-github-npm-packages",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"fixing-the-network-request-failed-error-with-github-npm-packages"},{slug:"2023-01-19-good-software-architectures-are-mostly-about-boundaries",description:gQ,layout:aU,title:jX,author:aV,date:"2023-01-19T00:00:00.000Z",categories:"software architecture design engineering",social_title:jX,toc:[{id:jY,depth:ad,text:jZ},{id:j_,depth:ad,text:j$},{id:ka,depth:ad,text:kb}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:gQ}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Boundaries",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we are going to discuss boundaries following a pragmatic approach, presenting examples of problematic boundaries and discussing possible solutions. In the process, we’ll also try to derive general and reusable guidelines to design better boundaries in the future."}]},{type:a,value:f},{type:b,tag:av,props:{id:"what-are-boundaries"},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#what-are-boundaries",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"What are boundaries?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the problematic examples, let’s take a step back and define what a boundary means in the context of this article:"}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are the contracts between different software components, and model the communication between them."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Boundaries are contracts",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are contracts. Different languages call them in different ways: interfaces, traits, types, signatures, but in a nutshell, boundaries define what information goes in and out of any given software component. Boundaries exist at all levels of the stack, defining the interactions between high-level systems, all the way down to services, modules, and functions."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are a special part of a system. Despite accounting for a relatively small portion of a codebase, boundaries protect implementations from the outside world. A well-thought-out boundary lets consumers perform high-level operations without worrying about the low-level details of "},{type:b,tag:Y,props:{},children:[{type:a,value:kc}]},{type:a,value:" the operation is implemented."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Boundaries are usually hard to change. Because boundaries define the interactions between software components, their shape strongly influences how consumers query producers. As a result, changing a boundary might require all its consumers to change. For example, let’s consider a web service, where its public API defines the boundary with clients. Changing the implementation of a route handler might be trivial, but changing the API shape should be done carefully, as we might break all dependent clients. This is one of the reasons why versioned APIs exist, and why changing boundaries is hard."}]},{type:a,value:f},{type:b,tag:av,props:{id:"good-and-bad-boundaries"},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#good-and-bad-boundaries",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Good and bad boundaries"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the highest level, good boundaries promote two important software engineering principles:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Single responsibility"}]},{type:a,value:": every software component is only responsible for one domain area, minimizing the overlap with other components’ responsibilities."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Loose coupling"}]},{type:a,value:": every software component is weakly associated with the others so that a change in one component doesn’t affect the others. Moreover, software components should know as little as possible about the other components."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the same time, bad boundaries tend to display opposite properties:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Multiple responsibilities"}]},{type:a,value:" (aka. “fat” software components): fewer modules that are responsible for several domain areas, and are hard to change."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Tight coupling"}]},{type:a,value:": software components that are strongly dependent on each other, knowing a lot about each other’s implementation details."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Good vs Bad boundaries",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage2.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another useful tool to evaluate the quality of a boundary is to analyze its "},{type:b,tag:Y,props:{},children:[{type:a,value:"information leaks"}]},{type:a,value:", that is, the amount of unnecessary information that goes through it."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Each software component should minimize the amount of information it has to deal with, accepting and exposing the least amount of information necessary to perform its responsibility."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When we allow a service or module to know more than it needs to, we expose it to the risk of becoming strongly coupled with other components, making the system hard to maintain in the long term."}]},{type:a,value:f},{type:b,tag:av,props:{id:"a-problematic-boundary"},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#a-problematic-boundary",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"A problematic boundary"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After covering boundaries at a high level, we are now ready to tackle our first problematic boundary. We are going to discuss a common anti-pattern found in the front-end world, focusing on the process of designing good component interfaces."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our goal is to create a React component to display users’ avatars."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"The Avatar Component",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage3.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:kd},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" type defined in our codebase with the following schema:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,eu]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:gR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ke},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:kf},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n  email"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"During the application lifecycle, we’ll obtain the currently logged-in "},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" from our authentication API."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Given that we already have a "},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" instance from our authentication layer and it contains all the information we need, a possible approach to implement the "},{type:b,tag:j,props:{},children:[{type:a,value:cD}]},{type:a,value:" component could be to accept a "},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" object as prop:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,eu]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:kg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n  user"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:kh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:cD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" user "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:ki},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:kj},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ev},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Then to use it"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:"Avatar user"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite displaying the user image and name correctly, this "},{type:b,tag:j,props:{},children:[{type:a,value:cD}]},{type:a,value:" implementation is not great: by accepting a "},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" as prop, we are leaking a lot of information through the interface boundary, which could hurt maintainability in the long run."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For example, suppose that in a few weeks, we are asked to implement a comment section under our application’s blog posts."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Comment List",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage4.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Ideally, we would like to re-use the "},{type:b,tag:j,props:{},children:[{type:a,value:cD}]},{type:a,value:" component to display comments’ users. Unfortunately, the Comment API does not return a "},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" object, but rather a "},{type:b,tag:j,props:{},children:[{type:a,value:dM}]},{type:a,value:" object, having the following schema:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,eu]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:dM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:gR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ke},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n  thumbnailUrl"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n  karma"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:gS},{type:b,tag:j,props:{},children:[{type:a,value:dM}]},{type:a,value:" has both the first name and the image URL we need, so can we use it? Well, not exactly, as the "},{type:b,tag:j,props:{},children:[{type:a,value:cD}]},{type:a,value:" component can only accept "},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" objects, not "},{type:b,tag:j,props:{},children:[{type:a,value:dM}]},{type:a,value:" (s). If we tried to pass "},{type:b,tag:j,props:{},children:[{type:a,value:dM}]},{type:a,value:"s to the Avatar, besides the TypeScript compiler screaming at us, we would not be able to see the image, as in "},{type:b,tag:j,props:{},children:[{type:a,value:dM}]},{type:a,value:" the field is called "},{type:b,tag:j,props:{},children:[{type:a,value:fn}]},{type:a,value:" and not "},{type:b,tag:j,props:{},children:[{type:a,value:ev}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With deadlines looming, we might be tempted to work around the issue with hackish solutions:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,eu]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F The lazy casting"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:kk},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:kl},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:km},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:kn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ko},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:fn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dO}]},{type:a,value:kh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Or even worse, the mock values"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:kk},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:kl},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:km},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:kn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ko},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:fn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:"\n    email"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ae}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Why is it so hard? The problem is that "},{type:b,tag:X,props:{},children:[{type:a,value:"despite only needing a first name and image URL to work, our"}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:cD}]}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:a,value:"component takes a full"}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:cp}]}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:a,value:"as input!"}]},{type:a,value:" In other words, we are coupling the "},{type:b,tag:j,props:{},children:[{type:a,value:cD}]},{type:a,value:" component with way more information than necessary, creating a "},{type:b,tag:Y,props:{},children:[{type:a,value:"leaking boundary"}]},{type:a,value:". The problem might not become apparent until we either attempt to reuse the component, try mocking some data for testing, or start a refactor."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We’ll discuss other kinds of leaking boundaries throughout the article, but for now, let’s focus on the possible solutions. As we mentioned earlier, our main problem is that "},{type:b,tag:j,props:{},children:[{type:a,value:cD}]},{type:a,value:" is tightly coupled with the "},{type:b,tag:j,props:{},children:[{type:a,value:cp}]},{type:a,value:" type, which has way more information than necessary. In general, the solution is to make our component only dependent on the exact information we need:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,eu]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:kg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:gR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:kf},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:cD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" firstName"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" imageUrl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:ki},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:kj},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ev},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Then to use it with both User and PublicUser"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:kp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:kq},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:ev},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:kp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:kr},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:kq},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:kr},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:fn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:fo},{type:b,tag:j,props:{},children:[{type:a,value:cD}]},{type:a,value:" now only depends on "},{type:b,tag:j,props:{},children:[{type:a,value:dm}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:ev}]},{type:a,value:", so we can easily reuse it across the app. With this change, we promoted "},{type:b,tag:X,props:{},children:[{type:a,value:"loose coupling"}]},{type:a,value:", preventing an information leak (for example with the User’s "},{type:b,tag:j,props:{},children:[{type:a,value:"email"}]},{type:a,value:" and PublicUser’s "},{type:b,tag:j,props:{},children:[{type:a,value:"karma"}]},{type:a,value:k}]},{type:a,value:f},{type:b,tag:av,props:{id:"towards-better-boundaries"},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#towards-better-boundaries",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Towards better boundaries"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the next examples, let’s summarize what we learned so far:"}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:ks}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"a-service-level-example"},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#a-service-level-example",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"A service-level example"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After covering an example related to the front-end world, our next case study revolves around a hypothetical E-commerce website. In particular, our goal is to design a web service to generate product recommendations. The service will accept "},{type:b,tag:j,props:{},children:[{type:a,value:ew}]},{type:a,value:" (s) and return the list of product recommendations that might be relevant for the given users."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The main API endpoint could look as follows:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Return a list of recommended products for the given user_id"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:gU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:ew},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"recommended_products\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the implementation level, the service will generate product recommendations based on the users’ past order history. In a nutshell, the process could be approximated with these steps:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"The service receives a "},{type:b,tag:j,props:{},children:[{type:a,value:ew}]},{type:a,value:" as input."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"The service fetches the list of recently purchased products for the given user."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"The service returns a list of similar products."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The initial implementation would return a JSON response, such as:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:gV}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fp}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:gW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a couple of weeks, the service implementation is completed and the team deploys it."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After some real-world testing, the product team realizes that despite providing good recommendations in most cases, the service occasionally returns non-relevant products for some users. Given that the recommendations are based on the recently purchased products, the product team asks the service developers to add the original “source data” alongside the recommendations. In other words, the service would not only return the product recommendations but also the list of purchased products that were used to generate it."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The service developers think “well, adding that data shouldn’t be a huge problem, we already have it in our API handler, we can just add an additional response field. We could turn it off by default and add an additional query parameter "},{type:b,tag:j,props:{},children:[{type:a,value:fr}]},{type:a,value:" to request it”."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Fast forward a couple of hours, and our API response looks as follows:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:gU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:ew},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"recommended_products"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:a,value:fr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:gV}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fp}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:gW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:"\"latest_ordered_products\""}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fp}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Pizza Plate\""}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The product team is happy. Thanks to this additional data, they figure out that the broken product recommendations were caused by some fancy Unicode characters contained in a few products’ names. A happy ending, right? Well, kind of. For now, we got the quick win the business needed at the expense of a minor information leak."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A few weeks afterward, a product manager realizes that users might be also interested in re-buying some of their previously purchased products. The (already busy) developers are therefore asked to add a new section to the E-commerce Homepage to show a “buy again” section, with some of their previously purchased products."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With the deadlines looming, the assigned developer investigates the easiest way to provide that information. After a painful experience the month before, the developer dreads the idea of using the Orders API again, as it’s a legacy, badly-designed service that it’s an absolute pain to use. During this search, the developer stumbles upon the Recommendation API and its "},{type:b,tag:j,props:{},children:[{type:a,value:ex}]},{type:a,value:" parameter. Eureka! Given that the frontend already uses the Recommendation API on the Homepage, getting the products necessary for the “buy again” section would be as straightforward as passing the "},{type:b,tag:j,props:{},children:[{type:a,value:fr}]},{type:a,value:" parameter and reading another JSON field."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Shortly thereafter, the “Buy again” section is up and running on the E-commerce homepage, and everyone is happy."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While nothing has broken yet, let’s stop for a moment to analyze the current situation:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"The recommendation service, whose sole goal was to provide a list of recommended products, exposed the additional "},{type:b,tag:j,props:{},children:[{type:a,value:ex}]},{type:a,value:" field (an implementation detail) for debugging purposes."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"The frontend now uses this additional "},{type:b,tag:j,props:{},children:[{type:a,value:ex}]},{type:a,value:" field to implement the (unrelated) “buy again” feature."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We’ll soon discuss why this is a problem, but for now, let’s remember that ideally, all software components should have a single responsibility and be loosely coupled."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Fast-forward a few weeks, the company’s data scientists design a new recommendation algorithm based on user profiling. Instead of using the previous order history to generate the recommendations, the new algorithm would profile the users based on some demographic information, and suggest products that are relevant to the profile types. Remember, the goal of the recommendation service is to generate a list of recommended products for a given user ID."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The response format for the new algorithm is the same as the original API contract:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:gT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:gU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:ew},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"recommended_products\n\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:gV}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fp}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:gW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cg,A]},children:[{type:a,value:fq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:c$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While reviewing the code, the developers of the recommendation service stumble upon the "},{type:b,tag:j,props:{},children:[{type:a,value:fr}]},{type:a,value:" parameter. This time, the products are based on the users’ demographics rather than their past orders, so that information is not available. After a bit of consideration, the developers are confident they can remove it, as it was only used as a one-off debugging tool and it’s unlikely someone is still using it. Just to be safe, they look at the request metrics to verify that no client is using that parameter, and… Well, to their surprise, it’s heavily used! How come a one-off debugging tool is still being used after months?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After some investigation, they realize the Homepage needs that parameter to display the “Buy Again” section, and deploying the new recommendation service as-is will break it."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Needless to say, the release date is postponed, a lengthy discussion between the service team and the frontend team is started, and other expensive consequences."}]},{type:a,value:f},{type:b,tag:af,props:{id:jY},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#what-went-wrong",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:jZ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From a high-level perspective, this issue was caused by a problematic boundary:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"When the developers added the "},{type:b,tag:j,props:{},children:[{type:a,value:ex}]},{type:a,value:" field, they exposed an implementation detail, leaking some information not related to the main service responsibility."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"When the frontend team used the "},{type:b,tag:j,props:{},children:[{type:a,value:ex}]},{type:a,value:" field to implement the “buy again” feature, they created another "},{type:b,tag:Y,props:{},children:[{type:a,value:"implicit"}]},{type:a,value:" responsibility for the recommendation service, violating the single responsibility principle."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Every time a service, module, or function exposes more information than necessary, we run the risk of getting consumers to depend on it. As a result, consumers become coupled with implementation details rather than abstract APIs, making the system harder to change."}]},{type:a,value:f},{type:b,tag:af,props:{id:j_},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#how-we-could-have-prevented-it",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:j$}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"API requests and responses act as contracts. Therefore, we should be extremely careful with all the information we expose. Firstly, we should ask: “is this information absolutely necessary to perform the service responsibility?” and also “If I completely changed the implementation of the service, would this data still be relevant?”"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the case of the product recommendation service, the only responsibility was to return the list of recommended products for the given user. The fact that it was derived from the user’s latest purchases was an implementation detail, and should not have been exposed."}]},{type:a,value:f},{type:b,tag:av,props:{id:"another-step-forward"},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#another-step-forward",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Another step forward"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into our last example, let’s discuss what we learned so far:"}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:ks}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Good boundaries focus on a single responsibility"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"other-benefits-of-good-boundaries"},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#other-benefits-of-good-boundaries",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Other benefits of good boundaries"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We’ll close the article by discussing other benefits of good boundaries, starting again from a hypothetical scenario: we are hired as consultants by a rental company that is rebuilding its web application. As part of our duties, we are asked to create a function that, given a list of "},{type:b,tag:j,props:{},children:[{type:a,value:bS}]},{type:a,value:"s, returns the closest to a given coordinate."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:kd},{type:b,tag:j,props:{},children:[{type:a,value:bS}]},{type:a,value:" type defined in our codebase:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:dn},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fs}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fu}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, besides the address and owner information we find the "},{type:b,tag:j,props:{},children:[{type:a,value:bJ}]},{type:a,value:" field, which is all we need to implement this functionality."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our method’s signature could look as follows:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ey}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:"houses"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ku}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" longitude"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F ... code to calculate the closest house"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As part of our development process, we also want to make sure it works correctly, so we start writing unit tests:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"123\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fs}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fu}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:"mockHouse2"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fs}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fu}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Bob\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fy}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:gZ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ey}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:do0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:do0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite covering the main use case of our function, this test is unnecessarily verbose and hard to maintain due to all the unrelated fields we need to specify in the mocks. Why do we need to specify an owner in the mock if we are only interested in using the "},{type:b,tag:j,props:{},children:[{type:a,value:bJ}]},{type:a,value:" field? If at some point in the future, another field is added to the "},{type:b,tag:j,props:{},children:[{type:a,value:bS}]},{type:a,value:" type, we would need to update the test even if the change is unrelated to the functionality we are testing. In short, this would become a maintenance burden."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A first approach to mitigate the problem could be to use casting:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:kx},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:dO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:ky},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fy}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:dO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:gZ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ey}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:do0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:do0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This approach solves the maintenance and verbosity issues, though it has one potential problem: while TypeScript is smart enough to check whether what we are casting is reasonable (for example, if we tried to do "},{type:b,tag:j,props:{},children:[{type:a,value:"{ foo: true } as House"}]},{type:a,value:", it wouldn’t let us do it, as the two types are too incompatible), there are still some cases in which that casting could silence a problem. For example, let’s say for whatever reason we needed to add an "},{type:b,tag:j,props:{},children:[{type:a,value:kz}]},{type:a,value:" field to the "},{type:b,tag:j,props:{},children:[{type:a,value:bS}]},{type:a,value:" coordinates:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:dn},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fs}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fu}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fv}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:fw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:kz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:b_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F \u003C- This field"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note: adding a field to the "},{type:b,tag:j,props:{},children:[{type:a,value:bJ}]},{type:a,value:" field doesn’t make much sense in this context, but there are cases where adding a field could likely happen. For the sake of this example, pretend "},{type:b,tag:j,props:{},children:[{type:a,value:bJ}]},{type:a,value:" is one of them :)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now we have a problem: our test would still pass the TypeScript compilation without errors, even though we would want to be notified of this new incompatibility:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:kx},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:kA}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:dO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:ky},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fy}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:kA}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:dO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:gZ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ey}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:do0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:do0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a lucky case, the test would fail at runtime in an obvious way, letting us realize the problem quickly. In an unlucky scenario, we would lose time to track down a cryptic error and fix it."}]},{type:a,value:f},{type:b,tag:af,props:{id:ka},children:[{type:b,tag:t,props:{ariaHidden:O,href:"#an-alternative-approach",tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:kb}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A possible alternative would be to define the "},{type:b,tag:j,props:{},children:[{type:a,value:ey}]},{type:a,value:" function with a more focused boundary:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:dn},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:kB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:" getClosestEntity"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:fC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"extends"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:kB}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"entities"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:fC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ku}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" latitude"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" number "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:fC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F ...code to calculate the closest entity"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, the "},{type:b,tag:j,props:{},children:[{type:a,value:ha}]},{type:a,value:" method is generic and can perform its task with whatever object has "},{type:b,tag:j,props:{},children:[{type:a,value:bJ}]},{type:a,value:" in it, including "},{type:b,tag:j,props:{},children:[{type:a,value:bS}]},{type:a,value:"(s). This has two advantages:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Tests could be lean and without casts, which would be optimal in terms of maintainability"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"returns closest entity correctly\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" mockEntity1 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" mockEntity2 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fy}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:fz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" closestEntity "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ha}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:kC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" mockEntity2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"closestEntity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:kC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"We could reuse the "},{type:b,tag:j,props:{},children:[{type:a,value:ha}]},{type:a,value:" function with many different entities without changing the implementation"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Important note: the example we just discussed is very likely over-engineered. I choose a simple example to make the point easier to understand, but I wouldn’t suggest this approach for such a simple use case. This approach really shines when applied to complex algorithms and logic we need to share in several different contexts."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:bl},children:[{type:b,tag:t,props:{ariaHidden:O,href:ci,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Throughout the article, we gave a general overview of boundaries. We started by defining boundaries and, through a series of examples, discussed the difference between good and bad ones, along with the consequences they can have on the software we produce."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As always, balancing best practices and over-engineering is hard. You shouldn’t always apply these techniques, but rather, consider them as an additional tool to create better software."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:gQ}]}]},dir:aZ,path:"\u002Farticles\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"good-software-architectures-are-mostly-about-boundaries"},{slug:"2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals",description:"At Anima, we are always looking for new ways to automate our workflows. One of these efforts involved creating a new CircleCI pipeline to automatically deploy some NPM packages, removing the need for tedious manual work. The plan was straightforward: once started, the pipeline would bump the version of our packages (using Lerna), build them and finally publish them on our NPM registry.",layout:aU,title:kD,author:aV,date:"2022-10-17T00:00:00.000Z",categories:"circle ci circleci github status pending stuck approval",social_title:kD,toc:[{id:kE,depth:ad,text:kF},{id:kG,depth:ad,text:kH},{id:kI,depth:ad,text:kJ},{id:fD,depth:aH,text:dQ},{id:bl,depth:ad,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:kK},{type:b,tag:t,props:{href:kL,rel:[K,L,M],target:N},children:[{type:a,value:kM}]},{type:a,value:kN},{type:b,tag:t,props:{href:kO,rel:[K,L,M],target:N},children:[{type:a,value:kP}]},{type:a,value:kQ}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Given that we didn’t want to create a new release for every change pushed on "},{type:b,tag:j,props:{},children:[{type:a,value:cz}]},{type:a,value:", we decided to use CircleCI’s manual approvals as “deployment gates”. The idea was to have the project owner decide when to perform a release by "},{type:b,tag:Y,props:{},children:[{type:a,value:"approving"}]},{type:a,value:" it through the CircleCI UI."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In practice, this can be easily implemented by using CircleCI’s job dependencies. For example, starting from a workflow in which we always run the deploy, such as:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[cE,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:ez},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:eA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:eB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:dR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:" build\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We could decide to only run the deploy after a manual approval with:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[cE,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:ez},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:eA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:hb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:bc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:kR},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:dR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:eA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:eB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:dR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:kS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:kT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"approval\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With this configuration, the "},{type:b,tag:j,props:{},children:[{type:a,value:eB}]},{type:a,value:" job would only be started if both the "},{type:b,tag:j,props:{},children:[{type:a,value:"build"}]},{type:a,value:" succeeded and the "},{type:b,tag:j,props:{},children:[{type:a,value:hb}]},{type:a,value:" job was manually approved."}]},{type:a,value:f},{type:b,tag:af,props:{id:kE},children:[{type:b,tag:t,props:{href:"#the-problem-github-status-gets-stuck-on-pending-for-unapproved-workflows",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:kF}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This approach worked flawlessly for our use-case, except for a small (but really annoying) problem: "},{type:b,tag:X,props:{},children:[{type:a,value:"approval jobs would always appear as “pending” on GitHub statuses unless manually approved."}]},{type:a,value:" Although this was not a blocker, we lost the ability to understand at a glance which commits passed all CI checks."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eo,src:"\u002Fposts\u002F2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After a bit of digging, I realized we weren’t the only ones struggling with this issue, as it was "},{type:b,tag:t,props:{href:"https:\u002F\u002Fcircleci.canny.io\u002Fcloud-feature-requests\u002Fp\u002Fshow-overall-all-checks-have-passed-status-in-github-even-on-builds-with-incompl",rel:[K,L,M],target:N},children:[{type:a,value:"one of the most requested features on CircleCI’s feedback channels"}]},{type:a,value:". Unfortunately, the thread didn’t offer any useful information or workaround, so we were stuck with this sub-optimal solution."}]},{type:a,value:f},{type:b,tag:af,props:{id:kG},children:[{type:b,tag:t,props:{href:"#the-workaround-overriding-github-commit-statuses-manually",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:kH}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Fast forward a few weeks, and I find myself developing a new CI integration. While going through the GitHub API documentation, I stumble upon the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdocs.github.com\u002Fen\u002Frest\u002Fcommits\u002Fstatuses",rel:[K,L,M],target:N},children:[{type:a,value:"GitHub’s Commit Status API"}]},{type:a,value:", which allows users to programmatically access commit statuses."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Among other things, you can "},{type:b,tag:Y,props:{},children:[{type:a,value:"create"}]},{type:a,value:" a new commit status with this HTTP request:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[cE,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"curl \\\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"X POST \\\n  "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"-H \"Accept"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" application\u002Fvnd.github+json\" \\\n  "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"-H \"Authorization"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Bearer \u003CYOUR"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"TOKEN"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:"\" \\\n  https"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\u002F\u002Fapi.github.com\u002Frepos\u002FOWNER\u002FREPO\u002Fstatuses\u002FSHA \\\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"d '"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:kU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:kV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"https:\u002F\u002Fexample.com\u002Fbuild\u002Fstatus\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:kW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"The build succeeded!\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:kX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"continuous-integration\u002Fjenkins\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"'\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"What captures my attention is the "},{type:b,tag:j,props:{},children:[{type:a,value:fF}]},{type:a,value:" field, which acts as a sort of "},{type:b,tag:Y,props:{},children:[{type:a,value:cr}]},{type:a,value:" for the commit status. While experimenting, I ask myself: what happens if you specify a "},{type:b,tag:j,props:{},children:[{type:a,value:fF}]},{type:a,value:" value of an existing status? I was expecting the "},{type:b,tag:j,props:{},children:[{type:a,value:fF}]},{type:a,value:" to be specific to a given GitHub’s access token, but that turned out to be an incorrect assumption. As it turns out, "},{type:b,tag:X,props:{},children:[{type:a,value:"specifying the same"}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:fF}]}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:a,value:"of an existing status overrides the status, regardless of the entity that created it… Bingo!"}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We finally got a possible workaround: we could wait for CircleCI’s approval status to appear on GitHub’s commit statuses, and then override it using the above request to appear as successful."}]},{type:a,value:f},{type:b,tag:af,props:{id:kI},children:[{type:b,tag:t,props:{href:"#the-solution-a-bash-script-to-patch-commit-statuses",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:kJ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I spent the following 20 minutes putting together a script that would:"}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Wait for the approval status to appear on the GitHub commit statuses"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Override it with a “success” state"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Here it is (make sure to replace the values at the top with the correct ones):"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[cE,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"#!\u002Fbin\u002Fbash"}]},{type:a,value:"\n\nset "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"e\n\n"},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# Note that the CIRCLECI_JOB_NAME should also include the workflow name"}]},{type:a,value:"\nCIRCLECI_JOB_NAME=\"your"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"workflow\u002Fdeploy"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"approval\"\nREPO_NAME=\"your"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"repo"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"name\"\nREPO_OWNER=\"your"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"github"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"account\"\n"},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# Note: you should also set a valid GitHub token in the GITHUB_ACCESS_TOKEN variable"}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"echo \"Patching approval job named"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" $CIRCLECI_JOB_NAME\"\n\nfor i in "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"1..10"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\ndo\n  echo \"waiting for status to appear"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bq}]},{type:a,value:"\"\n\n  sleep 10\n\n  curl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"request GET \\\n    "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:kY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\u002F\u002Fapi.github.com\u002Frepos\u002F$REPO_OWNER\u002F$REPO_NAME\u002Fstatuses\u002F$CIRCLE_SHA1\" \\\n    "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:kZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" application\u002Fvnd.github.v3+json' \\\n    "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:k_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Bearer $GITHUB_ACCESS_TOKEN\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:k$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"statuses.json\n\n  cat commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"statuses.json\n  cat commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"statuses.json "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:la},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"r '."},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:".context' "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:k$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"statuses.txt\n\n  "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"if grep -q \"ci\u002Fcircleci"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" $CIRCLECI_JOB_NAME\" \"commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"statuses.txt\"; then\n    echo \"status appeared"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" patching the pending state\"\n    URL=$(cat commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"statuses.json"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:la},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"r "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"arg name \"$CIRCLECI_JOB_NAME\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"c 'map(select(.context "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:" contains($name))) "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:iZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:".target_url' "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:" head "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"1)\n\n    curl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"request POST \\\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:kY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\u002F\u002Fapi.github.com\u002Frepos\u002F$REPO_OWNER\u002F$REPO_NAME\u002Fstatuses\u002F$CIRCLE_SHA1\" \\\n      "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:kZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" application\u002Fvnd.github.v3+json' \\\n      "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:k_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Bearer $GITHUB_ACCESS_TOKEN\" \\\n      "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"--header 'Content-Type"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" application\u002Fjson' \\\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"data '"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:kU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:kV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" \"'\"$URL\"'\""},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:kW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Patched pending state, please visit circleCI to start the approval.\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:kX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" \"ci\u002Fcircleci"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" '\"$CIRCLECI_JOB_NAME\"'\"\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"'\n\n    exit 0\n  fi\ndone\n\necho \"Could not patch CircleCI approval"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" timed out\"\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In order for it to work, it has to be spawned roughly at the same time as the approval job, so having the same job dependencies is important. For example, starting from the case described at the top of our article, we could refactor the pipeline to:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[cE,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:ez},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:eA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:hb}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:bc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:kR},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:dR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:eA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:" patch"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:eB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"approval"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"status\n          "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:dR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:" build "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# same dependency as approval, so that they are triggered at the same time"}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:eB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:dR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:kS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:kT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"approval\n\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bq}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"patch-deploy-approval-status"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"steps"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Patch deploy approval status\""}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"command"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,fH,v]},children:[{type:a,value:"\n          ... the code of the script above"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:aI,props:{id:fD},children:[{type:b,tag:t,props:{href:lb,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:dQ}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"You will need to have "},{type:b,tag:j,props:{},children:[{type:a,value:"jq"}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:fI}]},{type:a,value:" installed for the script to work"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"You will need to store a GitHub token (a personal access token could work as well) in a CircleCI environment variable for the API request to work"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After more than a month of endless pending states, we finally got our green checks back!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eo,src:"\u002Fposts\u002F2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Hopefully, CircleCI will fix this behavior soon, but in the meantime, this workaround should work well for our purposes."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:kK},{type:b,tag:t,props:{href:kL,rel:[K,L,M],target:N},children:[{type:a,value:kM}]},{type:a,value:kN},{type:b,tag:t,props:{href:kO,rel:[K,L,M],target:N},children:[{type:a,value:kP}]},{type:a,value:kQ}]}]},dir:aZ,path:"\u002Farticles\u002F2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"solving-github-status-stuck-on-pending-with-circlecis-approvals"},{slug:"2022-09-21-automatic-codesigning-on-windows-using-github-actions",description:"After our previous article on automatic code-signing for macOS applications, we are now going to cover the process for Windows binaries. The article is going to discuss all the necessary steps to get a Windows application code-signed, starting from the process to obtain a certificate, all the way down to automating the signing process in your CI pipelines.",layout:aU,title:"Automatic Code-signing on Windows using GitHub Actions",author:aV,date:"2022-09-21T00:00:00.000Z",categories:"code sign signing signtool certificate sectigo authority ci automatic github actions",social_title:"Automatic Code-signing on Windows",social_subtitle:lc,toc:[{id:ld,depth:ad,text:le},{id:fD,depth:aH,text:dQ},{id:lf,depth:ad,text:lg},{id:lh,depth:aH,text:li},{id:lj,depth:aH,text:lk},{id:ll,depth:ad,text:lm},{id:ln,depth:aH,text:"Troubleshooting “Expecting: TRUSTED CERTIFICATE” error"},{id:lo,depth:ad,text:lp},{id:lq,depth:ad,text:lr},{id:ls,depth:ad,text:lt},{id:lu,depth:ad,text:lv},{id:lw,depth:ad,text:lx},{id:ly,depth:ad,text:lz},{id:lA,depth:aH,text:dQ},{id:lB,depth:aH,text:lC}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:lD},{type:b,tag:t,props:{href:hc,rel:[K,L,M],target:N},children:[{type:a,value:lE}]},{type:a,value:lF}]},{type:a,value:f},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The article summarizes the steps we went through to code-sign Espanso, a cross-platform text expander. If you get stuck in the process, I also recommend checking out "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fespanso\u002Fespanso",rel:[K,L,M],target:N},children:[{type:a,value:"Espanso’s source code"}]},{type:a,value:s}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"getting-a-code-signing-certificate"},children:[{type:b,tag:t,props:{href:"#getting-a-code-signing-certificate",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Getting a Code-signing Certificate"}]},{type:a,value:f},{type:b,tag:af,props:{id:ld},children:[{type:b,tag:t,props:{href:"#choosing-a-certificate-authority",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:le}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before coding our way into the automatic CI pipeline, we first need to obtain a Code-signing certificate. There are multiple companies you can get one from, so the first challenge is to figure out which one to choose. We could talk to great lengths about the pros\u002Fcons of the various providers, but for the sake of this article, let’s summarize it by asking two questions:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Are you trying to sign the executable as a company or as an individual?"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"What is your budget?"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"These are my recommendations depending on the above answers:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Company with a large budget"}]},{type:a,value:": buy an EV certificate from DigiCert, those are the most expensive (currently at ~700$\u002Fyear) but they offer the best reputation and customer support."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Individual with a large budget"}]},{type:a,value:": buy an OV certificate from DigiCert. These are still expensive (~500$\u002Fyear), but don’t offer as much reputation as an EV certificate (your users will still see Windows’ SafeScreen at first). Unfortunately, individuals can’t buy EV certificates, so this is likely the best you could find"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Individual with a small budget"}]},{type:a,value:": buy an OV certificate from a Sectigo reseller, like CodeSigningStore.com. I went down this route as Espanso is an open-source project and I had to be careful about the budget. Overall, the experience was "},{type:b,tag:Y,props:{},children:[{type:a,value:"ok"}]},{type:a,value:", and after about 3 weeks of back and forth with their customer support, I managed to get a valid certificate at the price of ~70$\u002Fyear, thus significantly cheaper than the other options"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In short, if you are a company I recommend buying an EV certificate from DigiCert, as they offer the best reputation for your executable. On the other hand, if you are looking to code-sign your program (maybe an open-source project) on a budget, then an OV certificate from a reseller like "},{type:b,tag:t,props:{href:lG,rel:[K,L,M],target:N},children:[{type:a,value:lH}]},{type:a,value:" could be an option."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The next section will describe the process we went through to get an OV certificate from Sectigo. Feel free to jump to the next one if you already have a certificate or you decide to use a different provider."}]},{type:a,value:f},{type:b,tag:aI,props:{id:fD},children:[{type:b,tag:t,props:{href:lb,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:dQ}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"I highly recommend buying 3 years certificates. Despite being more expensive, they will save you from the “overhead” of re-applying for a certificate each year. Moreover, some certificates (like the OV version) require time to build a reputation, and buying a 3 years certificate means you won’t have to rebuild that reputation once a year."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"If you choose an EV certificate, keep in mind that you will need to have an hardware token (a USB key shipped to you by the certificate authority) connected to the machine while performing the digital signature. This has an important consequence: "},{type:b,tag:X,props:{},children:[{type:a,value:"you won’t be able to use GitHub-hosted CI agents to perform the digital signature"}]},{type:a,value:", as you can’t connect the physical USB token to them. There are several possible workarounds, but a common one used in professional environments consists in running "},{type:b,tag:Y,props:{},children:[{type:a,value:"self-hosted"}]},{type:a,value:" runners for your Windows CI integration. In short, you would keep a physical server inside your company’s office with the hardware token always connected. When a CI build is scheduled, GitHub (or your CI provider of choice) will run the build on your server (having the hardware key connected) instead of a cloud VM."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:lf},children:[{type:b,tag:t,props:{href:"#buying-an-ov-certificate-from-sectigo",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lg}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After a thorough evaluation of the possible options, I decided to get an OV certificate from Sectigo (or to be more precise, a reseller), as it was the cheapest option I could find with "},{type:b,tag:Y,props:{},children:[{type:a,value:"acceptable"}]},{type:a,value:" reviews online (just search for “Comodo reviews” online to get an idea)."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For context: Comodo was rebranded to Sectigo in 2018, but there is the same company behind them."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While you could buy a code-signing certificate directly from Sectigo’s website, I decided to buy it from a reseller, as the end result would be similar at a fraction of the price. I personally choose "},{type:b,tag:t,props:{href:lG,rel:[K,L,M],target:N},children:[{type:a,value:lH}]},{type:a,value:" as it seemed the reseller "},{type:b,tag:Y,props:{},children:[{type:a,value:"with the least bad reviews online"}]},{type:a,value:" (not exactly reassuring, I know)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So I went ahead and paid 207$ for a 3 years Sectigo certificate."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Shortly after, I received an email with a link to submit a "},{type:b,tag:Y,props:{},children:[{type:a,value:"Certificate Signing Request"}]},{type:a,value:" (CSR), a file containing your public key and other information. This will be used by the certificate authority to generate the certificate."}]},{type:a,value:f},{type:b,tag:aI,props:{id:lh},children:[{type:b,tag:t,props:{href:"#generating-a-certificate-signing-request-csr",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:li}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As discussed above, we need to submit a CSR to the Certificate Authority to generate a certificate. While there are multiple ways to create a CSR, these are the steps to generate one using "},{type:b,tag:j,props:{},children:[{type:a,value:hd}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note: If you are on Windows, the easiest way to get "},{type:b,tag:j,props:{},children:[{type:a,value:hd}]},{type:a,value:" is by using the executable distributed as part of a "},{type:b,tag:j,props:{},children:[{type:a,value:"git"}]},{type:a,value:" installation. In my case, after installing Git, I had access to the "},{type:b,tag:j,props:{},children:[{type:a,value:"openssl.exe"}]},{type:a,value:" executable in this path: "},{type:b,tag:j,props:{},children:[{type:a,value:"'C:\\Program Files\\Git\\usr\\bin\\openssl.exe"}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Open a Powershell terminal"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Run this command to launch the generation wizard:"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:lI}]},{type:a,value:" req "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"newkey rsa"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"4096"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"keyout "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:he}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ai}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"out "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:"MYCSR"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"csr"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"You will be presented with a series of prompts:\n"},{type:b,tag:bM,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Create and verify a password. This is the password used to protect your private key, "},{type:b,tag:X,props:{},children:[{type:a,value:"make sure to save it somewhere, as we will need it later"}]}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:eC},{type:b,tag:X,props:{},children:[{type:a,value:"Country name"}]},{type:a,value:", a two-letter code for your country (see a"},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.ssl.com\u002Fcountry-codes\u002F",rel:[K,L,M],target:N},children:[{type:a,value:" list of possible values"}]},{type:a,value:k}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:eC},{type:b,tag:X,props:{},children:[{type:a,value:"Locality name"}]},{type:a,value:", the name of your city or town"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:eC},{type:b,tag:X,props:{},children:[{type:a,value:"Organization name"}]},{type:a,value:", the name of your company\u002Forganization\u002Fpersonal name"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:eC},{type:b,tag:X,props:{},children:[{type:a,value:"Common name"}]},{type:a,value:", the name of your website (such as "},{type:b,tag:j,props:{},children:[{type:a,value:"espanso.org"}]},{type:a,value:k}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:eC},{type:b,tag:X,props:{},children:[{type:a,value:"Email address"}]}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Skip the challenge password"}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"At the end of this process, you should find a "},{type:b,tag:j,props:{},children:[{type:a,value:lJ}]},{type:a,value:" file containing your private key and a "},{type:b,tag:j,props:{},children:[{type:a,value:lK}]},{type:a,value:" file containing your certificate signing request. Keep both of them in a safe place as we will need them soon"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Submit the "},{type:b,tag:j,props:{},children:[{type:a,value:lK}]},{type:a,value:" file to the Certificate Authority"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aI,props:{id:lj},children:[{type:b,tag:t,props:{href:"#completing-the-verification-process",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lk}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After your request has been sent, the Certificate Authority will request additional information to verify your identity. This will usually take a few days or weeks, but in the end, you should receive a certificate."}]},{type:a,value:f},{type:b,tag:av,props:{id:"preparing-the-certificate"},children:[{type:b,tag:t,props:{href:"#preparing-the-certificate",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Preparing the Certificate"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After the certificate has been issued, we need to turn it into a format compatible with our target CI pipeline. The following steps are necessary for Sectigo-issued certificates, but keep in mind the process might be slightly different with other Certificate Authorities. Our goal is to obtain the code-signing certificate in "},{type:b,tag:j,props:{},children:[{type:a,value:"PFX"}]},{type:a,value:" format, encoded as base64."}]},{type:a,value:f},{type:b,tag:af,props:{id:ll},children:[{type:b,tag:t,props:{href:"#verify-that-the-certificate-and-private-key-match",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the actual conversion process, it’s a good idea to verify that the certificate being issued matches our private key (the one generated with the CSR)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To verify that, we need to run two commands:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:lL},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eD},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:he}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ai}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:eF}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"and also (with "},{type:b,tag:j,props:{},children:[{type:a,value:dS}]},{type:a,value:" being the certificate issued by the CA):"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:fJ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eD},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:hf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:dp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:eF}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If the output of the two previous commands match, then the certificate is correct!"}]},{type:a,value:f},{type:b,tag:aI,props:{id:ln},children:[{type:b,tag:t,props:{href:"#troubleshooting-expecting-trusted-certificate-error",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Troubleshooting “"},{type:b,tag:X,props:{},children:[{type:a,value:"Expecting: TRUSTED CERTIFICATE” error"}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In my case, the previous commands returned the following error:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:lM},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:lN}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:lP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:lQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lS},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:lU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:lV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:eG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:lW}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:lX}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:lY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:lZ}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This error is due to the "},{type:b,tag:j,props:{},children:[{type:a,value:dS}]},{type:a,value:" file being encoded in the wrong format. Luckily, we can solve this problem by following "},{type:b,tag:t,props:{href:"https:\u002F\u002Ffedericoterzi.com\u002Fblog\u002Ffixing-the-expecting-trusted-certificate-error-with-sectigo-certificates",rel:[K,L,M],target:N},children:[{type:a,value:"these steps"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:af,props:{id:lo},children:[{type:b,tag:t,props:{href:"#convert-the-certificate-to-pfx-format",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lp}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After verifying that the certificate matches our private key, we are ready to “bundle” all of them together into a PFX certificate. We will use "},{type:b,tag:j,props:{},children:[{type:a,value:hd}]},{type:a,value:" for this step as well:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:lI}]},{type:a,value:" pkcs12 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:eH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"out codesign"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:hg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"inkey "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dq},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:he}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ai}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\\certificate"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:dp}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Where:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:lJ}]},{type:a,value:" is the private key we generated during the CSR step."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:l_}]},{type:a,value:" is the public certificate issued by the Certificate Authority. In the case of Sectigo certificates, "},{type:b,tag:X,props:{},children:[{type:a,value:"this file is not the"}]},{type:a,value:g},{type:b,tag:X,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:dS}]}]},{type:a,value:" certificate directly issued by the CA, but refers to the converted certificate after "},{type:b,tag:t,props:{href:"https:\u002F\u002Ffedericoterzi.com\u002Fblog\u002Ffixing-the-expecting-trusted-certificate-error-with-sectigo-certificates\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"following these steps"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:l$}]},{type:a,value:" is the output PFX certificate file."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:lq},children:[{type:b,tag:t,props:{href:"#test-the-code-signing-process-manually",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lr}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the process to build an automatic signing pipeline, let’s verify that the code-signing certificate works as expected by attempting a manual signature."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We will need Microsoft’s "},{type:b,tag:j,props:{},children:[{type:a,value:ma}]},{type:a,value:" to perform the following steps. You can get it by installing the Windows 10 SDK using Visual Studio. More info on this "},{type:b,tag:t,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F31869552\u002Fhow-to-install-signtool-exe-for-windows-10",rel:[K,L,M],target:N},children:[{type:a,value:"StackOverflow thread"}]},{type:a,value:s}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can sign an executable by opening a terminal and running the following command:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:mb}]},{type:a,value:" sign "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"fd "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:"SHA256"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"p "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:mc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"ac "},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:md}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:dp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"f codesign"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:hg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"tr http"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"timestamp"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"sectigo"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:jV}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"rfc3161 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:"td sha256 yourProgram"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"exe"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"where:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mb}]},{type:a,value:" is the path to "},{type:b,tag:j,props:{},children:[{type:a,value:dT}]},{type:a,value:". This path will vary depending on the Windows 10 SDK version being installed, so make sure to update the path accordingly."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mc}]},{type:a,value:" should be replaced by your private key’s password (the one we choose during the CSR generation)"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"SectigoPublicCodeSigningRootR46_AAA.crt"}]},{type:a,value:" is the path to an appropriate "},{type:b,tag:Y,props:{},children:[{type:a,value:"intermediate certificate"}]},{type:a,value:". You can download the appropriate ones for "},{type:b,tag:t,props:{href:"https:\u002F\u002Fsupport.sectigo.com\u002Farticles\u002FKnowledge\u002FSectigo-Intermediate-Certificates",rel:[K,L,M],target:N},children:[{type:a,value:"Sectigo here"}]},{type:a,value:" and for "},{type:b,tag:t,props:{href:"https:\u002F\u002Fknowledge.digicert.com\u002Falerts\u002Fcode-signing-new-minimum-rsa-keysize.html",rel:[K,L,M],target:N},children:[{type:a,value:"DigiCert here"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:l$}]},{type:a,value:" is the path to the certificate we generated in the previous step."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"yourProgram.exe"}]},{type:a,value:" is the path to the executable we want to sign"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After running this command, right-click on the executable and choose “Properties” \u003E Digital Signatures tab. If everything was correct, you should now see an entry for your signature, as shown in the image below."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eo,src:"\u002Fposts\u002F2022-09-21-automatic-codesigning-on-windows-using-github-actions\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you don’t see a “Digital Signatures” tab, then it means the signature process didn’t complete successfully. Make sure to double check all the paths used in the above command."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"automating-the-signing-process-on-a-ci-pipeline"},children:[{type:b,tag:t,props:{href:"#automating-the-signing-process-on-a-ci-pipeline",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Automating the signing process on a CI pipeline"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now that we successfully signed an executable with our new certificate, we are ready to automate the process as part of a CI pipeline. For this example, we are going to use GitHub Actions as platform, but these steps could be adapted to most providers with minimal changes."}]},{type:a,value:f},{type:b,tag:af,props:{id:ls},children:[{type:b,tag:t,props:{href:"#a-note-on-ev-certificates",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lt}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you are using a company’s EV certificate, you will likely need a hardware token (a USB key sent by the certificate authority) to sign your executables. As a result, "},{type:b,tag:X,props:{},children:[{type:a,value:"you won’t be able to use cloud-hosted CI agents"}]},{type:a,value:", as there is no way for you to connect the hardware token there."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In these scenarios, a common solution is to maintain a physical server in your company’s office with the hardware token always connected. At this point, you can use GitHub’s self-hosted runners to execute the CI pipelines from your local server, which will be connected to the required hardware token."}]},{type:a,value:f},{type:b,tag:af,props:{id:lu},children:[{type:b,tag:t,props:{href:"#converting-the-certificate-to-base64",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lv}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In order to store the certificate as a GitHub Action "},{type:b,tag:Y,props:{},children:[{type:a,value:"Secret"}]},{type:a,value:", we need to encode it as base64 string. An easy way to do that on Windows is to run the following command:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,Z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"certutil "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"encode codesign"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:hg}]},{type:a,value:" base64cert"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:"txt"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you also want to use an intermediate certificate (the "},{type:b,tag:j,props:{},children:[{type:a,value:md}]},{type:a,value:" one we used above), you should generate the base64 of that one as well."}]},{type:a,value:f},{type:b,tag:af,props:{id:lw},children:[{type:b,tag:t,props:{href:"#preparing-github-secrets",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lx}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, we are ready to add the information we gathered so far as Secrets. Open your project’s repository and navigate to Settings \u003E Security \u003E Secrets \u003E Actions and add the following variables:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:me}]},{type:a,value:" should contain the certificate encoded as base64, the one we prepared in the previous section"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mf}]},{type:a,value:" should contain the private key’s password"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"(Optional) "},{type:b,tag:j,props:{},children:[{type:a,value:mg}]},{type:a,value:" the base64 of the intermediate certificate, if you’re using one"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:ly},children:[{type:b,tag:t,props:{href:"#automating-the-code-sign-process",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lz}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, we are finally ready to automate the code-signing process. For the sake of this example, we will sign an executable located in path: "},{type:b,tag:j,props:{},children:[{type:a,value:"target\u002Frelease\u002Fespanso.exe"}]},{type:a,value:" , make sure to update it with the actual path of your program."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The final Action step configuration will look like the following:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cE]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Sign executable\n  "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:hh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:mf}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.CODESIGN_PWD"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:mg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.CODESIGN_INTERMEDIATE_BASE64 "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:me}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.CODESIGN_BASE64"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,fH,v]},children:[{type:a,value:"\n    New-Item -ItemType directory -Path certificate\n    Set-Content -Path certificate\\certificate.txt -Value $env:CODESIGN_BASE64\n    certutil -decode certificate\\certificate.txt certificate\\certificate.pfx\n    Set-Content -Path certificate\\intermediate.txt -Value $env:CODESIGN_INTERMEDIATE_BASE64\n    certutil -decode certificate\\intermediate.txt certificate\\intermediate.crt"}]},{type:a,value:"\n\n    & 'C"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\u002FProgram Files (x86)\u002FWindows Kits\u002F10\u002Fbin\u002F10.0.22621.0\u002Fx86\u002Fsigntool.exe' sign \u002Ffd SHA256 \u002Fp $env"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"CODESIGN_PWD \u002Fac certificate\\intermediate.crt \u002Ff certificate\\certificate.pfx \u002Ftr \"http"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\u002F\u002Ftimestamp.sectigo.com\u002Frfc3161\" \u002Ftd sha256 target\u002Frelease\u002Fespanso.exe\n    \n    Remove"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:mh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"Recurse "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"Force certificate\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a nutshell, these are the steps performed above:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Load the secrets as environmental variables"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Load the base64 certificates and convert them back to their original format"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Invoke "},{type:b,tag:j,props:{},children:[{type:a,value:ma}]},{type:a,value:" with the relevant parameters"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Remove the temporary certificate files"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aI,props:{id:lA},children:[{type:b,tag:t,props:{href:"#notes-1",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:dQ}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"If you are not using an intermediate certificate, you can remove the "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fac certificate\\intermediate.crt"}]},{type:a,value:" flag and all the lines that contain “intermediate”"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aI,props:{id:lB},children:[{type:b,tag:t,props:{href:"#alternative-approaches",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:lC}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"There are also other approaches you might prefer:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"If your project is written in Rust, you could take inspiration from our PR: "},{type:b,tag:t,props:{href:mi,rel:[K,L,M],target:N},children:[{type:a,value:mi}]}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Use a pre-built GitHub Action such as: "},{type:b,tag:t,props:{href:mj,rel:[K,L,M],target:N},children:[{type:a,value:mj}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we discussed the process to get your Windows program code-signed, starting from the choice of certificate authority, all the way down to a fully automated CI pipeline. The article was mostly focused on Sectigo certificates and GitHub actions, but most steps can be applied to other certificate authorities and CI platforms."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you are also distributing your app on macOS, you might also enjoy my article on "},{type:b,tag:t,props:{href:hc,rel:[K,L,M],target:N},children:[{type:a,value:"automatic code-signing and notarization for macOS apps"}]},{type:a,value:s}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:lD},{type:b,tag:t,props:{href:hc,rel:[K,L,M],target:N},children:[{type:a,value:lE}]},{type:a,value:lF}]}]},dir:aZ,path:"\u002Farticles\u002F2022-09-21-automatic-codesigning-on-windows-using-github-actions",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"automatic-codesigning-on-windows-using-github-actions"},{slug:"2022-08-27-fixing-the-error-signersign-failed-during-signtool-codesigning",description:"Today I was working on the automatic code-signing CI for Espanso. As suggested by various articles, I went ahead and tried to sign the executable with this signtool command:",layout:aU,title:mk,author:aV,date:"2022-08-27T00:00:00.000Z",categories:"code sign code-signing signtool sign windows certificate sectigo",social_title:mk,toc:[],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:ml},{type:b,tag:t,props:{href:dr,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:mm},{type:b,tag:j,props:{},children:[{type:a,value:dT}]},{type:a,value:mn}]},{type:a,value:f},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[ds,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:mo},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:mp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:mq},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:mr}]},{type:a,value:" \u002Ff YOUR_PFX_HERE \u002Ftr http:\u002F\u002Ftimestamp.sectigo.com\u002Frfc3161 "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ms}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Unfortunately, I was greeted with this cryptic error message:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[ds,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"SignTool Error: An unexpected internal error has occurred.\nError information: "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Error: SignerSign() failed.\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"-2146869243\u002F0x80096005"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After a bit of investigation, it turned out to be due to a missing flag in the "},{type:b,tag:j,props:{},children:[{type:a,value:dT}]},{type:a,value:" invocation:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[ds,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Ftd sha256\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This flag instructs "},{type:b,tag:j,props:{},children:[{type:a,value:dT}]},{type:a,value:" to use a SHA256 digest for the RFC 3161 timestamp server, solving the above problem."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So in the end, I got it working with the following command:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[ds,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:mo},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:mp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:mq},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:mr}]},{type:a,value:" \u002Ff YOUR_PFX_HERE \u002Ftd sha256 \u002Ftr http:\u002F\u002Ftimestamp.sectigo.com\u002Frfc3161 "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ms}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"PS: I would also suggest adding the "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Ffd SHA256"}]},{type:a,value:" flag, as that instructs "},{type:b,tag:j,props:{},children:[{type:a,value:dT}]},{type:a,value:" to use the stronger SHA256 and not SHA1 for the actual signature."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:ml},{type:b,tag:t,props:{href:dr,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:mm},{type:b,tag:j,props:{},children:[{type:a,value:dT}]},{type:a,value:mn}]}]},dir:aZ,path:"\u002Farticles\u002F2022-08-27-fixing-the-error-signersign-failed-during-signtool-codesigning",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"fixing-the-error-signersign-failed-during-signtool-codesigning"},{slug:"2022-08-20-fixing-the-expecting-trusted-certificate-error-with-sectigo-certificates",description:"The other day, I finally received the code-signing certificate from Sectigo. In the confirmation email, they explained the steps to download the certificate, and after following them, I found myself with a user.crt file.",layout:aU,title:mt,author:aV,date:"2022-08-20T00:00:00.000Z",categories:"digital certificates certificate sectigo comodo code sign windows openssl",social_title:mt,toc:[],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:mu},{type:b,tag:j,props:{},children:[{type:a,value:dS}]},{type:a,value:mv}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Firstly, I wanted to make sure that the certificate matched my private key, so I tried the steps explained in "},{type:b,tag:t,props:{href:"https:\u002F\u002Fsupport.comodo.com\u002Findex.php?\u002FKnowledgebase\u002FArticle\u002FView\u002F684\u002F17\u002Fhow-do-i-verify-that-a-private-key-matches-a-certificate-openssl",rel:[K,L,M],target:N},children:[{type:a,value:"this Comodo article"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I started by getting the private key’s modulus hash with:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:lL},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eD},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hi}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ai}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:eF}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, I tried doing the same with the certificate:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:fJ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eD},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:hf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:dp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:eF}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Ideally, the two output would match, and that would indicate a correct certificate\u002Fprivate key pair."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Unfortunately, the second command crashed with this message:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:lM},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:lN}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:lP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:lQ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lS},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:lT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:lU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:lV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:eG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:lW}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:lX}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:lY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:lZ}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After a bit of researching, I found out that the "},{type:b,tag:j,props:{},children:[{type:a,value:dS}]},{type:a,value:" file downloaded from Sectigo was not in the correct "},{type:b,tag:j,props:{},children:[{type:a,value:"CRT"}]},{type:a,value:" format. Luckily, the solution was converting the certificate to the correct one, as explained in "},{type:b,tag:t,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F36565316\u002Fssl-unable-to-load-certificate\u002F51290883#51290883",rel:[K,L,M],target:N},children:[{type:a,value:"this Stackoverflow question"}]},{type:a,value:", with:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:fJ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"inform "},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:"DER"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:hf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:dp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:"out certificate"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:dp}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After this command, OpenSSL produced a new "},{type:b,tag:j,props:{},children:[{type:a,value:l_}]},{type:a,value:" file with the correct CRT format, which we could then use:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[Z,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:fJ},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eD},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:a,value:eE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:" certificate"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:dp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:eF}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Luckily, the hash of the private key’s modulo was equal to the certificate one, so we had a matching pair!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The same workaround is likely to work with Comodo certificates."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Up next: it’s finally time to code-sign "},{type:b,tag:t,props:{href:eI,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:" on Windows"}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:mu},{type:b,tag:j,props:{},children:[{type:a,value:dS}]},{type:a,value:mv}]}]},dir:aZ,path:"\u002Farticles\u002F2022-08-20-fixing-the-expecting-trusted-certificate-error-with-sectigo-certificates",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"fixing-the-expecting-trusted-certificate-error-with-sectigo-certificates"},{slug:"2022-08-15-automatic-code-signing-and-notarization-for-macos-apps-using-github-actions",description:"After almost 3 years, we finally took the necessary steps to code-sign Espanso. This article covers the step I’ve taken to integrate the code-signing and notarization steps in our automatic CI flow. This process is built with GitHub Actions in mind, but you can easily port it to your CI provider of choice.",layout:aU,title:"Automatic Code-signing and Notarization for macOS apps using GitHub Actions",author:aV,date:"2022-08-15T00:00:00.000Z",categories:"ci github actions macos code sign signing notarize notarization automatic certificate",social_title:"Automatic Code-signing and Notarization for macOS apps",social_subtitle:lc,toc:[{id:mw,depth:ad,text:mx},{id:my,depth:ad,text:mz},{id:mA,depth:ad,text:mB},{id:mC,depth:ad,text:mD},{id:mE,depth:ad,text:mF},{id:mG,depth:ad,text:mH},{id:mI,depth:ad,text:mJ}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:mK},{type:b,tag:t,props:{href:eI,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:mL}]},{type:a,value:f},{type:a,value:f},{type:b,tag:av,props:{id:"prerequisites"},children:[{type:b,tag:t,props:{href:"#prerequisites",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Prerequisites"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Having a paid "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdeveloper.apple.com\u002Fprograms\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Apple Developer Program"}]},{type:a,value:" subscription. This costs about ~$99 per year depending on your country and is necessary to generate the required certificates."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Having a CI that builds your final App bundle. This bundle can be generated in a lot of different ways, just keep in mind we’ll need the final "},{type:b,tag:j,props:{},children:[{type:a,value:"bundle.app"}]},{type:a,value:" inside the CI to perform the signing and notarization. This article won't cover the bundle generation, so please take care of that beforehand if you haven't already."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"generating-the-certificate"},children:[{type:b,tag:t,props:{href:"#generating-the-certificate",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Generating the Certificate"}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you have already generated a certificate for your app, feel free to skip this section"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In order to sign the app, we need a valid certificate issued from Apple. You can issue one following these steps:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Navigate to the Apple Developer portal into the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdeveloper.apple.com\u002Faccount\u002Fresources\u002Fcertificates\u002Flist",rel:[K,L,M],target:N},children:[{type:a,value:"Certificates, Identifiers & Profiles section"}]},{type:a,value:" and select “Create a New Profile”"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"You’ll be asked to choose a certificate type, select “Developer ID Application” from the options and then continue"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:mM,src:"\u002Fposts\u002Fmacos-code-sign\u002FUntitled.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:mM}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"For the “Developer ID Certificate Intermediary” choose "},{type:b,tag:j,props:{},children:[{type:a,value:"G2 Sub-CA (Xcode 11.4.1 or later)"}]},{type:a,value:" and keep this webpage open, we’ll get back to it later"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Certificate Intermediary selection",src:"\u002Fposts\u002Fmacos-code-sign\u002FUntitled%201.png"},children:[]}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Then, we need to generate a "},{type:b,tag:Y,props:{},children:[{type:a,value:"Certificate Signing Request (CSR)."}]},{type:a,value:" We can do so by opening the “Keychain Access” app on macOS, selecting "},{type:b,tag:j,props:{},children:[{type:a,value:"Certificate Assistant \u003E Request a Certificate From a Certificate Authority..."}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Generate a CSR",src:"\u002Fposts\u002Fmacos-code-sign\u002FUntitled%202.png"},children:[]}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You’ll be prompted for some information, make sure to specify the same email you used for your paid Apple Developer subscription, then check the "},{type:b,tag:j,props:{},children:[{type:a,value:"Save to Disk"}]},{type:a,value:" option, and click "},{type:b,tag:j,props:{},children:[{type:a,value:"Continue"}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Certificate information",src:"\u002Fposts\u002Fmacos-code-sign\u002FScreenshot_2022-08-15_at_11.26.54.png"},children:[]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This will create a "},{type:b,tag:j,props:{},children:[{type:a,value:"CertificateSigningRequest.certSigningRequest"}]},{type:a,value:" file in your location of choice. Go back to the “Create a New Certificate” webpage we opened earlier and click on “Choose File”, selecting the certificate request file we just created. Finally, click “Continue”"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"On the Apple Developer portal, you should now see your new certificate. Download it and open it using the "},{type:b,tag:j,props:{},children:[{type:a,value:mN}]},{type:a,value:" app on your mac. It should look like this:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Final certificate inside Keychain Access",src:"\u002Fposts\u002Fmacos-code-sign\u002FScreenshot_2022-08-15_at_11.39.43.png"},children:[]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Please note down the full name of the certificate (such as "},{type:b,tag:j,props:{},children:[{type:a,value:"Developer ID Application: Your Name (K1234)"}]},{type:a,value:", as we will need it later)"}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This certificate is ready to be used locally, but we want to export it in a format that is usable inside an automated (and headless) CI environment. For this reason, we are going to use the same trick from "},{type:b,tag:t,props:{href:mO,rel:[K,L,M],target:N},children:[{type:a,value:"this great article"}]},{type:a,value:" by Localazy, exporting the certificate file and then encoding it as base64."}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Select both the certificate (Developer ID Application: …) and the private key (the item below), then right click and choose “Export 2 items…”"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the panel that opens up, select a target location for the certificate file and choose "},{type:b,tag:j,props:{},children:[{type:a,value:"Personal Information Exchange (.p12)"}]},{type:a,value:" format."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You’ll be asked for a password, generate a strong one using your tool of choice and note it down, as we’ll need it in the upcoming steps"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Open a terminal, "},{type:b,tag:j,props:{},children:[{type:a,value:"cd"}]},{type:a,value:" into the directory in which you created the certificate file, and convert it into base64 using this command:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ds]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"base64 Certificates "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:" Certificates.base64\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This command will create a new "},{type:b,tag:j,props:{},children:[{type:a,value:mP}]},{type:a,value:" file with the certificate encoded as base64 string. Keep this file around, as we’ll need it when populating the GitHub Actions secrets."}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"gathering-the-notarization-information"},children:[{type:b,tag:t,props:{href:"#gathering-the-notarization-information",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Gathering the Notarization information"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the GitHub Actions setup, we need to gather some more information for the notarization step:"}]},{type:a,value:f},{type:b,tag:af,props:{id:mw},children:[{type:b,tag:t,props:{href:"#generating-an-app-specific-password",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:mx}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We need to generate an Apple’s "},{type:b,tag:t,props:{href:"https:\u002F\u002Fsupport.apple.com\u002Fen-us\u002FHT204397",rel:[K,L,M],target:N},children:[{type:a,value:"app-specific password"}]},{type:a,value:" for the notarization step:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Navigate and sign in to "},{type:b,tag:t,props:{href:"https:\u002F\u002Fappleid.apple.com\u002Faccount\u002Fhome",rel:[K,L,M],target:N},children:[{type:a,value:"appleid.apple.com"}]},{type:a,value:" using the same account as your paid Apple Developer subscription"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"On the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fappleid.apple.com\u002Faccount\u002Fmanage",rel:[K,L,M],target:N},children:[{type:a,value:"Sign-in and Security page"}]},{type:a,value:", select “App-Specific Passwords”"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"App-specific password",src:"\u002Fposts\u002Fmacos-code-sign\u002FUntitled%203.png"},children:[]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then select “Generate App-Specific Password”, and give it a meaningful name, such as “Project CI Notarization”"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, enter your account password and finally “Continue”"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You should now see a generated password, please note it down as we’ll need it later."}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:my},children:[{type:b,tag:t,props:{href:"#getting-your-team-id",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:mz}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Head over to the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdeveloper.apple.com\u002Faccount\u002F#!\u002Fmembership",rel:[K,L,M],target:N},children:[{type:a,value:"membership page"}]},{type:a,value:", logging in if necessary"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Inside the page, you should see a "},{type:b,tag:j,props:{},children:[{type:a,value:mQ}]},{type:a,value:" field. Note it down, as we will need it later"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"setting-up-the-github-actions-pipeline"},children:[{type:b,tag:t,props:{href:"#setting-up-the-github-actions-pipeline",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Setting up the GitHub Actions pipeline"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now that we gathered all the necessary information, it’s time to set up the GitHub Actions steps that will code-sign and notarize our app."}]},{type:a,value:f},{type:b,tag:af,props:{id:mA},children:[{type:b,tag:t,props:{href:"#setting-up-the-secrets",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:mB}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Navigate to your GitHub project Settings \u003E Security \u003E Secrets \u003E Actions. Here we’ll need to register several secrets for the process to work correctly, so let’s start:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"PROD_MACOS_CERTIFICATE"}]},{type:a,value:" should contain the base64 of the certificate we generated earlier. In particular, you should paste the content of the "},{type:b,tag:j,props:{},children:[{type:a,value:mP}]},{type:a,value:" file here"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"PROD_MACOS_CERTIFICATE_NAME"}]},{type:a,value:" should contain the full certificate name, such as "},{type:b,tag:j,props:{},children:[{type:a,value:"Developer ID Application: Your Name (K1234567)"}]}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"PROD_MACOS_CERTIFICATE_PWD"}]},{type:a,value:" should contain the password you choose when exporting the certificate from the "},{type:b,tag:j,props:{},children:[{type:a,value:mN}]},{type:a,value:" app"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mR}]},{type:a,value:" should contain your apple developer email, the same you use for the Apple Developer subscription"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mS}]},{type:a,value:" should contain the app-specific password we generated earlier"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mT}]},{type:a,value:" should contain the "},{type:b,tag:j,props:{},children:[{type:a,value:mQ}]},{type:a,value:" we got earlier from the membership page"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"PROD_MACOS_CI_KEYCHAIN_PWD"}]},{type:a,value:" should contain a strong, randomly generated password. Feel free to use your tool of choice for this."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you did everything right, you should end up with these 7 secrets in your GitHub Actions:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Github Secrets",src:"\u002Fposts\u002Fmacos-code-sign\u002FUntitled%204.png"},children:[]}]},{type:a,value:f},{type:b,tag:af,props:{id:mC},children:[{type:b,tag:t,props:{href:"#defining-the-code-signing-step",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:mD}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now that we have all our secrets in place, we are ready to define the code-signing step. For the sake of these examples, we assume that the app bundle will be placed in the "},{type:b,tag:j,props:{},children:[{type:a,value:mU}]},{type:a,value:" path inside the CI environment. Make sure to replace it with the appropriate location of your app."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is what the GitHub Actions step should look like in the end, with comments explaining the various sections:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cE]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Codesign app bundle\n  "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:mV}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:hh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" \n    "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"MACOS_CERTIFICATE"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.PROD_MACOS_CERTIFICATE "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"MACOS_CERTIFICATE_PWD"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.PROD_MACOS_CERTIFICATE_PWD "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"MACOS_CERTIFICATE_NAME"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.PROD_MACOS_CERTIFICATE_NAME "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"MACOS_CI_KEYCHAIN_PWD"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.PROD_MACOS_CI_KEYCHAIN_PWD "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,fH,v]},children:[{type:a,value:"\n    # Turn our base64-encoded certificate back to a regular .p12 file"}]},{type:a,value:"\n    \n    echo $MACOS_CERTIFICATE "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:a,value:" base64 "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"decode "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:" certificate.p12\n\n    "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# We need to create a new keychain, otherwise using the certificate will prompt"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# with a UI dialog asking for the certificate password, which we can't"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# use in a headless CI environment"}]},{type:a,value:"\n    \n    security create"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:hj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"p \"$MACOS_CI_KEYCHAIN_PWD\" build.keychain \n    security default"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:hj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"s build.keychain\n    security unlock"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:hj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"p \"$MACOS_CI_KEYCHAIN_PWD\" build.keychain\n    security import certificate.p12 "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"k build.keychain "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"P \"$MACOS_CERTIFICATE_PWD\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"T \u002Fusr\u002Fbin\u002Fcodesign\n    security set"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"partition"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"list "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"S apple"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"tool"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:mW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:mX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"s "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"k \"$MACOS_CI_KEYCHAIN_PWD\" build.keychain\n\n    "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# We finally codesign our app bundle, specifying the Hardened runtime option"}]},{type:a,value:"\n    \n    \u002Fusr\u002Fbin\u002Fcodesign "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"force "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"s \"$MACOS_CERTIFICATE_NAME\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"options runtime target\u002Fmac\u002FEspanso.app "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"v\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A note before proceeding further:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Specifying the "},{type:b,tag:j,props:{},children:[{type:a,value:"--options runtime"}]},{type:a,value:" flag for the "},{type:b,tag:j,props:{},children:[{type:a,value:mX}]},{type:a,value:" command enables the "},{type:b,tag:t,props:{href:mY,rel:[K,L,M],target:N},children:[{type:a,value:"Hardened Runtime"}]},{type:a,value:" for our app. This is necessary to pass the following notarization step (otherwise it fails when notarizing), but this might interfere with your app, as it disables JIT and other dynamic features. If you need them, you’ll need to specify the exceptions in your app’s entitlement file, as explained in the "},{type:b,tag:t,props:{href:mY,rel:[K,L,M],target:N},children:[{type:a,value:"hardened runtime"}]},{type:a,value:" documentation."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:mE},children:[{type:b,tag:t,props:{href:"#defining-the-notarization-step",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:mF}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After the code-signing step, our app is ready to be Notarized, which is necessary to prevent macOS from showing a scary warning to our users when opening the app."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The GitHub Action step should look like the following. This again assumes that the app bundle is located in the "},{type:b,tag:j,props:{},children:[{type:a,value:mU}]},{type:a,value:" path, so adapt it accordingly:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cE]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Notarize app bundle\""}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:mV}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:hh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:mR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.PROD_MACOS_NOTARIZATION_APPLE_ID "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:mT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.PROD_MACOS_NOTARIZATION_TEAM_ID "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:mS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" secrets.PROD_MACOS_NOTARIZATION_PWD "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:fG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,fH,v]},children:[{type:a,value:"\n    # Store the notarization credentials so that we can prevent a UI password dialog\n    # from blocking the CI"}]},{type:a,value:"\n\n    echo \"Create keychain profile\"\n    xcrun notarytool store"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"credentials \"notarytool"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:mZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:mW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"id \"$PROD_MACOS_NOTARIZATION_APPLE_ID\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"team"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"id \"$PROD_MACOS_NOTARIZATION_TEAM_ID\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"password \"$PROD_MACOS_NOTARIZATION_PWD\"\n\n    "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# We can't notarize an app bundle directly, but we need to compress it as an archive."}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# Therefore, we create a zip file containing our app bundle, so that we can send it to the"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# notarization service"}]},{type:a,value:"\n\n    echo \"Creating temp notarization archive\"\n    ditto "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"c "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"k "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"keepParent \"target\u002Fmac\u002FEspanso.app\" \"notarization.zip\"\n\n    "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# Here we send the notarization request to the Apple's Notarization service, waiting for the result."}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# This typically takes a few seconds inside a CI environment, but it might take more depending on the App"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# characteristics. Visit the Notarization docs for more information and strategies on how to optimize it if"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# you're curious"}]},{type:a,value:"\n\n    echo \"Notarize app\"\n    xcrun notarytool submit \"notarization.zip\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:m_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:m$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:mZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"wait\n\n    "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# Finally, we need to \"attach the staple\" to our executable, which will allow our app to be"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# validated by macOS even when an internet connection is not available."}]},{type:a,value:"\n    echo \"Attach staple\"\n    xcrun stapler staple \"target\u002Fmac\u002FEspanso.app\"\n"}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:mG},children:[{type:b,tag:t,props:{href:"#bonus-troubleshooting-notarization-issues",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:mH}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While you are testing the notarization process, it might happen that the above GitHub Action step fails, with an error like:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cE]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"Current status"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Invalid"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bq}]},{type:a,value:".Processing complete\n  "},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" \u003CRANDOM"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:na},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ai,al]},children:[{type:a,value:"status"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Invalid\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In these cases, you can view the notarization logs by using the following command (replacing "},{type:b,tag:j,props:{},children:[{type:a,value:"\u003CRANDOM-ID\u003E"}]},{type:a,value:" with the actual one, which you can see in the step logs)"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cE]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"xcrun notarytool log \u003CRANDOM"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:na},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:m_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:m$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:D}]},{type:a,value:"profile\"\n"}]}]}]},{type:a,value:f},{type:b,tag:av,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Your app should now be fully code-signed and notarized, great job! As a result, no more scary warnings will be shown to your users:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Warnings before and after",src:"\u002Fposts\u002Fmacos-code-sign\u002FUntitled%205.png"},children:[]}]},{type:a,value:f},{type:b,tag:af,props:{id:mI},children:[{type:b,tag:t,props:{href:"#acknowledgments",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:mJ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This article wouldn’t have been possible without "},{type:b,tag:t,props:{href:mO,rel:[K,L,M],target:N},children:[{type:a,value:"this awesome article"}]},{type:a,value:" by Localazy for the code-signing steps and "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fakeru-inc\u002Fxcnotary\u002Fissues\u002F22#issuecomment-1179170957",rel:[K,L,M],target:N},children:[{type:a,value:"this GitHub comment"}]},{type:a,value:" for the Notarization part, kudos to "},{type:b,tag:t,props:{href:"https:\u002F\u002Ftwitter.com\u002Fhonzabilek4",rel:[K,L,M],target:N},children:[{type:a,value:"Jan Bílek"}]},{type:a,value:bf},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fbradking",rel:[K,L,M],target:N},children:[{type:a,value:"Brad King"}]},{type:a,value:ay}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:mK},{type:b,tag:t,props:{href:eI,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:mL}]}]},dir:aZ,path:"\u002Farticles\u002F2022-08-15-automatic-code-signing-and-notarization-for-macos-apps-using-github-actions",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"automatic-code-signing-and-notarization-for-macos-apps-using-github-actions"},{slug:"2022-05-02-building-robust-applications-by-making-invalid-states-unrepresentable",description:hk,layout:aU,title:nb,author:aV,date:"2022-05-02T00:00:00.000Z",categories:"react trick guide robust applications invalid states unrepresentable typescript static types",social_title:nb,social_subtitle:hl,toc:[{id:nc,depth:ad,text:nd},{id:ne,depth:ad,text:nf},{id:ng,depth:ad,text:nh},{id:ni,depth:ad,text:hl},{id:nj,depth:ad,text:nk}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hk}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we are going to discuss a functional programming technique that can greatly improve the reliability of your front-end applications: making invalid states unrepresentable. Although these concepts can be applied to most frameworks and languages, we are going to focus on React applications written in TypeScript."}]},{type:a,value:f},{type:b,tag:af,props:{id:nc},children:[{type:b,tag:t,props:{href:"#our-example",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:nd}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To start our discussion, we are going to focus on a simple login form as an example (you can find the complete code in "},{type:b,tag:t,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Freactinvalidstatesunrepresentable-bad-tbwvi?file=\u002Fsrc\u002FApp.tsx",rel:[K,L,M],target:N},children:[{type:a,value:"this Codesanbox"}]},{type:a,value:").\nIn a nutshell, the example is composed of:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:nl},{type:b,tag:j,props:{},children:[{type:a,value:nm}]},{type:a,value:" component, which contains the input fields and invokes a callback when the user clicks on "},{type:b,tag:j,props:{},children:[{type:a,value:nn}]}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:nl},{type:b,tag:j,props:{},children:[{type:a,value:dU}]},{type:a,value:" function, which simulates a network call to a login endpoint. If successful, this function returns a "},{type:b,tag:Y,props:{},children:[{type:a,value:d}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:fo},{type:b,tag:j,props:{},children:[{type:a,value:dt}]},{type:a,value:" component, which keeps the application state and displays the appropriate messages\u002Fcomponents."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Login example",src:"\u002Fposts\u002Fstates-unrepresentable\u002Flogin_example_1.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Here's the complete code:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:no},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:du}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:nm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n  onLogin\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:np}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" setUser"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:nq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" setPass"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:"Insert login "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"details"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"use "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"'test'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dO}]},{type:a,value:" password "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:" correct logins"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:nr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"user\""}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:cp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:ns},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:"input\n        type"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"text\""}]},{type:a,value:nt},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:nu},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"setUser"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nv},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:hn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:nr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:nw}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:"Password"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:ns},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:"input\n        name"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:nw}]},{type:a,value:fL},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"password\""}]},{type:a,value:nt},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:nq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:nu},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"setPass"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:fK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nv},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:hn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:fM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:np}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:nn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:fN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Simulate a login request"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:nx}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:nx}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ny},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" reject"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"setTimeout"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"pass "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:nz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Return a fake user token"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ny}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"c6041ffc-5e13-4f6d-bb33-bf9d3ae20262\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"reject"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"Error"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"invalid password\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"1000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:fO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" setLoading"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" setUserToken"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,nA]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,nB,V]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" setError"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,nA]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,nB,V]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:dv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:cQ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F If we don't reset them here, we might have inconsistencies"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F after multiple logins"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ho}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dW},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dw},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:nC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ho}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:nD}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:dx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:hp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:dw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:hs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ht},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:nE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hu},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:nF},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:hv},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hw},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:hx},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:fM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hz},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:fN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:ne},children:[{type:b,tag:t,props:{href:"#the-problem",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:nf}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The example proposed above works as expected, but it's not very maintainable. The main problem lies in the fact that the different app-state fields (loading, error, userToken) are stored and updated independently."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Suppose at some point, a coworker not particularly familiar with this area of the codebase changes the "},{type:b,tag:j,props:{},children:[{type:a,value:cQ}]},{type:a,value:" logic to fit some new requirements. As part of the process, they mistakenly forget to reset the error state with "},{type:b,tag:j,props:{},children:[{type:a,value:nG}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:cQ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F The coworker deletes the following line"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F setError(undefined);  \u003C- this one gets deleted"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dW},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dw},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:nC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ho}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:nD}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The coworker now attempts to log in and it works as expected:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Login seems to work as expected",src:"\u002Fposts\u002Fstates-unrepresentable\u002Flogin_example_2.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The happy coworker then proceeds to create PR and, with a non-zero probability, the PR gets approved and goes into staging\u002Fproduction."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Happy ending, right? Not exactly. The application can now enter an "},{type:b,tag:Y,props:{},children:[{type:a,value:"inconsistent state"}]},{type:a,value:" when a user gets the first login wrong and the second one correct:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Login inconsistent state",src:"\u002Fposts\u002Fstates-unrepresentable\u002Flogin_example_3.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:gS},{type:b,tag:X,props:{},children:[{type:a,value:"the error message is still being shown after a successful login attempt"}]},{type:a,value:".\nThis is happening because the "},{type:b,tag:j,props:{},children:[{type:a,value:nG}]},{type:a,value:" call has been removed, and as a result, the error message is not being reset when performing a new login attempt."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It might be easy to blame the coworker for such an oversight, but actually, the problem lies in the way the application state was originally structured. By having the "},{type:b,tag:j,props:{},children:[{type:a,value:bE}]},{type:a,value:fR},{type:b,tag:j,props:{},children:[{type:a,value:fO}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:cP}]},{type:a,value:" states being updated independently, we made it easier to get into an inconsistent state."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Remember, "},{type:b,tag:X,props:{},children:[{type:a,value:"the best systems are the ones that make it harder to do wrong things."}]},{type:a,value:" In the following sections, we're going to analyze a design that could have prevented such mistakes."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the previous example, I chose an hypothetical coworker as the person doing the mistake. I'm definitely not implying that only coworkers make mistakes, everyone does. I do plenty of mistakes on a daily basis :)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:ng},children:[{type:b,tag:t,props:{href:"#a-better-approach-but-still-not-optimal",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:nh}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I hear some of you screaming: \""},{type:b,tag:Y,props:{},children:[{type:a,value:"You should have used useReducer\u002FRedux\u002FZustand\u002F{random pokemon name} instead of those multiple useState!"}]},{type:a,value:dy}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Indeed, in real-world scenarios, you would have likely used a more structured approach to handle the app state, but "},{type:b,tag:X,props:{},children:[{type:a,value:"that doesn't necessarily solve the problem of invalid states"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For example, let's refactor the "},{type:b,tag:j,props:{},children:[{type:a,value:dt}]},{type:a,value:" code to use React's "},{type:b,tag:t,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#usereducer",rel:[K,L,M],target:N},children:[{type:a,value:eN}]},{type:a,value:" instead of multiple "},{type:b,tag:j,props:{},children:[{type:a,value:cj}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F This is the app state"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:fS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:fT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:dv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fV},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:fW},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:fT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F The various actions we can use to update that state"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fV},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:dv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nK}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:nM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:nN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:nO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:nP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:nQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:nR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:fW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:nS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:dZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:nT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:hA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dY}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:nW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:eO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:cQ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dW},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dw},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:nX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:gN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:dx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:hp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:dw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:hs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ht},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nE},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hu},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nF},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:hv},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hw},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:hx},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:cP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:fM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hz},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:fN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This version improves our example on multiple fronts:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"The handlers ("},{type:b,tag:j,props:{},children:[{type:a,value:cQ}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:dx}]},{type:a,value:") don't need to know about the internal state representation anymore, but can simply dispatch actions in a "},{type:b,tag:Y,props:{},children:[{type:a,value:"declarative"}]},{type:a,value:" way."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"It's harder to forget updating a slice of the state, as they are handled in a central place (the "},{type:b,tag:j,props:{},children:[{type:a,value:eO}]},{type:a,value:" function) instead of being scattered around handlers."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"That said, despite making it harder to make the state inconsistent, it's still possible to do so."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let's say that our product manager requests to implement a \"failed attempts\" counter. In a rush, we modify the "},{type:b,tag:j,props:{},children:[{type:a,value:hB}]},{type:a,value:" case of the reducer to be based on the previous state:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:ez},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bq}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:hA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:"\n        failedAttempts"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" state"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"failedAttempts "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:nY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As a result, the \"Loading...\" label is still shown after a failed login attempt:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Inconsistent state",src:"\u002Fposts\u002Fstates-unrepresentable\u002Finvalid-state.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Of course, this is another silly oversight that would have been easy to spot. We forgot to set "},{type:b,tag:j,props:{},children:[{type:a,value:nZ}]},{type:a,value:", and instead took the previous state value ("},{type:b,tag:j,props:{},children:[{type:a,value:O}]},{type:a,value:") using the spread operator "},{type:b,tag:j,props:{},children:[{type:a,value:"...state"}]},{type:a,value:". Unfortunately, in real-world systems it's easy to make such mistakes when the state is made of many fields, and such oversights might not be as easy to spot."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Luckily, we can take this solution a step further. What if we let the compiler spot such mistakes? The answer is "},{type:b,tag:X,props:{},children:[{type:a,value:"making invalid states unrepresentable"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:af,props:{id:ni},children:[{type:b,tag:t,props:{href:"#making-invalid-states-unrepresentable",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:hl}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let's start from the previous state representation:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:fS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:fT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:dv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fV},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The first question we should be asking ourselves is: "},{type:b,tag:Y,props:{},children:[{type:a,value:"what are the possible states of this system?"}]},{type:a,value:" There is no single best answer, but a possible representation could be:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Idle"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Login pending"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Login success"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Login failure"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If the "},{type:b,tag:j,props:{},children:[{type:a,value:"idle"}]},{type:a,value:" state doesn't make sense to you, keep in mind we are trying to model "},{type:b,tag:Y,props:{},children:[{type:a,value:"all"}]},{type:a,value:" the possible states of this system. Idle represents the state of the system before the user makes a login attempt."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, we can think about which "},{type:b,tag:Y,props:{},children:[{type:a,value:"fields and values"}]},{type:a,value:" those states can have:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Idle\n"},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:hC}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Login pending\n"},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"loading = true"}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Login success\n"},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:hC}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"userToken = string"}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Login failure\n"},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:hC}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"error = Error\u002Funknown\u002Fwhatever is relevant"}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, we can translate these states into code using Typescript's "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.typescriptlang.org\u002Fdocs\u002Fhandbook\u002Ftypescript-in-5-minutes-func.html#discriminated-unions",rel:[K,L,M],target:N},children:[{type:a,value:"Discriminated unions"}]},{type:a,value:" (also known as "},{type:b,tag:Y,props:{},children:[{type:a,value:"Algebraic Data Types"}]},{type:a,value:gt}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:fS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:n_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:n$},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:dv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note how for each state, we are explicitly specifying which fields are present and, for some of them, even their value. Discriminated unions give us two superpowers:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"We don't need to add optional fields everywhere, nor do we need to check for undefined values. If a state has "},{type:b,tag:j,props:{},children:[{type:a,value:"type = \"success\""}]},{type:a,value:" then Typescript "},{type:b,tag:Y,props:{},children:[{type:a,value:"guarantees"}]},{type:a,value:" that the "},{type:b,tag:j,props:{},children:[{type:a,value:cP}]},{type:a,value:" field will be available. In the same way, we won't be able to access the "},{type:b,tag:j,props:{},children:[{type:a,value:cP}]},{type:a,value:" if the state is "},{type:b,tag:j,props:{},children:[{type:a,value:hB}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F This compiles correctly"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:cP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F This doesn't (and it's good!)"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:cP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"We won't be able to set inconsistent states in the reducer"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Updating our previous example with the new approach, we get:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[da,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:fS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:n_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:n$},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:dv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:fW},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:fT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fV},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fU},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:dv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nK}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cR},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:nL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:nM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:nN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:nO},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aC}]},{type:a,value:nP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:nQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:nR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:fW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:nS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:dZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:fL},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:O}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:fL},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:nT},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bq}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:fL},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:hA},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:nV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dY}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:nW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:eO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:cQ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dW},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dw},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:nX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:dW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:gN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:dx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:hp},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hr},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:dw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:hs},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ht},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ck}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hu},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:b$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:hv},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hw},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:hx},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:cP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:fM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:hz},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:fN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ah}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, Typescript will make sure that the state is always in a consistent state. For example, the previous mistake (forgetting "},{type:b,tag:j,props:{},children:[{type:a,value:nZ}]},{type:a,value:go},{type:b,tag:j,props:{},children:[{type:a,value:hB}]},{type:a,value:" case due to the spread operator) won't compile:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Typescript fails to compile an invalid state",src:"\u002Fposts\u002Fstates-unrepresentable\u002Ftypescript1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We made "},{type:b,tag:Y,props:{},children:[{type:a,value:"invalid states unrepresentable"}]},{type:a,value:" 😎"}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Note: You might be wondering why we added the "},{type:b,tag:j,props:{},children:[{type:a,value:fO}]},{type:a,value:" field to all states. The reason is that I thought it would make the example easier to understand. But in this simple scenario, we could drop the "},{type:b,tag:j,props:{},children:[{type:a,value:fO}]},{type:a,value:" field entirely and only show the loading message when the state is pending ("},{type:b,tag:j,props:{},children:[{type:a,value:"state.type === 'pending'"}]},{type:a,value:fc}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:af,props:{id:nj},children:[{type:b,tag:t,props:{href:"#final-thoughts",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:nk}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"All right! We started from a problematic example and gradually improved the way our state is represented, making the app more robust along the way."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It's important to consider these techniques as an additional tool you have at your disposal rather than absolute truths. There might be cases where these techniques are impractical for several reasons. As always, use the right tool for the job!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you're interested, you can find the complete code for our final solution in "},{type:b,tag:t,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Freactinvalidstatesunrepresentable-good-9l8pym?file=\u002Fsrc\u002FApp.tsx",rel:[K,L,M],target:N},children:[{type:a,value:"this Codesandbox"}]},{type:a,value:s}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hk}]}]},dir:aZ,path:"\u002Farticles\u002F2022-05-02-building-robust-applications-by-making-invalid-states-unrepresentable",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"building-robust-applications-by-making-invalid-states-unrepresentable"},{slug:"2022-02-04-optimizing-list-in-react-solving-performance-problems-and-anti-patterns",description:hE,layout:aU,title:"Optimizing Lists in React - Solving Performance Problems and Anti-patterns",author:aV,date:"2022-02-04T00:00:00.000Z",categories:"react list performance optimizations patterns anti-patterns",social_title:"Optimizing Lists in React",social_subtitle:"Solving Performance Problems and Anti-patterns",toc:[{id:oa,depth:ad,text:ob},{id:oc,depth:ad,text:od},{id:oe,depth:ad,text:of},{id:og,depth:ad,text:oh}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hE}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It’s easy to write inefficient code in React, with useless re-renders being the common enemy. Usually, you start from a simple application and gradually build features on top of it. At first, the application is small enough to make the inefficiencies unnoticeable, but as the complexity grows, so does the component hierarchy, and thus, the number of re-renders. Then, once the application speed becomes unbearable (according to your standards), you start profiling and optimizing the problematic areas."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we are going to discuss the optimization process for lists, which are notorious sources of performance problems in React. Most of these techniques apply to both React and React Native applications."}]},{type:a,value:f},{type:b,tag:av,props:{id:"starting-from-a-problematic-example"},children:[{type:b,tag:t,props:{href:"#starting-from-a-problematic-example",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Starting from a problematic example"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We’ll start from a problematic example and gradually discuss the process of identifying and solving the different issues."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Problematic List example",src:"\u002Fposts\u002Freact-list\u002Freact_list_example.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The proposed example is a simple list of selectable items, with a few performance problems. Clicking on an item toggles the selection status, but the operation is visibly laggy. Our goal is to make the selection feel snappy. You can find the complete code as follows (a "},{type:b,tag:t,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Fcommonreactlistmistakes-9f3ex",rel:[K,L,M],target:N},children:[{type:a,value:"Codesandbox"}]},{type:a,value:" is also available)."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,oi]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:no},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:du}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Create mock data with elements containing increasing items"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" data "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"Array"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:oj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:"fill"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:"_"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:hF}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:fX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:nY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:ok}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,"template-string"]},children:[{type:b,tag:c,props:{className:[d,ol,v]},children:[{type:a,value:om}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:mh}]},{type:b,tag:c,props:{className:[d,"interpolation"]},children:[{type:b,tag:c,props:{className:[d,on,e]},children:[{type:a,value:"${"}]},{type:a,value:ok},{type:b,tag:c,props:{className:[d,on,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,ol,v]},children:[{type:a,value:om}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:eH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:eJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:dt}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F An array containing the selected items"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:oo},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Select or unselect the given item"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:dV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:fZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:f_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eP}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:"className"}]},{type:b,tag:c,props:{className:[d,hG]},children:[{type:b,tag:c,props:{className:[d,e,hH]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dy}]},{type:a,value:dt},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dy}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:"List Example"}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:dA}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:cV}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:df}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:C}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:dA}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:hI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:by}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:by}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:op},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:oq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:or},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:os}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:ot}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:ou}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:I}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:ov}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ow},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ox}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:oy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,dJ]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F This is an example of an expensive JS operation that we might"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F execute in the render function to simulate a load."}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F In real-world applications, this operation could be either a custom"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F JS elaboration or just a complex render"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:a,value:hJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Here we use selected just because we want to simulate"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F an operation that depends on the props"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" total "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" selected "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:fX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:fX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"200000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:hF},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"++"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n    total "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:oz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,eq,V]},children:[{type:a,value:"Math"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:"random"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:" total"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae}]}]}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you want to practice, feel free to pause reading and try to spot the problems yourself first"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s dive into the analysis."}]},{type:a,value:f},{type:b,tag:av,props:{id:"missing-key-prop"},children:[{type:b,tag:t,props:{href:"#missing-key-prop",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Missing key prop"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The first thing we can notice from the console is that we are not passing the "},{type:b,tag:j,props:{},children:[{type:a,value:ai}]},{type:a,value:" prop when rendering the list items."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Missing key prop warning",src:"\u002Fposts\u002Freact-list\u002Fmissing_key_prop.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"which is caused by this code:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:by}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you might already know, the "},{type:b,tag:j,props:{},children:[{type:a,value:ai}]},{type:a,value:" prop is critical for dynamic lists to work correctly in React, as it helps the framework identify which items have changed, are added, or are removed."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A common beginners’ anti-pattern is to solve the problem by passing the item’s index:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" index"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:by}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"index"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite working for simple use-cases, this approach leads to multiple unexpected behaviors when the list is dynamic, with items being added or removed. For example, if you delete an item in the middle of a list at index N, then all list items located at positions N+1 will now have a different key. That causes React to “confuse” which mapped component belongs to which items. If you want to know more about the potential pitfalls of using the index as key, "},{type:b,tag:t,props:{href:"https:\u002F\u002Frobinpokorny.medium.com\u002Findex-as-a-key-is-an-anti-pattern-e0349aece318",rel:[K,L,M],target:N},children:[{type:a,value:"this article"}]},{type:a,value:" is a great resource."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Therefore, you should specify a key prop with something that uniquely identifies the item being rendered. If the data you’re receiving is coming from a backend, you might be able to use the database’s unique id as key. Otherwise, you could generate a client-side random id with "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fnanoid",rel:[K,L,M],target:N},children:[{type:a,value:"nanoid"}]},{type:a,value:" when creating the items."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Luckily, each of our own items has it’s own id property, so we should handle it as follows:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:by}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Adding the key solves the previous warning, but we still have a significant lag when selecting an item. It’s time to go serious and open the profiler."}]},{type:a,value:f},{type:b,tag:av,props:{id:"profiling-the-list"},children:[{type:b,tag:t,props:{href:"#profiling-the-list",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Profiling the list"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now that we solved the "},{type:b,tag:j,props:{},children:[{type:a,value:ai}]},{type:a,value:" warning, we are ready to tackle the performance problem. At this stage, using a profiler can help to track down the slow areas and therefore guide our optimization, so that’s what we are going to do."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When working with React, there are two main profilers you can use: the browser’s built-in profiler, such as the one available inside Chrome’s Dev Tools, and the profiler provided by the React DevTools extension. Both of them are useful in different scenarios. From my experience, the React DevTools’ profiler is a good starting point, as it gives you a component-aware performance representation, which is helpful to track down the specific components that are causing problems, whereas the browser’s profiler works at a lower level and it’s mostly helpful in those cases where the performance problems are not directly related to a component, for example, due to a slow method or Redux reducer."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For this reason, we are going to start with the React DevTools’ profiler, so make sure to have the extension installed. Then, you can access the Profiler tool from Chrome’s dev tools \u003E Profiler. Before starting, we are going to set up two settings that will help us in the optimization process:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"In Chrome’s Performance tab, set CPU throttling to x6. That will simulate a slower CPU, making slowdowns much more evident."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"CPU throttling",src:"\u002Fposts\u002Freact-list\u002Fprofiler_cpu_throttle.png"},children:[]}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"In React DevTools Profiler tab, click on the Gear icon \u003E Profiler \u003E “Record why each component rendered while profiling”. This will help us track down the causes for useless re-renders."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"React profiler settings",src:"\u002Fposts\u002Freact-list\u002Freact_profile_settings.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Once the configuration is done, we are ready to profile our sample todo app. Go ahead and click on the Record button, then select some items in the list and, finally, hit stop recording. This is the result we obtain after selecting 3 items:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"React profiler results",src:"\u002Fposts\u002Freact-list\u002Freact_app_profiler_result.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"On the top right side, you see highlighted in red the commits, which, in short, are the renders that caused the DOM to update. As you can see, the current commit took 2671 milliseconds to render. By hovering on the various elements, we can tell that most of the time is spent rendering the list items, with an average of 26 milliseconds per item."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Spending 26 milliseconds rendering a single item is not inherently bad. As long as the entire operation takes less than 100ms, the action would still be perceived as snappy by the user. Our biggest problem is that selecting a single item causes all the items to be re-rendered, and that’s what we are going to tackle in the next section."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A question we should ask ourselves at this point is: what’s the expected number of items to re-render after an action? In this particular case, the answer is one, as the result of a click is a new item being selected, with none of the others being affected. Another scenario might be a single-selection list, where at most one item could be selected at any given time. In that case, clicking on an item should cause the re-render of two items, as we need to render both the selected one and the one being unselected."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:av,props:{id:"preventing-re-renders-with-reactmemo"},children:[{type:b,tag:t,props:{href:"#preventing-re-renders-with-reactmemo",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Preventing re-renders with React.memo"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the previous section, we discussed how selecting a single item causes the entire list to be re-rendered.\nIdeally, we would like to re-render only the items whose \"looks\" are affected by the new selection.\nWe can do that using the "},{type:b,tag:t,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Freact-api.html#reactmemo",rel:[K,L,M],target:N},children:[{type:a,value:cJ}]},{type:a,value:" higher-order component."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a nutshell, "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" compares the new props with the old ones and, if they are equal, it reuses the previous render.\nOtherwise, if the props are different, it re-renders the component.\nIt's important to note that React executes a "},{type:b,tag:X,props:{},children:[{type:a,value:oA}]},{type:a,value:" of the props, which must be taken\ninto account when passing objects and methods as props.\nYou can also override the comparison function, though I would advise against it, as it makes\nthe code less maintainable (more on this later)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now that we know the basics of "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:", let's create another component by wrapping the "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:" with it:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:bw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,oi]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" memo "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,bO]},children:[{type:a,value:du}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:cW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ga}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can now use "},{type:b,tag:j,props:{},children:[{type:a,value:cW}]},{type:a,value:" instead of "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:" in the list:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cW}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Nice! We now have memoized the "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:". If you go ahead and try the application, you'll notice something is wrong...\nThe application is still slow!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If we open up the profiler as we previously did and record a selection, we should be presented with something like the following:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"React profiler after memoizing",src:"\u002Fposts\u002Freact-list\u002Freact_app_memoized_profiler.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:gS},{type:b,tag:X,props:{},children:[{type:a,value:"we are still re-rendering all the items"}]},{type:a,value:"! Why is it happening?\nIf you hover on one of the list items, you'll see the \"Why did this render?\" section. In our case, it says "},{type:b,tag:j,props:{},children:[{type:a,value:"Props changed: (onClick)"}]},{type:a,value:",\nwhich means our items are re-rendering due to the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback we are passing to each item."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As we previously discussed, "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" does a "},{type:b,tag:Y,props:{},children:[{type:a,value:oA}]},{type:a,value:" of the props by default.\nWhich basically means calling the strick equality operator "},{type:b,tag:j,props:{},children:[{type:a,value:bD}]},{type:a,value:" over each prop. In our case, the check would\nbe roughly equivalent to:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,dC]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"arePropsEqual"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:hK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:" prevProps"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:oB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:oB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aN}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While "},{type:b,tag:j,props:{},children:[{type:a,value:aA}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:" are compared by "},{type:b,tag:Y,props:{},children:[{type:a,value:hn}]},{type:a,value:" (because they are primitive types, string and boolean respectively), "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" is compared\nby "},{type:b,tag:Y,props:{},children:[{type:a,value:"reference"}]},{type:a,value:" (being a function).\nWhen we created the list items, we passed the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback as an anonymous closure:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:a,value:aN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Every time the list re-renders, "},{type:b,tag:X,props:{},children:[{type:a,value:"each item receives a new callback function"}]},{type:a,value:".\nFrom an equality perspective, the callback "},{type:b,tag:Y,props:{},children:[{type:a,value:"has changed"}]},{type:a,value:", and therefore the "},{type:b,tag:j,props:{},children:[{type:a,value:cW}]},{type:a,value:" is re-rendered."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If the equality aspect is still unclear to you, go ahead and open the JS console inside your browser.\nIf you type "},{type:b,tag:j,props:{},children:[{type:a,value:"true === true"}]},{type:a,value:", you'll notice that the result is "},{type:b,tag:j,props:{},children:[{type:a,value:O}]},{type:a,value:".\nBut if you type "},{type:b,tag:j,props:{},children:[{type:a,value:"(() =\u003E {}) === (() =\u003E {})"}]},{type:a,value:", you'll get "},{type:b,tag:j,props:{},children:[{type:a,value:bj}]},{type:a,value:" as result.\nThat's because two functions are equal only if they share the same identity, and\nevery time we create a new closure we generate a new identity."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Therefore, we need a way to keep the identity of the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback stable to prevent useless re-renders,\nand that's what we are going to discuss in the next sections."}]},{type:a,value:f},{type:b,tag:af,props:{id:oa},children:[{type:b,tag:t,props:{href:"#a-common-anti-pattern",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:ob}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before discussing the proposed solution, let's analyze a common (anti-)pattern being used in these cases.\nGiven that the "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" method accepts a custom comparator, you might be tempted to provide one that\nartifically "},{type:b,tag:Y,props:{},children:[{type:a,value:"excludes"}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" from the check. Something like the following:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:cW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ga}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:hK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:eQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:eQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aL}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F The onClick prop is not compared"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, even with a changing "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback, the list items won't be re-rendered unless "},{type:b,tag:j,props:{},children:[{type:a,value:aA}]},{type:a,value:cZ},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:" are updated.\nIf you go ahead and try this approach, you'll notice the list feels snappy now, but something is wrong:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"React list custom comparator",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_custom_comparator.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, selecting multiple items doesn't work as expected now, with items being randomly selected and unselected.\nThis is happening because the "},{type:b,tag:X,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:" function is not pure"}]},{type:a,value:", as it depends on the previous value of the "},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:" items.\nIf you exclude the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback check from the "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" comparator, then your components might receive an outdated (stale)\nversion of the callback, causing all those glitches."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this particular case, the way the "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:" is implemented is not optimal and we can easily convert it to a pure function\n(in fact, we are going to do that in the next section). But my point here is: "},{type:b,tag:X,props:{},children:[{type:a,value:"by excluding the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback from the "},{type:b,tag:j,props:{},children:[{type:a,value:ga}]},{type:a,value:"\ncomparator, you're exposing the application to subtle staleness bugs"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Some might argue that as long as the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback is kept "},{type:b,tag:Y,props:{},children:[{type:a,value:"pure"}]},{type:a,value:", then this approach is perfectly acceptable.\nPersonally, I consider this an anti-pattern for two reasons:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"In complex codebases is relatively easy to transform a pure function into a non-pure one by mistake."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"By writing a custom comparator,  you're creating an additional maintenance burden. What if the "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:" needs to accept another "},{type:b,tag:j,props:{},children:[{type:a,value:hL}]},{type:a,value:" parameter in the future?"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, you'll need to refactor to the comparator, as shown below. If you forget to add it (which is relatively easy in complex codebases with multiple contributors), then you are again exposing your component to staleness bugs."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:cW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ga}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:hK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:eQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:eQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:eQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:hL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bD}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:hL}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If a custom comparator is not advisable, what should we do to solve this problem then?"}]},{type:a,value:f},{type:b,tag:av,props:{id:"making-callback-identities-stable"},children:[{type:b,tag:t,props:{href:"#making-callback-identities-stable",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Making callback identities stable"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our goal is to use the \"base\" version of "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" without a custom comparator.\nChoosing this path will both improve the maintainability of the component and its robustness against future changes.\nFor the memoization to work correctly though, we'll need to "},{type:b,tag:X,props:{},children:[{type:a,value:"refactor the callback to keep its identity stable"}]},{type:a,value:", otherwise\nthe equality check performed by "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" will prevent the memoization."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The traditional way to keep function identities stable in React is to use the "},{type:b,tag:j,props:{},children:[{type:a,value:bT}]},{type:a,value:" hook.\nThe hook accepts a function and a dependency array, and as long as the dependencies won't change, neither will the identity of the callback.\nLet's refactor our example to use "},{type:b,tag:j,props:{},children:[{type:a,value:bT}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our first attempt is to move the anonymous closure "},{type:b,tag:j,props:{},children:[{type:a,value:"() =\u003E toggleItem(item)"}]},{type:a,value:" inside a separate method inside "},{type:b,tag:j,props:{},children:[{type:a,value:bT}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:dA}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:hI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:gb},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:hM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:hM}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:hM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F How do we get the item?"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cW}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We are now facing a problem: previously, the anonymous closure captured the current "},{type:b,tag:j,props:{},children:[{type:a,value:an}]},{type:a,value:go},{type:b,tag:j,props:{},children:[{type:a,value:".map"}]},{type:a,value:" iteration and then passed it to the "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:"\nfunction as an argument. But now, we are not declaring the "},{type:b,tag:j,props:{},children:[{type:a,value:dD}]},{type:a,value:" handler inside the iteration, so how can we access the \"selected item\" in the callback?\nLet's discuss a possible solution:"}]},{type:a,value:f},{type:b,tag:af,props:{id:oc},children:[{type:b,tag:t,props:{href:"#refactoring-the-listitem-component",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:od}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Currently, the "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:gc},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" callback doesn't provide any information about the item being selected.\nIf it did, we would be able to easily solve this problem, so let's refactor the "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:dA}]},{type:a,value:" components to provide this information."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Firstly, we change the "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:" component to accept the full "},{type:b,tag:j,props:{},children:[{type:a,value:an}]},{type:a,value:" object, and given that the "},{type:b,tag:j,props:{},children:[{type:a,value:aA}]},{type:a,value:" prop is now redundant we remove it.\nThen, we introduce an handler for the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" event to also provide the "},{type:b,tag:j,props:{},children:[{type:a,value:an}]},{type:a,value:" as argument. This is our end result:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:by}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:oq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:or},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:os}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:ot}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:ou}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:I}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:ov}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ow},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,H,A]},children:[{type:a,value:ox}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:oy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,dJ]},children:[{type:a,value:bZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" now provides the current item as a parameter."}]},{type:a,value:f},{type:b,tag:aS,props:{},children:[{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But wait! You used an anonymous closure again in the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:gc},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" handler, shouldn't we avoid them to prevent re-renderings?\nWhile we "},{type:b,tag:Y,props:{},children:[{type:a,value:"could"}]},{type:a,value:" create another memoized callback with "},{type:b,tag:j,props:{},children:[{type:a,value:bT}]},{type:a,value:" inside the "},{type:b,tag:j,props:{},children:[{type:a,value:by}]},{type:a,value:" component to handle the click event, that would offer no performance improvements in this case.\nThe problem with the anonymous closure we discussed earlier in the "},{type:b,tag:j,props:{},children:[{type:a,value:dA}]},{type:a,value:" item was that it broke the "},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" memoization for the "},{type:b,tag:j,props:{},children:[{type:a,value:cW}]},{type:a,value:". Given that we are "},{type:b,tag:Y,props:{},children:[{type:a,value:hN}]},{type:a,value:" memoizing the "},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:" element, then there is no performance benefit from having a stable identity for this callback."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We can then refactor the "},{type:b,tag:j,props:{},children:[{type:a,value:dA}]},{type:a,value:" component to pass the "},{type:b,tag:j,props:{},children:[{type:a,value:an}]},{type:a,value:" prop instead of "},{type:b,tag:j,props:{},children:[{type:a,value:aA}]},{type:a,value:" and to make use of the newly available "},{type:b,tag:j,props:{},children:[{type:a,value:an}]},{type:a,value:" information in the "},{type:b,tag:j,props:{},children:[{type:a,value:dD}]},{type:a,value:" callback:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cm]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br,r]},children:[{type:b,tag:c,props:{className:[d,ac]},children:[{type:a,value:dA}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:hI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:dB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:gb},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F We now receive the selected item"}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cU}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cW}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:cr}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F We pass the full item instead of the name"}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aL}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,aB]},children:[{type:a,value:aN}]},{type:b,tag:c,props:{className:[d,aF,Z]},children:[{type:b,tag:c,props:{className:[d,aG,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,bX]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Nice! Let's go ahead and try the refactored version:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"React list example, after changes",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_2.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It works... but it's still slow! If we open up the profiler, we can see the whole list is still being rendered:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Profiler results after changes",src:"\u002Fposts\u002Freact-list\u002Freact_list_perf.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see from the profiler, the "},{type:b,tag:j,props:{},children:[{type:a,value:aN}]},{type:a,value:" identity is still changing! That means our "},{type:b,tag:j,props:{},children:[{type:a,value:dD}]},{type:a,value:" identity is being changed at every re-render."}]},{type:a,value:f},{type:b,tag:af,props:{id:oe},children:[{type:b,tag:t,props:{href:"#another-common-anti-pattern",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:of}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before diving into the proper solution, let's discuss a common anti-pattern used in these cases.\nGiven that the "},{type:b,tag:j,props:{},children:[{type:a,value:bT}]},{type:a,value:" accepts a dependency array, you could be tempted to specify an empty one to keep the identity fixed:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,dC]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:gb},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Despite keeping the identity stable, "},{type:b,tag:X,props:{},children:[{type:a,value:"this approach suffers from the same staleness bugs we discussed in previous sections"}]},{type:a,value:".\nIf we run it, you'll notice the items get unselected as it happened when we specified the custom comparator:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"React list example with bugs",src:"\u002Fposts\u002Freact-list\u002Freact_list_example_3.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In general, you should always specify the correct dependencies in "},{type:b,tag:j,props:{},children:[{type:a,value:bT}]},{type:a,value:fR},{type:b,tag:j,props:{},children:[{type:a,value:"useEffect"}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:oC}]},{type:a,value:", otherwise, you're\nexposing the application to potentially hard-to-debug staleness bugs."}]},{type:a,value:f},{type:b,tag:av,props:{id:"solving-the-toggleitem-identity-problem"},children:[{type:b,tag:t,props:{href:"#solving-the-toggleitem-identity-problem",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Solving the toggleItem identity problem"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As we previously discussed, the problem with our "},{type:b,tag:j,props:{},children:[{type:a,value:dD}]},{type:a,value:" callback is that its "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:" dependency identity changes at each render, causing it to re-render as well:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,dC]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:gb},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Our first attempt is to wrap "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:i_},{type:b,tag:j,props:{},children:[{type:a,value:bT}]},{type:a,value:" as we did with "},{type:b,tag:j,props:{},children:[{type:a,value:dD}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,dC]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dB},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:dV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:fZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:f_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eP}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This does "},{type:b,tag:Y,props:{},children:[{type:a,value:hN}]},{type:a,value:" solve the problem though, as this callback depends on the external state variable "},{type:b,tag:j,props:{},children:[{type:a,value:aL}]},{type:a,value:", which changes every time "},{type:b,tag:j,props:{},children:[{type:a,value:de}]},{type:a,value:" is called. If we want its identity to remain stable, we need a way to make "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:" pure. Luckily, we can use "},{type:b,tag:t,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#functional-updates",rel:[K,L,M],target:N},children:[{type:b,tag:j,props:{},children:[{type:a,value:cj}]},{type:a,value:"'s functional updates"}]},{type:a,value:" to accomplish our goal:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,dC]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dB},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:d$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:dV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:oD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:fZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:f_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eP}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, we wrapped our previous logic inside the "},{type:b,tag:j,props:{},children:[{type:a,value:de}]},{type:a,value:" call, which in turn provides the previous state value we need to compute the new selected items."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If we go ahead and run the refactored example, it works and it's also snappy! We can also run the usual profiler to get a sense of what's happening:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Hovering on the item being rendered:\n"},{type:b,tag:ag,props:{alt:"Fixed react example",src:"\u002Fposts\u002Freact-list\u002Freact_list_memo_good_2.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Hovering on the other items:\n"},{type:b,tag:ag,props:{alt:"Fixed react example 2",src:"\u002Fposts\u002Freact-list\u002Freact_list_memo_good_1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, after selecting an item we only render the current one being selected now, while the others are being memoized."}]},{type:a,value:f},{type:b,tag:af,props:{id:og},children:[{type:b,tag:t,props:{href:"#a-note-on-functional-state-updates",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oh}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the example we just discussed, converting our "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:" method to the functional mode of "},{type:b,tag:j,props:{},children:[{type:a,value:cj}]},{type:a,value:" was relatively trivial.\nIn real-world scenarios, things might not be as straightforward."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For example, your function might depend on multiple state pieces:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,dC]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:oo},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:gd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" setEnabled"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dB},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Only toggle the items if enabled"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:gd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:d$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:cu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,cC,h]},children:[{type:a,value:bq}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:dV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,n,aw]},children:[{type:a,value:az}]},{type:a,value:oD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,T,r,z]},children:[{type:a,value:fY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:fZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:f_},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eP}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:gd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Every time the "},{type:b,tag:j,props:{},children:[{type:a,value:gd}]},{type:a,value:" value changes, your "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:" identity will change as well.\nIn these scenarios, you should either merge both sub-states into the same "},{type:b,tag:j,props:{},children:[{type:a,value:cj}]},{type:a,value:" call, or even better, convert it to a "},{type:b,tag:t,props:{href:"https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#additional-hooks",rel:[K,L,M],target:N},children:[{type:b,tag:j,props:{},children:[{type:a,value:eN}]}]},{type:a,value:" one.\nGiven that "},{type:b,tag:j,props:{},children:[{type:a,value:eN}]},{type:a,value:gc},{type:b,tag:j,props:{},children:[{type:a,value:cl}]},{type:a,value:" function has a stable identity, you can scale this approach to complex states.\nMoreover, the same applies to "},{type:b,tag:t,props:{href:"https:\u002F\u002Fredux.js.org\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Redux"}]},{type:a,value:gc},{type:b,tag:j,props:{},children:[{type:a,value:cl}]},{type:a,value:" function, so you can move the item toggle logic at the Redux level and convert our "},{type:b,tag:j,props:{},children:[{type:a,value:aT}]},{type:a,value:" function to something as:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,dC]},children:[{type:b,tag:j,props:{},children:[{type:a,value:bp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:" dispatch "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"useDispatch"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Given that the dispatch identity is stable, the `toggleItem` will be stable as well"}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:dB},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,au]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ax,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"toggleItemAction"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cl},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:av,props:{id:"virtualizing-the-list"},children:[{type:b,tag:t,props:{href:"#virtualizing-the-list",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Virtualizing the list?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before closing the article, I wanted to briefly cover "},{type:b,tag:Y,props:{},children:[{type:a,value:"list virtualization"}]},{type:a,value:", a common technique used to improve performance for long lists.\nIn a nutshell, list virtualization is based on the idea of rendering just a sub-set of the items in a given list (generally the currently visible ones) and deferring the others.\nFor example, if you have a list with a thousand items but only 10 are visible at any given time, then we might only render these 10 first, and the others can be rendered "},{type:b,tag:Y,props:{},children:[{type:a,value:"on-demand"}]},{type:a,value:" when needed (i.e. after scrolling)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"List virtualization offers two main advantages compared to rendering the entire list:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Faster initial start time, as we only need to render a subset of the list"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Lower memory usage, as only a subset of the items is being rendered at any given time"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"That said, list virtualization is not a silver bullet you should always use, as it increases complexity and can be glitchy.\nPersonally, I'd avoid virtualized lists if you are only dealing with hundreds of items, as the memoization techniques we discussed in this article are often effective enough  (older mobile devices might require a lower threshold). As always, the right approach depends on the specific use case, so I'd highly recommend profiling your list before diving into more complex optimization techniques."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We are going to cover virtualization in a future article. In the meanwhile, you can read more about virtualized lists in React, with libraries like "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fbvaughn\u002Freact-window",rel:[K,L,M],target:N},children:[{type:a,value:"react-window"}]},{type:a,value:", and in React Native, with the built-in "},{type:b,tag:t,props:{href:"https:\u002F\u002Freactnative.dev\u002Fdocs\u002Fflatlist",rel:[K,L,M],target:N},children:[{type:a,value:"FlatList"}]},{type:a,value:" component."}]},{type:a,value:f},{type:b,tag:av,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we covered list optimization in depth. We started from a problematic example and gradually solved most of the performance problems.\nWe also discussed the main anti-patterns you should be aware of, along with potential ways to solve them."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In conclusion, lists are often the cause of performance problems in React, as all items are being re-rendered every time something changes by default.\n"},{type:b,tag:j,props:{},children:[{type:a,value:cJ}]},{type:a,value:" is an effective tool to mitigate the issue, but you might need to refactor your application to make your props' identities stable."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The final code is available in "},{type:b,tag:t,props:{href:"https:\u002F\u002Fcodesandbox.io\u002Fs\u002Fcommonreactlistmistakes-solved-7sn20?file=\u002Fsrc\u002FApp.js",rel:[K,L,M],target:N},children:[{type:a,value:"this CodeSandbox"}]},{type:a,value:" if you're interested."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"PS: there's one small "},{type:b,tag:j,props:{},children:[{type:a,value:oC}]},{type:a,value:" optimization left to add in our example, can you spot it yourself? :)"}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hE}]}]},dir:aZ,path:"\u002Farticles\u002F2022-02-04-optimizing-list-in-react-solving-performance-problems-and-anti-patterns",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"optimizing-list-in-react-solving-performance-problems-and-anti-patterns"},{slug:"2022-01-04-12-rust-tips-and-tricks-you-might-not-know-yet",description:"Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as Espanso) and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it.",layout:aU,title:"12 Rust Tips and Tricks you might not know yet",author:aV,date:"2022-01-04T00:00:00.000Z",categories:"rust tips tricks tip crates useful",toc:[{id:oE,depth:ad,text:oF},{id:oG,depth:ad,text:oH},{id:oI,depth:ad,text:oJ},{id:oK,depth:ad,text:oL},{id:oM,depth:ad,text:oN},{id:oO,depth:ad,text:oP},{id:oQ,depth:ad,text:oR},{id:oS,depth:ad,text:oT},{id:oU,depth:ad,text:oV},{id:oW,depth:ad,text:oX},{id:oY,depth:ad,text:oZ},{id:o_,depth:ad,text:o$}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:pa},{type:b,tag:t,props:{href:ge,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:pb}]},{type:a,value:f},{type:a,value:f},{type:b,tag:af,props:{id:oE},children:[{type:b,tag:t,props:{href:"#using-cowstr-as-return-type",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oF}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Sometimes you need to write methods that accept a string slice (&str) and conditionally return either a modified version of it or the original one. For these cases, you might use "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fborrow\u002Fenum.Cow.html",rel:[K,L,M],target:N},children:[{type:a,value:"Cow\u003Cstr\u003E"}]},{type:a,value:", so that you only allocate new memory when necessary."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,dg]},children:[{type:a,value:hO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:a,value:"borrow"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:eR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:hP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:gg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:eR}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eS}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"match"}]},{type:a,value:op},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"nth"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:pe},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bu}]},{type:a,value:pf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"is_uppercase"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F No allocation is necessary, as the string"}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F already starts with an uppercase char"}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:eR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:pe},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F An allocation is necessary, as the old string"}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F does not start with an uppercase char"}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" new_string"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cG}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:pf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"to_uppercase"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:ph},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"chain"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pc}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"skip"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:ph},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"collect"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n            \n            "},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:eR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"Owned"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"new_string"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"None"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:eR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pi}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"   "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Allocation"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F No allocation"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:oG},children:[{type:b,tag:t,props:{href:"#crossbeam-channels-instead-of-the-standard-ones",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oH}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:fo},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fcrossbeam-rs\u002Fcrossbeam",rel:[K,L,M],target:N},children:[{type:a,value:"crossbeam crate"}]},{type:a,value:" offers a powerful alternative to standard channels with support for the Select operation, timeouts, and more. Similar to what you get out of the box in Golang and traditional Unix sockets."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,dg]},children:[{type:a,value:"crossbeam_channel"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"select"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" unbounded"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,dg]},children:[{type:a,value:hO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:a,value:"time"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:pk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" r1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:pm}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"s2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" r2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:pm}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    s1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"send"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:en}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:"select!"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"r1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:gg}]},{type:a,value:po},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"r1 \u003E {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:pp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pn}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"r2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:gg}]},{type:a,value:po},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"r2 \u003E {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:pp},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hQ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"from_millis"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:oj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"timed out\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:oI},children:[{type:b,tag:t,props:{href:"#golang-like-defer-operator-with-scopeguard",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oJ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you are coming from Golang, you might miss the \"defer\" operator for certain use-cases (like freeing memory when working with raw pointers or closing a socket)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In Rust (besides the RAII pattern), you can use the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdocs.rs\u002Fscopeguard\u002Flatest\u002Fscopeguard\u002F",rel:[K,L,M],target:N},children:[{type:a,value:pq}]},{type:a,value:" crate to easily implement \"cleaup\" logic."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,pr,aB]},children:[{type:a,value:"#[macro_use(defer)]"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ps}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"crate"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,"module-declaration",dg]},children:[{type:a,value:pq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"start\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F This action will run at the end of the current scope"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:"defer!"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n           "},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"defer\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"scope end\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"end\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:hR}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F start"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F scope end"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F defer"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F end"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:oK},children:[{type:b,tag:t,props:{href:"#cargo-make-for-packaging",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oL}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fcargo\u002Freference\u002Fbuild-scripts.html",rel:[K,L,M],target:N},children:[{type:a,value:"Build scripts"}]},{type:a,value:" are great for a lot of things, but usually not for packaging. My favorite solution for that is "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fsagiegurari\u002Fcargo-make",rel:[K,L,M],target:N},children:[{type:a,value:"Cargo Make"}]},{type:a,value:" by "},{type:b,tag:t,props:{href:"https:\u002F\u002Fsagiegurari.github.io\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"sagiegurari"}]},{type:a,value:", a Rust-based task runner and build tool."}]},{type:a,value:f},{type:b,tag:af,props:{id:oM},children:[{type:b,tag:t,props:{href:"#customize-and-chain-panic-handlers",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oN}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fpanic\u002Ffn.set_hook.html",rel:[K,L,M],target:N},children:[{type:a,value:"Panic handlers (called hooks)"}]},{type:a,value:" can be overridden and chained, which becomes particularly useful when setting up custom error reporting and logging for your application."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,dg]},children:[{type:a,value:hO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:hS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" take_hook"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:pt},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:pw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,hT]},children:[{type:b,tag:c,props:{className:[d,ea,e]},children:[{type:a,value:aC}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,ea,e]},children:[{type:a,value:aC}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"custom logging logic {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:px},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:py},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:pA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:pt},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:pw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,hT]},children:[{type:b,tag:c,props:{className:[d,ea,e]},children:[{type:a,value:aC}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,ea,e]},children:[{type:a,value:aC}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"custom error reporting logic {}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:px},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:py},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:pA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:"panic!"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:nz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:hR}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F custom error reporting logic panicked at 'test', src\u002Fmain.rs:20:5"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F custom logging logic panicked at 'test', src\u002Fmain.rs:20:5"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:oO},children:[{type:b,tag:t,props:{href:"#use-rust-analyzer-on-vscode",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oP}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:fo},{type:b,tag:t,props:{href:"https:\u002F\u002Fmarketplace.visualstudio.com\u002Fitems?itemName=matklad.rust-analyzer",rel:[K,L,M],target:N},children:[{type:a,value:"Rust analyzer"}]},{type:a,value:" VSCode extension by "},{type:b,tag:t,props:{href:"https:\u002F\u002Fmatklad.github.io\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"matklad"}]},{type:a,value:" is significantly better than the “official” Rust one. Unfortunately, it’s still showing as a second result on the extensions marketplace, misguiding a lot of beginners."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Rust Analyzer extension",src:"\u002Fposts\u002Frustanalyzer.png"},children:[]}]},{type:a,value:f},{type:b,tag:af,props:{id:oQ},children:[{type:b,tag:t,props:{href:"#use-impl-trait-when-working-with-closures",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oR}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Prefer impl Fn\u002FFnOnce\u002FFnMut to pass a closure to a function (called impl Trait) instead of a generic when possible to keep the signature clean. For non-trivial cases, you might need to box the closure with Box\u003CFn()\u003E, but keep in mind you’ll pay an additional overhead."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Instead of this"}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:"setup_teardown_generic"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:dZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Use this"}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:pF}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:dZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"impl"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:pC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F As a note, this pattern is very useful inside tests"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F to create\u002Fdestroy resources."}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:pF}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,hT]},children:[{type:b,tag:c,props:{className:[d,ea,e]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,ea,e]},children:[{type:a,value:aC}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Action!\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:hR}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F setting up..."}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Action!"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F tearing down..."}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:oS},children:[{type:b,tag:t,props:{href:"#enable-clippy-on-save-for-vscode",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oT}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you’re using VSCode + Rust Analyzer, I highly suggest going into the settings \u003E Rust Analyzer \u003E Check On Save: Command and setting \"clippy\" as the new default instead of \"check\". Same UX, better warnings."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Enable Clippy on Save",src:"\u002Fposts\u002Fclippyonsave.png"},children:[]}]},{type:a,value:f},{type:b,tag:af,props:{id:oU},children:[{type:b,tag:t,props:{href:"#use-thiserror-and-anyhow-for-idiomatic-error-handling",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oV}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:hU},{type:b,tag:t,props:{href:"https:\u002F\u002Fdocs.rs\u002Fthiserror\u002Flatest\u002Fthiserror\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"thiserror"}]},{type:a,value:bf},{type:b,tag:t,props:{href:"https:\u002F\u002Fcrates.io\u002Fcrates\u002Fanyhow",rel:[K,L,M],target:N},children:[{type:a,value:"anyhow"}]},{type:a,value:" crates for idiomatic error handling. You should use thiserror when the consumer needs to conditionally act based on the error, anyhow otherwise. A good guideline is “use thiserror for libraries and anyhow for applications”."}]},{type:a,value:f},{type:b,tag:af,props:{id:oW},children:[{type:b,tag:t,props:{href:"#using-dbg-macro-instead-of-println",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oX}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:hU},{type:b,tag:t,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstable\u002Fstd\u002Fmacro.dbg.html",rel:[K,L,M],target:N},children:[{type:a,value:"dbg!() macro"}]},{type:a,value:" instead of println!() when debugging. Less code, more useful information."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" var1 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Output: 2"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:pG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"var1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"        "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Output: [src\u002Fmain.rs:5] var1 = 2"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:pG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"var1 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ez},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Output: [src\u002Fmain.rs:6] var1 * 2 = 4"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:oY},children:[{type:b,tag:t,props:{href:"#include_str-and-include_bytes-macros",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:oZ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:hU},{type:b,tag:t,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fmacro.include_str.html",rel:[K,L,M],target:N},children:[{type:a,value:"include_str!()"}]},{type:a,value:bf},{type:b,tag:t,props:{href:"https:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Fmacro.include_bytes.html",rel:[K,L,M],target:N},children:[{type:a,value:"include_bytes!()"}]},{type:a,value:" macros to read the content of a file at "},{type:b,tag:Y,props:{},children:[{type:a,value:"compile time"}]},{type:a,value:" and store it inside a const. Useful to avoid messing with multiline string literals."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Both of these files are read at *compile time*"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:pH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:"include_str!"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\".\u002Fpath\u002Fto\u002Fthe\u002Ffile.txt\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:"BINARY_FILE_CONTENT"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"u8"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:"include_bytes!"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\".\u002Fpath\u002Fto\u002Fimage.png\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:gh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,ao]},children:[{type:a,value:pH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bp},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Output: file content as string"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:o_},children:[{type:b,tag:t,props:{href:"#integrating-with-cc-code",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:o$}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you need to integrate C\u002FC++ code with Rust, the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fcrates.io\u002Fcrates\u002Fcc",rel:[K,L,M],target:N},children:[{type:a,value:"cc crate"}]},{type:a,value:" and the proper build script can get you pretty far. For example, I’ve used them to integrate wxWidgets, a popular C++ gui framework, with my project "},{type:b,tag:t,props:{href:ge,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:" (see the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fespanso\u002Fblob\u002Fmaster\u002Fespanso-modulo\u002Fbuild.rs",rel:[K,L,M],target:N},children:[{type:a,value:"build script"}]},{type:a,value:k}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Inside the build script (build.rs)"}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"cargo:rerun-if-changed=src\u002Fnative.c\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"cargo:rerun-if-changed=src\u002Fnative.h\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,dg]},children:[{type:a,value:"cc"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"Build"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:bz}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"include"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"src\u002Fnative.h\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"file"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"src\u002Fnative.c\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"compile"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"cargo:rustc-link-lib=static=nativemodule\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Then, in another Rust file (for example, ffi.rs)"}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,pr,aB]},children:[{type:a,value:"#[link(name = "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pI}]},{type:a,value:", kind = "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"static\""}]},{type:a,value:")]"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ps}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"C\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"pub"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:"your_cool_c_module"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Thanks for reading! If you like these topics, make sure to follow me on "},{type:b,tag:t,props:{href:eb,rel:[K,L,M],target:N},children:[{type:a,value:ec}]},{type:a,value:bf},{type:b,tag:t,props:{href:dE,rel:[K,L,M],target:N},children:[{type:a,value:"YouTube"}]},{type:a,value:" to stay updated with the latest articles and videos."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:pa},{type:b,tag:t,props:{href:ge,rel:[K,L,M],target:N},children:[{type:a,value:cs}]},{type:a,value:pb}]}]},dir:aZ,path:"\u002Farticles\u002F2022-01-04-12-rust-tips-and-tricks-you-might-not-know-yet",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"12-rust-tips-and-tricks-you-might-not-know-yet"},{slug:"2021-05-04-rust-vs-cpp-which-is-better-and-why",description:hV,layout:aU,title:"Rust vs C++, which is better and why?",author:aV,date:"2021-05-04T00:00:00.000Z",categories:"rust cpp c comparison between difference similarity pro cons advantages",toc:[{id:pJ,depth:ad,text:pK},{id:pL,depth:ad,text:pM},{id:pN,depth:ad,text:pO},{id:pP,depth:ad,text:pQ},{id:pR,depth:ad,text:pS},{id:bl,depth:ad,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hV}]},{type:a,value:f},{type:a,value:f},{type:b,tag:af,props:{id:pJ},children:[{type:b,tag:t,props:{href:"#similarities",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pK}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Both Rust and C++ are system programming languages, which means they can be used to write low-level code like kernels and firmware for microcontrollers. But compared with C, they offer a lot of abstractions that make it possible to go high-level as well, for example, writing games and web applications."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another similarity is that neither of them uses a garbage collector to manage memory, which makes the code much more predictable, efficient, and in many cases faster. Of course, if you ever used C, you will know that managing memory yourself is hard. Besides the cognitive overhead, you are also running the risk of causing segmentation faults and undefined behaviors."}]},{type:a,value:f},{type:b,tag:af,props:{id:pL},children:[{type:b,tag:t,props:{href:"#memory-and-thread-safety",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pM}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For this reason, modern C++ introduced concepts like smart pointers as a way to mitigate those memory-related bugs, but despite the significant improvements, they are limited in the number of guarantees they can offer. Rust takes it a step further and introduces the borrow checker, a component bundled within the compiler itself that makes sure that a reference does not outlive the data they refer to, preventing entire classes of memory unsafety bugs."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another big selling point for Rust is its rich type system, which makes it possible to prevent data races at compile time. It does so by introducing two special traits, Sync and Send, which are used by the compiler to determine whether a multi-threaded operation is safe or not. And while sharing some memory between threads is possible in Rust, the compiler will stop you from building a program that does so unsafely, preventing data races even before the program starts. For example, if you want to mutate a variable from multiple threads, the compiler will require you to wrap it with a Mutex or something equivalent, because in general, mutating an unsynchronized variable from multiple threads is unsafe, unless a synchronization primitive or atomic operation is used."}]},{type:a,value:f},{type:b,tag:af,props:{id:pN},children:[{type:b,tag:t,props:{href:"#unsafe-rust",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pO}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Up to this point, we discussed the features of the so-called “safe Rust”, which provides guarantees like memory safety and prevents undefined behavior, but there is also another “version” of the language known as unsafe Rust, which basically gives you superpowers at the price of losing all those safety guarantees."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Are you wondering why this is needed? Well, there are mainly two reasons: if you want to interact with the low-level aspects of the operating system or hardware, those operations are inherently unsafe, so the “safe Rust” compiler, which is the one that tries to give you guarantees, is not able to do so. Therefore, if you still want to execute them, you have to explicitly tell the compiler to trust you and give up those safety guarantees, entering the “unsafe” side of Rust."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The other reason is that when analyzing the code, the compiler is very conservative. From a guarantees point of view, it’s much better to block a valid program than to make an incorrect one pass the compilation step. Thus, there are times in which we might want to bypass those checks, and in order to do so, we need to enter the “unsafe” side as well."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a way, unsafe Rust and C++ are very similar. The main difference is that Rust programmers usually avoid the “unsafe” side as much as possible unless interfacing with the low-level aspects of the operating systems or when absolutely certain that an operation is correct, and this greatly reduces the surface for memory problems."}]},{type:a,value:f},{type:b,tag:af,props:{id:pP},children:[{type:b,tag:t,props:{href:"#package-management-and-ecosystem",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pQ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"An area in which Rust is arguably better than C++ is package management. If you have ever worked with Python or JavaScript you will feel right at home with cargo, the official Rust package manager. Installing a package is just a matter of adding a line into cargo.toml file, whereas in C++ using an external library can be a huge pain, especially if targeting multiple operating systems. There have been some attempts to bring modern package management to C++, such as Conan and vcpkg, but they are far from being standardized or easy to use as cargo."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With that being said, the C++ ecosystem is huge, much bigger than the Rust counterpart, as the former has been around for multiple decades. In other words, there are many more libraries for C++ than for Rust, with the latter sometimes lacking a suitable one."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The good news is that Rust has a very good Foreign Function Interface, which means you can interface with C code very easily from Rust, and thus, also interface with C++ libraries by exposing a C API from them. Unfortunately, this is not always possible, especially in complex cases, but there are some ongoing attempts to make creating bindings easier. An example is the autocxx library, which is being developed by the Google Chrome team to investigate whether parts of the browser could be developed using Rust in the future."}]},{type:a,value:f},{type:b,tag:af,props:{id:pR},children:[{type:b,tag:t,props:{href:"#macros",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pS}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another interesting difference between the two languages is the macro system, which in Rust is much more powerful and safer. First of all, Rust ships with two kinds of macros: declarative and procedural. The former type is similar to the traditional C\u002FC++ macros, with the difference that macros are "},{type:b,tag:Y,props:{},children:[{type:a,value:"hygenic"}]},{type:a,value:", meaning that they cannot interfere with variables outside their scope and therefore don’t cause any unwanted side effects. On the other hand, procedural macros are completely different, much more powerful and also complex. They can be basically thought of as compiler plugins that receive the program syntax tree as input, manipulate it, and then return the enriched syntax tree as output. This makes it possible to create annotations, similarly to Java, that enrich the code at compile time."}]},{type:a,value:f},{type:b,tag:af,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"To conclude, which of the two languages is better? As always, it depends! But these are the most important takeaways:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Rust is likely to be the future of system programming, and the proof is that many of the big players (Microsoft, Apple, Google) are moving in that direction, gradually integrating Rust with their products. Don’t get me wrong, C++ is far from being dead and is not going away anytime soon due to the incredibly vast amount of legacy code built with it, but an increasing number of companies are choosing Rust over C++ for new products."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"My theory is that in 10-years’ time, most C++ jobs will be focused on maintaining legacy software rather than creating new products. But of course, that’s only my opinion and I might be wrong :)"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you liked the article, you can follow me on "},{type:b,tag:t,props:{href:eb,rel:[K,L,M],target:N},children:[{type:a,value:ec}]},{type:a,value:cZ},{type:b,tag:t,props:{href:dE,rel:[K,L,M],target:N},children:[{type:a,value:gi}]},{type:a,value:ay}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hV}]}]},dir:aZ,path:"\u002Farticles\u002F2021-05-04-rust-vs-cpp-which-is-better-and-why",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"rust-vs-cpp-which-is-better-and-why"},{slug:"2021-01-21-why-electron-is-a-necessary-evil",description:hW,layout:aU,title:"Why Electron is a Necessary Evil",author:aV,date:"2021-01-21T00:00:00.000Z",categories:"electron cross-platform cross platform desktop application app wxwidgets qt alternative localhost server sciter",toc:[{id:pT,depth:aH,text:pU},{id:pV,depth:aH,text:pW},{id:pX,depth:aH,text:pY},{id:pZ,depth:aH,text:p_},{id:p$,depth:aH,text:qa},{id:qb,depth:aH,text:qc},{id:bl,depth:aH,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hW}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This Chrome-ception allows developers to build complete desktop applications using web technologies, including HTML, CSS, JS, and the ~500 MB of node_modules we all know and love."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Jokes aside, Electron offers several benefits that made it the preferred choice for most desktop applications developed today, including:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Truly free and open source"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Code once, deploy on Windows, macOS, and Linux"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Unlimited flexibility when it comes to rich user interfaces"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Vast adoption"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"That said, Electron often receives a great deal of criticism, especially among developers. Having worked on desktop development myself for a couple of years both professionally and for fun, I enjoy reading discussions about this topic and trying out different approaches. Over time, I developed the idea that Electron is a necessary evil, something that is (surprisingly) superior to the alternatives for many use-cases."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This article is all about discussing the different approaches you can use to create cross-platform applications, along with their pros and cons. Ultimately, you will have a basic understanding of the different alternatives and their ideal use-cases. Perhaps, in the end, you will agree with me: Electron is not that bad."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Before jumping to the various alternatives, we first need to define the main Electron’s downsides people usually complain about:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"High RAM consumption"}]},{type:a,value:": Electron apps tend to use a minimum of 80 MB of RAM, with lightweight apps in the 130-250 MB range and monsters like Slack sometimes reaching multi-GB values."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Large storage footprint"}]},{type:a,value:": Shipping with a full Chromium runtime, you can expect most Electron apps to consume "},{type:b,tag:Y,props:{},children:[{type:a,value:"at least"}]},{type:a,value:" 150 MB of storage."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Slow"}]},{type:a,value:": Some Electron apps are definitely slow, but that can depend on many factors. Overuse of animations, for example, can substantially increase the CPU usage and thus make the app feel slower. Did you notice that most desktop apps that feel snappy don’t include any animation? Just because you can with Electron, doesn’t mean you should."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Lack of native UI\u002FUX"}]},{type:a,value:": Electron renders webpages and not native controls. On one hand, that gives complete freedom to designers, but on the other, the app looks different from the “native” ones. Unsurprisingly, this complaint usually comes from macOS users, where a single “native” framework exists: Cocoa. Due to the fragmentation of GUI frameworks on other platforms (especially Windows), non-macOS users are usually more tolerant of apps not sharing the same look and feel."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"Worse security"}]},{type:a,value:": Compared to the average website running on your web browser, Electron apps are incredibly more powerful (and dangerous) thanks to the NodeJS integration. If not properly configured, web pages running inside Electron can gain access to the entire system, which is particularly dangerous when displaying third-party websites. Luckily, it doesn’t have to be that way, as Electron provides "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.electronjs.org\u002Fdocs\u002Ftutorial\u002Fcontext-isolation",rel:[K,L,M],target:N},children:[{type:a,value:"Context Isolation"}]},{type:a,value:" to shield the renderer from NodeJS APIs. Moreover, some believe that the NPM ecosystem is less secure than other counterparts."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"With them in mind, let’s see how the other approaches compare with Electron."}]},{type:a,value:f},{type:b,tag:aI,props:{id:pT},children:[{type:b,tag:t,props:{href:"#cross-platform-core-native-ui",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pU}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Often considered as the gold-standard of cross-platform development, this approach consists in extracting the application’s business logic in a library (usually written in low level and cross-platform languages such as C++ or Rust), and then write a separate GUI for each platform, leveraging on the native frameworks. The resulting applications are fast, light-weight, and have an authentic look and feel."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If the results are so good, why doesn’t everyone follow this approach? Well, turns out this approach is very expensive from a development perspective. Not only you have to implement N different UIs (which is already not trivial, as you have to learn 3 different native frameworks, along with their quirks), but the interoperability between these low-level languages and the UI one is not exactly enjoyable. In a nutshell:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Every feature that has an impact on the GUI, will take N times as much to implement"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Interoperability with the low-level library is not always convenient, especially when you start dealing with strings or dynamically allocated memory. Who frees that memory? That’s a question you’ll ask yourself a lot. Moreover, the answer depends on the current platform, as some use garbage collection, some reference counting, and some manual management."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So… should we discard this option? No, not always. If most of your application’s complexity is related to the business logic and the UI is simple, this approach might be absolutely feasible (and arguably, even preferred). An example I came across is Backblaze’s client UI, which according to "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.backblaze.com\u002Fblog\u002F10-rules-for-how-to-write-cross-platform-code\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"this old article"}]},{type:a,value:", uses this approach. This makes perfect sense, as the UI itself is rather simple, only composed of a few buttons and labels."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"On the other hand, if the UI is substantially complex or contains custom components, choosing Electron is generally a good choice. Some will surely argue that you don’t “need” custom components, but what about code editors then? Do you think something as complex and flexible as VSCode would have been feasible with native controls? I honestly don’t think so."}]},{type:a,value:f},{type:b,tag:aI,props:{id:pV},children:[{type:b,tag:t,props:{href:"#bonus",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pW}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Starting from the same premise, an intermediate approach I personally like is wxWidgets, a mature library that enables developers to create cross-platform apps from a single C++ codebase. What I particularly like about wxWidgets is that it uses native widgets as much as possible. For "},{type:b,tag:X,props:{},children:[{type:a,value:"simple"}]},{type:a,value:" UIs, the resulting apps are fast, lightweight, and look great."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is the approach I personally used for "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fmodulo",rel:[K,L,M],target:N},children:[{type:a,value:"modulo"}]},{type:a,value:", a lightweight graphical extension for "},{type:b,tag:t,props:{href:eI,rel:[K,L,M],target:N},children:[{type:a,value:dh}]},{type:a,value:", for which I implemented the business logic in Rust and the UI code in C++."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"An example of wxWidgets interfaces in modulo",src:"\u002Fposts\u002Fmodulo.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Again, I would only consider this approach for simple UIs, as there is a substantial development overhead. Moreover, as the UI gets more complex, the resulting apps start to look increasingly “off” compared to native ones."}]},{type:a,value:f},{type:b,tag:aI,props:{id:pX},children:[{type:b,tag:t,props:{href:"#qt",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:pY}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"“Just use QT, it’s much better than Electron!”"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you browse discussions about newly-released Electron apps, that comment is guaranteed to be present. In a nutshell, QT is a cross-platform app development framework that was particularly popular a few years ago. With QT, you can support the 3 major platforms from a single C++ codebase, or if you don’t like the language, there is a strong possibility some bindings might exist for your favorite one (notably Python)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Apps made with QT are usually less resource hungry and faster (when using C++), but how much?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Taking as a reference my favorite QT-application, Telegram Desktop, we can see that:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"It uses 130 MB of RAM"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"It occupies 70.8 MB of storage"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For reference, these are the values from a comparable Electron application, Whatsapp Desktop:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"254 MB of RAM"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"450 MB of storage (this is a lot, I know, but this is WhatsApp's fault rather than Electron’s. Many Electron apps I use daily, such as Bitwarden and Obsidian, use ~170 MB)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, the QT counterpart is usually consuming roughly half the resources. But is it worth it?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a system with 8 GB of RAM, which is pretty common today, 250 MB of RAM represents roughly ~3% of the total. For short-running applications, arguably that number is pretty much insignificant. Of course, not everybody will agree on this point."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the same time, choosing QT means accepting some less-than-ideal compromises, with the first and foremost being the license. QT is dual-licensed: you can either choose the open-source license or the commercial one (spoiler alert, be prepared to spend thousands of dollars on this one). If you are creating an open-source project, then you are in luck, QT is free to use as long as you release your code as GPL (although recently with some "},{type:b,tag:t,props:{href:"https:\u002F\u002Fnews.ycombinator.com\u002Fitem?id=22821050",rel:[K,L,M],target:N},children:[{type:a,value:"controversies"}]},{type:a,value:"). But what if you are a small software company looking to release commercial software? There might be a chance to dynamically link the LGPL version and avoid paying for the complete license, but that’s not always possible. I’m sure some people will disagree, but I think QT is a viable option only for open-source projects or large enterprises, everything in-between won’t be financially sustainable."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Moreover, although QT tries to resemble the platform’s look and feel, you can definitely tell something is wrong. Just check the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fsqlitebrowser.org\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"DB Browser for SQLite"}]},{type:a,value:" macOS version (which I think is a great piece of software, I’m only pointing out how the “look and feel” is definitely off)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Keeping in mind that a well-written Electron application will use twice the resources of the equivalent QT counterpart, is it really worth it? Only you can answer this question, but I honestly don’t think the gains (or better, the resource savings) are significant enough to ditch Electron."}]},{type:a,value:f},{type:b,tag:aI,props:{id:pZ},children:[{type:b,tag:t,props:{href:"#localhost-server",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:p_}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For long-running processes, another common approach is to provide a web GUI in the user’s browser connected to a localhost-only HTTP server. This solution, currently used by "},{type:b,tag:t,props:{href:"https:\u002F\u002Fsyncthing.net\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Syncthing"}]},{type:a,value:bf},{type:b,tag:t,props:{href:"https:\u002F\u002Fjupyter.org\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Jupyter Notebook"}]},{type:a,value:" to name a few, shares many of Electron’s advantages regarding rich user interfaces, while being significantly light-weight (no need to bundle an entire Chromium runtime). That said, there are two major downsides:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Less-than-ideal integration with the OS, as the GUI will appear as a website rather than an application. This also means no menu bar, for example."}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"No control over the user’s browser, which means having to support widely different rendering behaviors. To be fair, as long as you are not committed to supporting IE or you need some fancy new features, this problem is becoming less and less relevant."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Although I consider this approach viable in a number of use-cases, I’m far from considering it the optimal one. I know this is highly subjective, but I really appreciate having a separate window for each application, along with good OS integrations such as native menu bars and dialogs."}]},{type:a,value:f},{type:b,tag:aI,props:{id:p$},children:[{type:b,tag:t,props:{href:"#embedding-the-systems-webview",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qa}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"One of the usual complaints against Electron is that every application ships with a separate Chromium runtime, wasting ~100\u002F200 MB of storage per app. A natural question arises: "},{type:b,tag:Y,props:{},children:[{type:a,value:"why isn’t this runtime extracted into a single, system-wide module that is then shared between all applications (similar to the JVM)?"}]},{type:a,value:" Actually, I’m going to take it even further: "},{type:b,tag:Y,props:{},children:[{type:a,value:"given that most OSes ship with an embeddable webview component, why don’t we use it instead of a separate runtime?"}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"On paper, this approach sounds like the ideal solution: the resulting binary is very light-weight (few megabytes) and can still leverage web technologies to create rich and cross-platform user interfaces. Moreover, direct OS integration is also possible, as the resulting programs can access the native facilities (menu bars, dialogs, etc) from the “wrapper” code. Many projects are trying to overcome Electron’s drawbacks using this approach, such as "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fpojala\u002Felectrino",rel:[K,L,M],target:N},children:[{type:a,value:"Electrino"}]},{type:a,value:fR},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebview\u002Fwebview",rel:[K,L,M],target:N},children:[{type:a,value:"webview"}]},{type:a,value:fR},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ftauri-apps\u002Ftauri",rel:[K,L,M],target:N},children:[{type:a,value:"Tauri"}]},{type:a,value:", and many more."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For many months, I considered this approach superior to Electron, with development convenience being the only downside. You see, if you choose this approach, you will need to do a lot of “plumbing” yourself, as you don’t have access to any of the convenient APIs exposed by Electron. Do you want a menu bar? You have to write the low-level bindings yourself, often multiple times depending on the number of platforms you are looking to support."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At that time, I wanted to create a GUI for "},{type:b,tag:t,props:{href:dr,rel:[K,L,M],target:N},children:[{type:a,value:dh}]},{type:a,value:", and that seemed like the perfect opportunity to experiment with these technologies. I forked the original webview project (as I wanted to add a few features) and created a first, very alpha version for Windows:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"An example of Embeddable Webview GUI",src:"\u002Fposts\u002Fespanso-gui.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As expected, implementing the business logic was trickier than Electron, having to manually glue together a mix of C++, Rust and JavaScript, but the application was very lightweight, with a consumption of ~2 MB of storage and ~70 MB of RAM. Sounds like a success right? Well, turns out I overlooked a crucial aspect: compatibility."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Imagine building an application that relies on a complex library to perform the core-functionality. This library is not really compatible with all the platforms you are trying to support, so you choose some local ports of this library, which are all roughly compliant with a common specification. The “only” downside is that you cannot control the library version. Turns out there is a bug in the Windows port of the library, what do you do? Even if a fix is shipped in the next library version, you can’t control the version used by users. As you might have understood, this “complex library” is nothing more than the embedded webview."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Last year, the situation was even worse, as Windows supported only subpar webviews. Besides the IE-based one, which I would only recommend to your greatest enemies, Windows offered the old-Edge-based one, which was “kind of” decent, but definitely worse than the WebKit-based ones included in macOS and Linux. Luckily, with the new Chromium-based Edge browser, Windows will also ship with a modern, embeddable webview called "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdeveloper.microsoft.com\u002Fen-us\u002Fmicrosoft-edge\u002Fwebview2\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"WebView2"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As we previously said, depending on a component that you can’t control is risky, as the version is locked and so are its bugs. That’s also part of why companies like Slack moved away from this approach (more on this "},{type:b,tag:t,props:{href:"https:\u002F\u002Fnews.ycombinator.com\u002Fitem?id=18761840",rel:[K,L,M],target:N},children:[{type:a,value:fa}]},{type:a,value:fc}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Should we always discard this approach? Definitely not. But I would personally consider it only when the complexity of the application is relatively low, especially when it comes to styling."}]},{type:a,value:f},{type:b,tag:aI,props:{id:qb},children:[{type:b,tag:t,props:{href:"#notable-mentions",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qc}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another promising alternative is "},{type:b,tag:t,props:{href:"https:\u002F\u002Fsciter.com\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Sciter"}]},{type:a,value:", which makes it possible to create very lightweight and cross-platform applications using HTML\u002FCSS and any language that supports C bindings (most do). The biggest drawback is that the engine is not open-source, although it "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.kickstarter.com\u002Fprojects\u002Fc-smile\u002Fopen-source-sciter-engine",rel:[K,L,M],target:N},children:[{type:a,value:"might become in the future"}]},{type:a,value:". Don’t get me wrong, I totally understand the author’s desire to offer a commercial license to fund its development, but I tend to prefer open-source alternatives when possible."}]},{type:a,value:f},{type:b,tag:aI,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The goal of this article wasn’t to prove how Electron is always the best choice (it isn’t), but rather, to provide a broad overview of the areas in which it is best suited. For example, you shouldn’t use it for applications with simple UIs, or if you don’t need to go cross-platform. In such cases, choosing the native frameworks will most likely be the best choice. That said, if you need to go cross-platform and your application is sufficiently complex, then Electron is really not bad at all compared to the alternatives, especially when done right. Of course, there are some very bloated Electron apps out there and I don’t like them either, but that’s mostly due to careless developers, not Electron."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Finally, keep in mind that without Electron some developers might not be able to manage the burden of cross-platform development, and thus, some great apps might not even exist. That’s why I consider it a "},{type:b,tag:Y,props:{},children:[{type:a,value:"necessary evil."}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qd},{type:b,tag:t,props:{href:eb,rel:[K,L,M],target:N},children:[{type:a,value:ec}]},{type:a,value:cZ},{type:b,tag:t,props:{href:dE,rel:[K,L,M],target:N},children:[{type:a,value:gi}]},{type:a,value:ay}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:hW}]}]},dir:aZ,path:"\u002Farticles\u002F2021-01-21-why-electron-is-a-necessary-evil",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"why-electron-is-a-necessary-evil"},{slug:"2021-01-01-understanding-strings-in-rust",description:"When I started learning Rust a couple of years ago, the first thing that really got me thinking was strings. You see, in Rust, there are 2 string types: the String and the &str types.",layout:aU,title:"Understanding Strings in Rust",author:aV,date:"2021-01-01T00:00:00.000Z",categories:"strings str rust tutorial guide understand understanding ownership",toc:[{id:qe,depth:ad,text:eU},{id:qf,depth:aH,text:qg},{id:qh,depth:aH,text:qi},{id:bl,depth:aH,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qj},{type:b,tag:j,props:{},children:[{type:a,value:cG}]},{type:a,value:qk},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:ql}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you go on with examples and tutorials, you see that both of them are thoroughly used, so my natural question was: when should I use one over the other?"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article, we are going to explore the differences between the two, but first, we will need to discuss the way strings are kept in memory."}]},{type:a,value:f},{type:b,tag:af,props:{id:qe},children:[{type:b,tag:t,props:{href:"#memory-model",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:eU}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let's first start with a basic example (don’t pay attention to the language itself, the following considerations apply to Python, Go, Java, and many others). We want to create a string surrounded by spaces, such as:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:qm},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:qn}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From a memory standpoint, the situation is characterized by 2 memory entities:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"A memory region in the heap containing the actual string content"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"A string record on the stack containing the memory location of the first element in the heap (and generally, its length)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eU,src:"\u002Fposts\u002Fstring1.JPEG"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Looking at our example, we can say that "},{type:b,tag:j,props:{},children:[{type:a,value:"s"}]},{type:a,value:" does not contain the actual string content, but instead, it is simply a reference to the memory region containing the content."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is in contrast with the other basic data types such as integers, for which their value is usually stored on the stack, due to their fixed size."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let's say that we want to apply the "},{type:b,tag:j,props:{},children:[{type:a,value:qo}]},{type:a,value:" operation to the string (or "},{type:b,tag:j,props:{},children:[{type:a,value:"strip()"}]},{type:a,value:" in Python) to obtain its content, but without the surrounding spaces. We could do:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:qm},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:qn}]},{type:a,value:"\nvar t "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" s"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:qo}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, the variable "},{type:b,tag:j,props:{},children:[{type:a,value:"t"}]},{type:a,value:" will hold the value "},{type:b,tag:j,props:{},children:[{type:a,value:hX}]},{type:a,value:", without any surrounding space."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In most garbage collected languages that operation causes a separate string being created, so you end-up with two memory blocks on the heap:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eU,src:"\u002Fposts\u002Fstring2.JPEG"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is where Rust magic happens. If we assume that neither "},{type:b,tag:j,props:{},children:[{type:a,value:fC}]},{type:a,value:" nor "},{type:b,tag:j,props:{},children:[{type:a,value:qp}]},{type:a,value:" will be modified (they are immutable), we can optimize the previous operation by simply creating another string record having the start index at the second cell of "},{type:b,tag:j,props:{},children:[{type:a,value:qp}]},{type:a,value:" and having a length of 5 instead of 7."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:eU,src:"\u002Fposts\u002Fstring3.JPEG"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"From the user perspective, T will be a string with length 5 and with content \"hello\",  but no additional allocation will be necessary, greatly improving memory efficiency."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In Rust, what we called \"string record\" is referred to as "},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:" type, and represents a reference to a contiguous char array, along with its length. Technically, this is called a reference to a string slice."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Of course, this technique cannot be applied to every situation. For example, if we call the "},{type:b,tag:j,props:{},children:[{type:a,value:"to_uppercase()"}]},{type:a,value:" method, the resulting string will not be a different view of the same string, but instead, it will be an entirely different one. In this case, an additional allocation will be needed."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The powerful aspect of &str types is that the location of the string content can vary based on the situation. It can reference a memory region on the heap, a location on the stack, or even a static portion of the executable itself."}]},{type:a,value:f},{type:b,tag:aI,props:{id:qf},children:[{type:b,tag:t,props:{href:"#string-literals",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qg}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"One thing that often confuses beginners are string literals. In particular, when you write the following code in Rust:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" str1 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hX}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"you are not allocating a string in the heap. Instead,  you're creating an immutable string literal, whose content is stored inside the binary itself. This is possible because its content is known at compile-time, which, on the other hand, is not the case with the following:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:fX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:en}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" str2 "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:hF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:qq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, the string content is not known at compile-time, so it causes an allocation on the heap, creating the string “10”."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If we now analyze the type of the two previous variables, we notice that "},{type:b,tag:j,props:{},children:[{type:a,value:"str1"}]},{type:a,value:qr},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:bf},{type:b,tag:j,props:{},children:[{type:a,value:"str2"}]},{type:a,value:qr},{type:b,tag:j,props:{},children:[{type:a,value:cG}]},{type:a,value:". This is because the first string does not allocate any memory on the heap, whereas the second one does. As a rule of thumb,  anytime you allocate new memory you will need to use the String type, whereas if you only need a different view of an existing string, the &str type will be more adequate."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Technically, the "},{type:b,tag:j,props:{},children:[{type:a,value:cG}]},{type:a,value:" type is an "},{type:b,tag:Y,props:{},children:[{type:a,value:"owned"}]},{type:a,value:" type, whereas the "},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:" type is not. To really understand the difference between the two, you will need to grasp the concepts of ownership and borrowing. If you need some help, "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=N2SgcDO0QL4",rel:[K,L,M],target:N},children:[{type:a,value:"I made a video"}]},{type:a,value:" on the topic a few months ago."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In a nutshell, when you allocate some memory on the heap, there must be a way to free it when not used anymore, otherwise, you’ll produce a memory leak. In Java or Go, that’s the responsibility of the garbage collector, but in Rust, the ownership system takes care of freeing the memory once the owner goes out of scope."}]},{type:a,value:f},{type:b,tag:aI,props:{id:qh},children:[{type:b,tag:t,props:{href:"#tips-for-beginners",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qi}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now that you know the basics, let me give you a couple of tips:"}]},{type:a,value:f},{type:b,tag:gj,props:{id:"convert-between-the-two"},children:[{type:b,tag:t,props:{href:"#convert-between-the-two",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Convert between the two"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You can easily convert between the two by using the "},{type:b,tag:j,props:{},children:[{type:a,value:"to_string()"}]},{type:a,value:" method and the borrow operator (&), such as:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Start from a string literal &str"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" foo "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hX}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Convert to a owned String"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" bar "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" foo"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:qq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Get the string literal &str of bar"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:" car "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:a,value:"bar\n"}]}]}]},{type:a,value:f},{type:b,tag:gj,props:{id:"strings-in-function-signatures"},children:[{type:b,tag:t,props:{href:"#strings-in-function-signatures",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Strings in function signatures"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When you are designing function signatures, keep in mind that generally, strings are passed as "},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:" slices and returned as owned Strings, such as:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bY,G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ca}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cb,r]},children:[{type:a,value:"concatenate_strings"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:pk},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:qs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cL}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:gg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cG}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aM,A]},children:[{type:a,value:"format!"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"{}{}\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" s1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:qs},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This prevents unnecessary copies when passing the parameters, but also guarantees that the output string will live long enough to be received by the calling code. Moreover, it allows the function to accept both string slices and owned Strings. Of course, there are many exceptions to this rule, but for most cases, and most importantly until you really understand ownership and borrowing, this approach will serve you well."}]},{type:a,value:f},{type:b,tag:aI,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This was just a quick introduction to Rust strings, thank you for reading!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qd},{type:b,tag:t,props:{href:dE,rel:[K,L,M],target:N},children:[{type:a,value:gi}]},{type:a,value:cZ},{type:b,tag:t,props:{href:eb,rel:[K,L,M],target:N},children:[{type:a,value:ec}]},{type:a,value:ay}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qj},{type:b,tag:j,props:{},children:[{type:a,value:cG}]},{type:a,value:qk},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:ql}]}]},dir:aZ,path:"\u002Farticles\u002F2021-01-01-understanding-strings-in-rust",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"understanding-strings-in-rust"},{slug:"2020-05-29-regex101-the-ultimate-tool-for-regular-expressions",description:"If you've been programming for a while, you will surely know how useful regular expressions can be when dealing with text.\nYou may want to validate a string (such as checking whether an email field is valid) or extract some information from formatted text. In both cases, building the right regex can take many attempts.",layout:aU,title:"Regex101 - The Ultimate Tool for Regular Expressions",author:aV,date:"2020-05-29T00:00:00.000Z",categories:"regex tutorial visual debugger regex101 regular expression",toc:[{id:qt,depth:ad,text:qu},{id:qv,depth:ad,text:qw},{id:qx,depth:ad,text:qy},{id:qz,depth:ad,text:qA},{id:bl,depth:ad,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qB},{type:b,tag:X,props:{},children:[{type:a,value:qC}]},{type:a,value:qD}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qE}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Today I'm going to introduce you to an incredibly useful tool called "},{type:b,tag:t,props:{href:qF,rel:[K,L,M],target:N},children:[{type:a,value:qG}]},{type:a,value:", which makes working with Regexes a breeze."}]},{type:a,value:f},{type:b,tag:af,props:{id:qt},children:[{type:b,tag:t,props:{href:"#validating-a-regex",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qu}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As an example, let's create a very simple regex to validate email addresses. Please note that this is only a toy example, as "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.regular-expressions.info\u002Femail.html",rel:[K,L,M],target:N},children:[{type:a,value:"validating email addresses is harder than it seems"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We consider the following 5 input strings:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bd,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"example@example.com\nexample.com\nexample@\njohn@company.net\ninfo@example\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can already tell, only the first and fourth addresses are correct.\nA first attempt would be using the "},{type:b,tag:j,props:{},children:[{type:a,value:"[a-zA-Z]+\\@[a-zA-Z]+\\.[a-z]+"}]},{type:a,value:" Regex (which doesn't account for many things, but for this example is enough)."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Open "},{type:b,tag:t,props:{href:qF,rel:[K,L,M],target:N},children:[{type:a,value:qG}]},{type:a,value:" and paste the input in the "},{type:b,tag:Y,props:{},children:[{type:a,value:"TEST STRING"}]},{type:a,value:" field, then type the regex on the "},{type:b,tag:Y,props:{},children:[{type:a,value:"REGULAR EXPRESSION"}]},{type:a,value:" field.\nAs a result, we will see:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Validation Regex",src:"\u002Fposts\u002Fvalidation-regex.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Regex101 highlighted the lines that matched our regex, which makes experimenting with it a breeze! That said, this is just the tip of the iceberg."}]},{type:a,value:f},{type:b,tag:af,props:{id:qv},children:[{type:b,tag:t,props:{href:"#extracting-data",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qw}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another common task involves extracting a substring (group) from a formatted text and this is one of the areas in which Regex101 shines."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let's start from another example, a simple CSV formatted list of entries:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bd,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"John;Snow;5\nEddard;Stark;3\nTyrion;Lannister;6\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We now want to extract the name of each character,  and to do that we can use a simple regex:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bd,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"^([a-zA-Z]+);\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Typing this regex on Regex101 along with the example produces the following result:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Extracting Data Regex 1",src:"\u002Fposts\u002Fextracting-data-regex1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, the names are highlighted. But the most important thing can be found on the right side:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Extracting Data Regex 2",src:"\u002Fposts\u002Fextracting-data-regex2.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"All the group contents are extracted and displayed in a very convenient way, making working with them a piece of cake!"}]},{type:a,value:f},{type:b,tag:af,props:{id:qx},children:[{type:b,tag:t,props:{href:"#substitution",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qy}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You may even want to take it a step further, extracting the content of a group and "},{type:b,tag:Y,props:{},children:[{type:a,value:"replacing"}]},{type:a,value:" it with something else. With Regex101 you can indeed do that by opening the "},{type:b,tag:Y,props:{},children:[{type:a,value:qH}]},{type:a,value:" panel (on the bottom) and typing your replace string:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Replace Regex 1",src:"\u002Fposts\u002Freplace-regex-1.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Moreover, if you use the "},{type:b,tag:j,props:{},children:[{type:a,value:"\\1"}]},{type:a,value:" operators, we can also restructure the lines completely. Change the original regex as follows:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bd,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"^([a-zA-Z]+);.*\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then, in the "},{type:b,tag:j,props:{},children:[{type:a,value:qH}]},{type:a,value:" field, type:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[bd,G]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"Hello $1\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The result is:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Substitution Regex 2",src:"\u002Fposts\u002Fsubstitution-regex-2.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You have no idea how many times this feature saved my day (which by the way is also available in most advanced text editors, such as Sublime Text)."}]},{type:a,value:f},{type:b,tag:af,props:{id:qz},children:[{type:b,tag:t,props:{href:"#code-generation",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qA}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another very useful feature is the automatic "},{type:b,tag:Y,props:{},children:[{type:a,value:"code generation"}]},{type:a,value:", available for a ton of languages out of the box. By clicking on the "},{type:b,tag:j,props:{},children:[{type:a,value:"Code Generation"}]},{type:a,value:" tab, we can access a section that will generate the regex boilerplate for us, so that we can use it in our programs\u002Fscripts with minimal effort:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Code Generator",src:"\u002Fposts\u002Fcode-generator-regex.png"},children:[]}]},{type:a,value:f},{type:b,tag:af,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This was just a quick introduction to Regex101, thank you for reading through!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you want to stay updated with those neat developer tricks and tools, follow me on "},{type:b,tag:t,props:{href:dE,rel:[K,L,M],target:N},children:[{type:a,value:gi}]},{type:a,value:cZ},{type:b,tag:t,props:{href:eb,rel:[K,L,M],target:N},children:[{type:a,value:ec}]},{type:a,value:ay}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qB},{type:b,tag:X,props:{},children:[{type:a,value:qC}]},{type:a,value:qD}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qE}]}]},dir:aZ,path:"\u002Farticles\u002F2020-05-29-regex101-the-ultimate-tool-for-regular-expressions",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"regex101-the-ultimate-tool-for-regular-expressions"},{slug:"2020-02-07-how-to-promote-open-source-project-on-github",description:"As a developer myself, I know how hard it can be to promote a project. You spent weeks, months, or even years, developing your idea, only to find out later that nobody is noticing it.\nTurns out that promotion, probably the least favourable thing for a programmer, is important as well.",layout:aU,title:"How to Promote Your Open Source Project",author:aV,date:"2020-02-07T00:00:00.000Z",categories:"github project promotion opensource how to tutorial",toc:[],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qI}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qJ}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article I’m going to summarize the things I learned with "},{type:b,tag:t,props:{href:ge,rel:[K,L,M],target:N},children:[{type:a,value:dh}]},{type:a,value:", my latest open-source project which, by the time I’m writing this article, reached more than 500 GitHub stars in about 4 months."}]},{type:a,value:f},{type:b,tag:av,props:{id:"1-first-impressions-matter"},children:[{type:b,tag:t,props:{href:"#1-first-impressions-matter",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"#1: First impressions matter"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Later in the article we’ll talk about "},{type:b,tag:Y,props:{},children:[{type:a,value:kc}]},{type:a,value:" to actually reach people, but first, it’s crucial to setup a nice landing page. For the majority of projects, a nicely written Readme on GitHub will serve the purpose just fine. The important things to include are:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"A screenshot of the project, or even better, an animated GIF"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"A general description, explaining the project goal and the features"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"A getting started section, explaining the "},{type:b,tag:Y,props:{},children:[{type:a,value:"minimum"}]},{type:a,value:" amount of steps required to use your project"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you want to take it a step further, building an actual website is a good idea. Nowadays, building project websites is pretty easy (as well as free), thanks to modern tools and services such as Jekyll and GitHub Pages. I personally took this approach with espanso by building the "},{type:b,tag:t,props:{href:eI,rel:[K,L,M],target:N},children:[{type:a,value:"website"}]},{type:a,value:", which has proven to be an effective way to attract users."}]},{type:a,value:f},{type:b,tag:av,props:{id:"2-make-users-life-easy"},children:[{type:b,tag:t,props:{href:"#2-make-users-life-easy",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"#2: Make users’ life easy"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I’ll never stress this enough. How many times have you enountered a super interesting project and wanted to try it out, just to later find out that to run it you need a 3gb compiler as well as all the required libraries. This problem is especially painful in languages such as Java, Golang, C or Rust, in which the compilation process can be far from trivial."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"There are many possible solutions, ranging from the easy to the complex ones. If you are using a compiled language, the bare minimum I would recommend is creating prebuilt binaries for the OS you are targeting, so that users can try out your project without installing the whole build system."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A more complex step could be integrating with package managers, so that the installation becomes just a couple of commands in the terminal. The situation here really depends on your target. For example, getting a package in PIP or Homebrew is super easy, whereas publishing on APT (the official Ubuntu\u002FDebian manager) is an enormous task."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another important detail which is often overlooked is documentation. Unless your project is super trivial, you should write instructions on how to use\u002Fconfigure it, even just a section in the Readme. Ideally, users should never have to read the sources to understand the basic functionality, because most often than not, they won't even try and will leave the project instead."}]},{type:a,value:f},{type:b,tag:av,props:{id:"3-reddit-is-your-friend-and-enemy"},children:[{type:b,tag:t,props:{href:"#3-reddit-is-your-friend-and-enemy",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"#3: Reddit is your friend and enemy"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"When it comes to promotion, social networks are usually the first place to go in order to reach potential users. Of course, every social network has its quirks, and some are more versed to software than others. From my experience, I can tell Reddit is the most powerful one, as well as the most dangerous. In particular, promotion there has to be done "},{type:b,tag:X,props:{},children:[{type:a,value:"very"}]},{type:a,value:" carefully, as a spammy behavior will trigger waves of haters against your project."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The easiest way to get some early feedback is to post your GitHub page on "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.reddit.com\u002Fr\u002Fcoolgithubprojects\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"r\u002Fcoolgithubprojects"}]},{type:a,value:bf},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.reddit.com\u002Fr\u002Fopensource",rel:[K,L,M],target:N},children:[{type:a,value:"r\u002Fopensource"}]},{type:a,value:". Then things get a bit tricky, as posting on other subreddits would usually result in a ghost ban. To overcome this problem, the key is to provide value. Does your project solve some interesting technical challenges? If the answer is yes, it may be a good idea to write an "},{type:b,tag:X,props:{},children:[{type:a,value:"article"}]},{type:a,value:" and posting it on a related subreddit. Inside the article, you can "},{type:b,tag:X,props:{},children:[{type:a,value:"mention"}]},{type:a,value:" your project, so that new people get to know it, without looking spammy. For example, because I couldn’t find any resource about publishing a Rust project on Homebrew when working on espanso, I decided to "},{type:b,tag:t,props:{href:"https:\u002F\u002Ffedericoterzi.com\u002Fblog\u002Fhow-to-publish-your-rust-project-on-homebrew\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"write an article"}]},{type:a,value:" about the process and then I published it on "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.reddit.com\u002Fr\u002FRust",rel:[K,L,M],target:N},children:[{type:a,value:"r\u002Frust"}]},{type:a,value:". In this way, you are providing value to the user without being spammy."}]},{type:a,value:f},{type:b,tag:av,props:{id:"4-other-sources"},children:[{type:b,tag:t,props:{href:"#4-other-sources",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"#4: Other sources"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Beside Reddit, there are other viable alternatives to promote a project. If you are lucky enough to get featured in the homepage of "},{type:b,tag:X,props:{},children:[{type:a,value:"Hackernews"}]},{type:a,value:", your GitHub page will generally experience a ton of traffic. Personally, I never had any success posting espanso there, getting almost no traction at all. That said, last weekend something pretty interesting happened: someone posted the espanso's GitHub page on HN and, for about a couple of hours, it remained in the front page. The results were astonishing: 200 stars and more than a thousand user visits."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Star history of the project",src:"\u002Fposts\u002Fstargazers.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Another powerful website is YouTube. In particular, getting featured in the right video can drive a significant amount of traffic to your project. The key here is to find YouTubers interested in the problems you are trying to solve, and ask them if they could be interested in covering your project. Most won't even respond, but with some luck you may get good results."}]},{type:a,value:f},{type:b,tag:av,props:{id:"0-build-something-interestinguseful"},children:[{type:b,tag:t,props:{href:"#0-build-something-interestinguseful",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"#0: Build something interesting\u002Fuseful"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This may sound overly simplicistic, but it’s actually the most important concept. Perhaps  you have built something technically remarkable, but if it’s not interesting or useful to someone, then it’s unlikely to generate a following. Don’t get me wrong, it doesn’t have to target a wide audience, niche projects are fine. In fact, they are often more successful than general ones, solving the needs of a relatively small group of users."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I fell in this trap many times in my life, and in the beginning it’s easy to get hurt. After all, spending weeks in something that doesn’t generate any interest it’s pretty frustrating. In the end, the only reasonable thing to do is being realistic: it’s totally fine to build something just for yourself, but don’t expect a ton of users if you build the next todo app :)"}]},{type:a,value:f},{type:b,tag:av,props:{id:"bonus-be-nice"},children:[{type:b,tag:t,props:{href:"#bonus-be-nice",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"#Bonus: Be nice"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Open Source is one of the greatest things happening in our planet, and we must preserve it. It's very important to remember that at the other side of the screen there are humans, with a busy life and emotions as everybody else. For this reason, when interacting with a user asking for help or a project maintainer, remember to be nice."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qI}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qJ}]}]},dir:aZ,path:"\u002Farticles\u002F2020-02-07-how-to-promote-open-source-project-on-github",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"how-to-promote-open-source-project-on-github"},{slug:"2019-10-06-how-to-publish-your-rust-project-on-homebrew",description:"Last week I finally released the first version of espanso, a cross-platform, system-wide Text Expander written in Rust.",layout:aU,title:"How to Publish your Rust project on Homebrew",author:aV,date:"2019-10-06T00:00:00.000Z",categories:"rust homebrew macos publish project cli app github manager",toc:[{id:qK,depth:aH,text:qL},{id:qM,depth:aH,text:qN},{id:qO,depth:aH,text:qP},{id:qQ,depth:aH,text:qR},{id:qS,depth:aH,text:qT},{id:bl,depth:aH,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qU},{type:b,tag:t,props:{href:dr,rel:[K,L,M],target:N},children:[{type:a,value:dh}]},{type:a,value:qV},{type:b,tag:Y,props:{},children:[{type:a,value:qW}]},{type:a,value:qX}]},{type:a,value:f},{type:a,value:f},{type:b,tag:hY,props:{},children:[{type:a,value:B},{type:b,tag:ag,props:{src:"\u002Fassets\u002Fimages\u002Fespanso.gif"},children:[]},{type:a,value:B},{type:b,tag:hZ,props:{},children:[{type:a,value:"Example of espanso in action."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I've built many projects in my life, but this time I wanted to create something people would actually use. Therefore, one of the key aspects to consider was the installation process: "},{type:b,tag:X,props:{},children:[{type:a,value:"it has to be easy"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Being a cross-platform tool, I had to consider the best installation method for each platform and when it comes to "},{type:b,tag:X,props:{},children:[{type:a,value:"macOS"}]},{type:a,value:", the de-facto way to install a cli tool is by using "},{type:b,tag:t,props:{href:"https:\u002F\u002Fbrew.sh\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Homebrew"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In this article I will show you the publishing process I used for my tool,  "},{type:b,tag:t,props:{href:dr,rel:[K,L,M],target:N},children:[{type:a,value:dh}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:aI,props:{id:qK},children:[{type:b,tag:t,props:{href:"#preparing-the-binary",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qL}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In order to create an Homebrew package, you have to provide a "},{type:b,tag:X,props:{},children:[{type:a,value:"binary executable"}]},{type:a,value:". Luckly for us, Rust makes it super easy.  In your project directory, the following command will create an optimized, release-ready, version of your tool:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"cargo build --release\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You will now have a binary executable in the "},{type:b,tag:j,props:{},children:[{type:a,value:"target\u002Frelease\u002F"}]},{type:a,value:" directory, in my case:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"target\u002Frelease\u002Fespanso\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Homebrew expects a "},{type:b,tag:X,props:{},children:[{type:a,value:"TAR archive"}]},{type:a,value:", and it's easy to create one using the commands:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"cd target\u002Frelease\ntar -czf espanso-mac.tar.gz espanso\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, you should have the "},{type:b,tag:j,props:{},children:[{type:a,value:h_}]},{type:a,value:" archive in your "},{type:b,tag:j,props:{},children:[{type:a,value:"target\u002Frelease"}]},{type:a,value:" directory."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We will later need the "},{type:b,tag:X,props:{},children:[{type:a,value:"SHA256 hash"}]},{type:a,value:" of the archive, so let's calculate it using:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"shasum -a 256 espanso-mac.tar.gz\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qY}]},{type:a,value:f},{type:b,tag:aI,props:{id:qM},children:[{type:b,tag:t,props:{href:"#uploading-to-github-releases",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qN}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Homebrew requires a "},{type:b,tag:X,props:{},children:[{type:a,value:"URL to download your binary"}]},{type:a,value:". There are plenty of ways to host your executable, but for my project I used "},{type:b,tag:t,props:{href:"https:\u002F\u002Fhelp.github.com\u002Fen\u002Farticles\u002Fcreating-releases",rel:[K,L,M],target:N},children:[{type:a,value:"GitHub Releases"}]},{type:a,value:", mainly because it's free and easy to use."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Open your project's GitHub page, navigate to the "},{type:b,tag:Y,props:{},children:[{type:a,value:"Releases"}]},{type:a,value:" section and then click on "},{type:b,tag:Y,props:{},children:[{type:a,value:"Create a new release"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Insert a "},{type:b,tag:Y,props:{},children:[{type:a,value:"tag version"}]},{type:a,value:", such as "},{type:b,tag:j,props:{},children:[{type:a,value:"v0.1.0"}]},{type:a,value:", a title and then drag the previously created archive ( in my case "},{type:b,tag:j,props:{},children:[{type:a,value:h_}]},{type:a,value:" ) into the upload section. You should have something like this:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Github Release",src:"\u002Fposts\u002Fgithubrelease.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now click "},{type:b,tag:j,props:{},children:[{type:a,value:"Publish release"}]},{type:a,value:"   to complete the process."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the Release page, you'll need to grab the archive URL. Expand the "},{type:b,tag:j,props:{},children:[{type:a,value:"Assets"}]},{type:a,value:" section and copy the url of the "},{type:b,tag:j,props:{},children:[{type:a,value:h_}]},{type:a,value:" archive you've just uploaded. In my case:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fespanso\u002Freleases\u002Fdownload\u002Fv0.1.0\u002Fespanso-mac.tar.gz\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qY}]},{type:a,value:f},{type:b,tag:aI,props:{id:qO},children:[{type:b,tag:t,props:{href:"#preparing-the-github-repository",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qP}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Homebrew offers a way to create third-party repositories, "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdocs.brew.sh\u002FTaps",rel:[K,L,M],target:N},children:[{type:a,value:"Taps"}]},{type:a,value:".  In a nutshell, "},{type:b,tag:X,props:{},children:[{type:a,value:"Taps are just GitHub repositories"}]},{type:a,value:" with specific names and a few configuration files."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We will need to create one to host our project. Go ahead and create a new "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fnew",rel:[K,L,M],target:N},children:[{type:a,value:"GitHub repository"}]},{type:a,value:", having the following name:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"homebrew-\u003Cprojectname\u003E\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qZ},{type:b,tag:j,props:{},children:[{type:a,value:"\u003Cprojectname\u003E"}]},{type:a,value:" is the name of your project. In my case:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"homebrew-espanso\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After cloning your brand new repository on your local machine, you are ready for the next step."}]},{type:a,value:f},{type:b,tag:aI,props:{id:qQ},children:[{type:b,tag:t,props:{href:"#preparing-the-formula",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qR}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"You'll now need to create a  "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdocs.brew.sh\u002FFormula-Cookbook",rel:[K,L,M],target:N},children:[{type:a,value:q_}]},{type:a,value:" for your project, a very simple "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.ruby-lang.org\u002Fen\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Ruby"}]},{type:a,value:" file containing the instructions to install your binary on the user computers. In fact, Ruby knowledge is "},{type:b,tag:X,props:{},children:[{type:a,value:hN}]},{type:a,value:" required."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the cloned "},{type:b,tag:j,props:{},children:[{type:a,value:h$}]},{type:a,value:" directory, we will need the following file structure:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"- Formula\u002F\n    - espanso.rb\n- README.md\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So go ahead and create the "},{type:b,tag:j,props:{},children:[{type:a,value:q_}]},{type:a,value:" directory, containing the "},{type:b,tag:j,props:{},children:[{type:a,value:q$}]},{type:a,value:" file ( using the name of your project )."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:eg},{type:b,tag:j,props:{},children:[{type:a,value:q$}]},{type:a,value:" file, paste the following content:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# Documentation: https:\u002F\u002Fdocs.brew.sh\u002FFormula-Cookbook"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"#                https:\u002F\u002Frubydoc.brew.sh\u002FFormula"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# PLEASE REMOVE ALL GENERATED COMMENTS BEFORE SUBMITTING YOUR PULL REQUEST!"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:et}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cs}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:" Formula\n  desc "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ra}]}]},{type:a,value:"\n  homepage "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rb}]}]},{type:a,value:"\n  url "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rc}]}]},{type:a,value:"\n  sha256 "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rd}]}]},{type:a,value:"\n  version "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:re}]}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:rf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,rg]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:rh}]}]},{type:a,value:ri},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rj},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rk}]}]},{type:a,value:B},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ia}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ia}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let's analyze it step by step. In the first line you have to change "},{type:b,tag:j,props:{},children:[{type:a,value:cs}]},{type:a,value:" with your projects name ( without spaces ):"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:et}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cs}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:W}]},{type:a,value:" Formula\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then add a short description for your project:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"desc "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ra}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then insert your project repository or website:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"homepage "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rb}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:eg},{type:b,tag:j,props:{},children:[{type:a,value:"url"}]},{type:a,value:" field insert the archive URL we obtained in the second section:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"url "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rc}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And then the archive SHA256 hash we calculated earlier:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"sha256 "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rd}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then insert your project version ( the same you used in the release tag ):"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"version "},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:re}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And finally, change "},{type:b,tag:j,props:{},children:[{type:a,value:dh}]},{type:a,value:" with your "},{type:b,tag:X,props:{},children:[{type:a,value:"binary executable filename"}]},{type:a,value:", obtained from the first section:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,di]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:rf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,rg]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:rh}]}]},{type:a,value:ri},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rj},{type:b,tag:c,props:{className:[d,cc]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rk}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ia}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The last step is to "},{type:b,tag:X,props:{},children:[{type:a,value:"push"}]},{type:a,value:jO},{type:b,tag:j,props:{},children:[{type:a,value:h$}]},{type:a,value:" repo to GitHub:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"git add -A\ngit commit -m \"First release\"\ngit push\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Here you can check the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fhomebrew-espanso",rel:[K,L,M],target:N},children:[{type:a,value:h$}]},{type:a,value:" repository."}]},{type:a,value:f},{type:b,tag:aI,props:{id:qS},children:[{type:b,tag:t,props:{href:"#installing-the-package",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:qT}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"All right, if you followed me until here, your users are ready to install the package using Homebrew:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"brew tap federico-terzi\u002Fespanso\nbrew install espanso\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:qZ},{type:b,tag:j,props:{},children:[{type:a,value:"federico-terzi\u002Fespanso"}]},{type:a,value:" is your GitHub username combined with the project name."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As an example, let's say your username is "},{type:b,tag:j,props:{},children:[{type:a,value:"jon-snow"}]},{type:a,value:", your project is called "},{type:b,tag:j,props:{},children:[{type:a,value:"wolf"}]},{type:a,value:" and your "},{type:b,tag:j,props:{},children:[{type:a,value:"homebrew-wolf"}]},{type:a,value:" repository url is:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"https:\u002F\u002Fgithub.com\u002Fjon-snow\u002Fhomebrew-wolf\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"the users will install your package using:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"brew tap jon-snow\u002Fwolf\nbrew install wolf\n"}]}]}]},{type:a,value:f},{type:b,tag:aI,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This was a basic way to publish your package on Homebrew, but things can get much better. In fact, on "},{type:b,tag:t,props:{href:dr,rel:[K,L,M],target:N},children:[{type:a,value:dh}]},{type:a,value:" I "},{type:b,tag:X,props:{},children:[{type:a,value:"automated the whole process"}]},{type:a,value:" using "},{type:b,tag:t,props:{href:"https:\u002F\u002Fazure.microsoft.com\u002Fen-us\u002Fservices\u002Fdevops\u002Fpipelines\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Azure Pipelines"}]},{type:a,value:" so that everytime I push an update to the "},{type:b,tag:j,props:{},children:[{type:a,value:rl}]},{type:a,value:" branch on GitHub, my project is automatically built, tested and published on Homebrew. Let me know if you're interested to know more about that :)"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you liked the article and want to stay up to date, follow me on "},{type:b,tag:t,props:{href:eb,rel:[K,L,M],target:N},children:[{type:a,value:ec}]},{type:a,value:cZ},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi",rel:[K,L,M],target:N},children:[{type:a,value:"GitHub"}]},{type:a,value:" :)"}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:qU},{type:b,tag:t,props:{href:dr,rel:[K,L,M],target:N},children:[{type:a,value:dh}]},{type:a,value:qV},{type:b,tag:Y,props:{},children:[{type:a,value:qW}]},{type:a,value:qX}]}]},dir:aZ,path:"\u002Farticles\u002F2019-10-06-how-to-publish-your-rust-project-on-homebrew",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"how-to-publish-your-rust-project-on-homebrew"},{slug:"2019-09-03-3-great-python-tricks-you-may-not-know",description:"Python is a wonderful language. Other than being simple to learn and fast to write, it’s also very powerful thanks to its huge ecosystem. In fact, it has so many features that it’s easy to miss some good ones. In this article I’m going to show you 3 great Python tricks you may have missed:",layout:aU,title:"3 Great Python Tricks You May Not Know",author:aV,date:"2019-09-03T00:00:00.000Z",categories:"python tricks randomdevtricks development",toc:[{id:ee,depth:ad,text:ee},{id:dF,depth:ad,text:dF},{id:rm,depth:ad,text:rn},{id:bl,depth:ad,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:ro},{type:b,tag:Y,props:{},children:[{type:a,value:rp}]},{type:a,value:rq},{type:b,tag:X,props:{},children:[{type:a,value:rr}]},{type:a,value:rs}]},{type:a,value:f},{type:a,value:f},{type:b,tag:af,props:{id:ee},children:[{type:b,tag:t,props:{href:"#tqdm",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:ee}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you ever use Python to do some sort of elaboration, chances are you find yourself writing a for loop, iterating through a list of items to process each one them. For example:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:ef},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:ib}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ic}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:id},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:ef},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But how could you track the status of the process if the code took more than a few seconds to complete? You probably would start adding some prints:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:ef},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:ib}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ic}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Processing:\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:id},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:ef},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"Done!\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While this is a working solution, a smarter approach would be using tqdm."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:ee}]},{type:a,value:" is a Python library that makes it easy to show a smart progress bar for almost any kind of loop processing. Let’s see an example:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The first thing to do is installing the package using pip:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"pip install tqdm\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Then we can use it in our code by simply wrapping the iterable inside the "},{type:b,tag:j,props:{},children:[{type:a,value:"tqdm()"}]},{type:a,value:" call:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:du}]},{type:a,value:" tqdm "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:" tqdm\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:ef},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:" tqdm"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:ib}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ic}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:id},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:ef},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aR}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now if you execute this code, you will see a nice progress bar appear in your terminal."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"tqdm Progress Bar",src:"\u002Fposts\u002Ftqdmanimated.gif"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, besides the progress, it also shows the speed and the expected remaining time. The great thing is that you can use "},{type:b,tag:X,props:{},children:[{type:a,value:ee}]},{type:a,value:" with any iterable, making it trivial to improve your existing scripts!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This library has many more features, so if you haven’t already, check out the"},{type:b,tag:t,props:{href:"https:\u002F\u002Ftqdm.github.io\u002F",rel:[K,L,M],target:N},children:[{type:a,value:" official documentation"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:af,props:{id:dF},children:[{type:b,tag:t,props:{href:"#defaultdict",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:dF}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"One of the best things about Python is its simplicity. Once you know the basic structures of the language, you can immediately start writing code with it. While being a great aspect, it sometimes causes people to miss some neat data structures, such as "},{type:b,tag:j,props:{},children:[{type:a,value:dF}]},{type:a,value:". Let’s see where it can be useful with an example:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Given a text, you want to group words by their initials. The structure we’re looking for here is a "},{type:b,tag:X,props:{},children:[{type:a,value:"dictionary of lists"}]},{type:a,value:", having the initials as key and a list of words as value, something like this:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"{\n    \"a\": [\"all\", \"although\", \"average\"],\n    \"b\": [\"best\", \"both\"],\n    ...\n}\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So you start writing code, and you come up with something like this:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:a,value:rt},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"a long text but very interesting and fun\""}]},{type:a,value:"\ndata "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:ie}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:gk},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:gl},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:eW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:eX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ru},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:if0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But then you get the following error:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"Traceback (most recent call last):\n  File \"main.py\", line 5, in \u003Cmodule\u003E\n    data[word[0]].append(word)\nKeyError: 'a'\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Of course, the first time you see an initial, the associated list is not initialized. Easy to fix, we must first check if the key is present and, if not, initialize the list:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:a,value:rt},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rv}]},{type:a,value:rw},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:ie}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:gk},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:gl},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:eW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:eX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bu}]},{type:a,value:" word"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:f$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:rx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:if0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:rx},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And now it is working, but the code became bloated with the check. "},{type:b,tag:X,props:{},children:[{type:a,value:dF}]},{type:a,value:" is meant to solve that problem. In particular, we can specify the "},{type:b,tag:Y,props:{},children:[{type:a,value:"default value"}]},{type:a,value:" of a key that has never been accessed, such as an empty list. The code now becomes:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:du}]},{type:a,value:ig},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:" defaultdict\ntext "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rv}]},{type:a,value:rw},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:" defaultdict"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,at]},children:[{type:a,value:ry}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:ie}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:gk},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:gl},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:eW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:eX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ru},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:if0},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"As you can see, we completely removed the check, and the code is still working! This is possible because we replaced the dictionary with a "},{type:b,tag:Y,props:{},children:[{type:a,value:"defaultdict,"}]},{type:a,value:" specifying "},{type:b,tag:Y,props:{},children:[{type:a,value:ry}]},{type:a,value:" as the default value ( meaning an empty list )."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"A similar problem arises when we want to count the number of occurrences of each word in a text. While we could use a "},{type:b,tag:X,props:{},children:[{type:a,value:dF}]},{type:a,value:" with 0 as the default value, there’s a class made exactly for that purpose:"}]},{type:a,value:f},{type:b,tag:af,props:{id:rm},children:[{type:b,tag:t,props:{href:"#counter",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:rn}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The Counter class was specifically made to solve those kinds of problems, adding also a couple of extra goodies to the mix. For example:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We want to count the number of occurrences of each word in a text. With the Counter class, this is easily accomplished:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:du}]},{type:a,value:ig},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:" Counter\ntext "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rz}]},{type:a,value:"\n\nc "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:rA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ce}]},{type:a,value:gk},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bt}]},{type:a,value:gl},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:eW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:eX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n  c"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:a,value:cY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:oz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ar}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:eG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Actually we can do even better using the Counter’s constructor:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:du}]},{type:a,value:ig},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:" Counter\n\ntext "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:rz}]},{type:a,value:"\nc "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:rA},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:a},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:eW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:eX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:eG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, we can use some neat features such as the "},{type:b,tag:j,props:{},children:[{type:a,value:rB}]},{type:a,value:" method:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,cX]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"# Print the 3 most common words, along with their count"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:eG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dK}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:af,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"There are many other great tools hidden under the surface and I recommend you to check out the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Fcollections.html",rel:[K,L,M],target:N},children:[{type:a,value:"official documentation of the collections package"}]},{type:a,value:" to see many more."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:ro},{type:b,tag:Y,props:{},children:[{type:a,value:rp}]},{type:a,value:rq},{type:b,tag:X,props:{},children:[{type:a,value:rr}]},{type:a,value:rs}]}]},dir:aZ,path:"\u002Farticles\u002F2019-09-03-3-great-python-tricks-you-may-not-know",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"3-great-python-tricks-you-may-not-know"},{slug:"2019-08-27-how-to-build-remote-camera-app-android",description:"I love automating things, especially the boring ones. Having a Youtube channel, I found that editing videos can be very time-consuming and so I started thinking about ways to improve my workflow.",layout:aU,title:"Building a Remote Camera App for Android",author:aV,date:"2019-08-27T00:00:00.000Z",categories:"android development",toc:[{id:rC,depth:aH,text:rD},{id:rE,depth:aH,text:rF},{id:rG,depth:ad,text:rH},{id:rI,depth:ad,text:rJ},{id:rK,depth:ad,text:rL}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:rM},{type:b,tag:t,props:{href:dE,rel:[K,L,M],target:N},children:[{type:a,value:rN}]},{type:a,value:rO}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"My main bottlenecks are "},{type:b,tag:X,props:{},children:[{type:a,value:"cutting the video clips"}]},{type:a,value:bf},{type:b,tag:X,props:{},children:[{type:a,value:"transferring the videos to the PC"}]},{type:a,value:". Because I record those videos with my smartphone, I wanted an app that could:"}]},{type:a,value:f},{type:b,tag:am,props:{},children:[{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Control the camera from my PC"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Organize the clip files in a way that makes editing easier"}]},{type:a,value:f},{type:b,tag:I,props:{},children:[{type:a,value:"Send the clips automatically to my computer"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I searched for a while on the Play Store, but I couldn’t find an app that completely satisfied my needs and so, being a developer, "},{type:b,tag:Y,props:{},children:[{type:a,value:"I decided to create my own"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:aI,props:{id:rC},children:[{type:b,tag:t,props:{href:"#forking-open-camera",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:rD}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Creating a Camera App isn’t a trivial task, so it made sense to start from an existing project. Luckily for me, Mark Harman created "},{type:b,tag:t,props:{href:"https:\u002F\u002Fopencamera.sourceforge.io\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Open Camera"}]},{type:a,value:", an awesome open-source camera App for Android that I used as a starting point."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The goal at this point was clear, "},{type:b,tag:X,props:{},children:[{type:a,value:"forking Open Camera"}]},{type:a,value:" and adding the "},{type:b,tag:X,props:{},children:[{type:a,value:"remote control"}]},{type:a,value:bf},{type:b,tag:X,props:{},children:[{type:a,value:"file transfer"}]},{type:a,value:" functionality."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The Open Camera repository is hosted on "},{type:b,tag:X,props:{},children:[{type:a,value:"Sourceforge"}]},{type:a,value:" but I wanted to fork it on "},{type:b,tag:X,props:{},children:[{type:a,value:"Github"}]},{type:a,value:". Thanks to the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Fnew\u002Fimport",rel:[K,L,M],target:N},children:[{type:a,value:"Github Importer"}]},{type:a,value:" utility, the process was painless."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Forking Open Camera on Github",src:"\u002Fposts\u002Fopencameraimport.png"},children:[]}]},{type:a,value:f},{type:b,tag:aI,props:{id:rE},children:[{type:b,tag:t,props:{href:"#compile-the-sources",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:rF}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After cloning the repository, I was ready to open the project with Android Studio to study the source, but first, I had to check if I could compile the app."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I started the compilation process, but as I already had Open Camera installed on my smartphone, "},{type:b,tag:X,props:{},children:[{type:a,value:"I got a naming conflict"}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Naming Conflict Package Android",src:"\u002Fposts\u002Fandroidnamingconflict.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This happened because both the original and my forked version "},{type:b,tag:Y,props:{},children:[{type:a,value:"shared the same package id"}]},{type:a,value:". To fix this problem, all I had to do was to rename the package. All occurrences of "},{type:b,tag:j,props:{},children:[{type:a,value:"net.sourceforge.opencamera"}]},{type:a,value:" had been replaced with "},{type:b,tag:j,props:{},children:[{type:a,value:"com.federicoterzi.opencamerastudio"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This was easily accomplished with the "},{type:b,tag:X,props:{},children:[{type:a,value:"refactoring functions"}]},{type:a,value:" of Android Studio, combined with the very useful "},{type:b,tag:Y,props:{},children:[{type:a,value:"Find in Path"}]},{type:a,value:" action."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"It’s also necessary to "},{type:b,tag:X,props:{},children:[{type:a,value:"change the folder structure"}]},{type:a,value:" to reflect the new package name. "},{type:b,tag:t,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F16804093\u002Frename-package-in-android-studio",rel:[K,L,M],target:N},children:[{type:a,value:"This StackOverflow question"}]},{type:a,value:" helped me in the process."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, I had a shiny new app on my smartphone, "},{type:b,tag:Y,props:{},children:[{type:a,value:"Open Camera Studio"}]},{type:a,value:", ready to be tweaked."}]},{type:a,value:f},{type:b,tag:af,props:{id:rG},children:[{type:b,tag:t,props:{href:"#studying-the-source",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:rH}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I wanted to manage the camera app remotely, so the next thing to do was to find out "},{type:b,tag:X,props:{},children:[{type:a,value:"how Open Camera controlled the recordings"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I started digging in the source code. I wanted to find the UI code that triggered the recording and the class "},{type:b,tag:j,props:{},children:[{type:a,value:"MainUI"}]},{type:a,value:" caught my attention."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Open Camera MainUI class",src:"\u002Fposts\u002Fopencameraui.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Scrolling through the source, I stumbled upon the "},{type:b,tag:j,props:{},children:[{type:a,value:"onKeyDown"}]},{type:a,value:" method, apparently used to manage the events from volume buttons and selfie sticks, which in turn called the MainActivity’s takePicture method."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Open Camera Take Picture",src:"\u002Fposts\u002Fopencameratakepicture.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After a bit of experimenting, I determined that the "},{type:b,tag:j,props:{},children:[{type:a,value:eY}]},{type:a,value:" method enabled both the start and the stop of a video recording, so I was ready for the next phase."}]},{type:a,value:f},{type:b,tag:af,props:{id:rI},children:[{type:b,tag:t,props:{href:"#adding-remote-superpowers",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:rJ}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"There are many ways to make the app capable of receiving remote commands, but I found that the most versatile one is the "},{type:b,tag:X,props:{},children:[{type:a,value:"bundled web server"}]},{type:a,value:" approach: a basic "},{type:b,tag:Y,props:{},children:[{type:a,value:"HTTP web server"}]},{type:a,value:" is started in the app itself and other devices in the network can send requests ( such as commands ) and get responses ( such as video files )."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This solution also has the additional advantage that it could be possible to create a "},{type:b,tag:X,props:{},children:[{type:a,value:"Web App"}]},{type:a,value:", hosted by the web server itself, to control the smartphone from any web browser in the network. I chose a different route though because I wanted to keep things simple."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The easiest way to bundle a web server on Android is the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002FNanoHttpd\u002Fnanohttpd",rel:[K,L,M],target:N},children:[{type:a,value:"NanoHTTPD Library"}]},{type:a,value:", which can be used by including the following dependency in the Gradle config file:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"implementation 'org.nanohttpd:nanohttpd:2.3.1'\n"}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I was also necessary to add the following permissions in the "},{type:b,tag:j,props:{},children:[{type:a,value:"AndroidManifest.xml"}]},{type:a,value:m}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,"language-xml"]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:rP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aB]},children:[{type:b,tag:c,props:{className:[d,dg]},children:[{type:a,value:rQ}]},{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,hG]},children:[{type:b,tag:c,props:{className:[d,e,hH]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dy}]},{type:a,value:"android.permission.ACCESS_WIFI_STATE"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dy}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:rP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aB]},children:[{type:b,tag:c,props:{className:[d,dg]},children:[{type:a,value:rQ}]},{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,hG]},children:[{type:b,tag:c,props:{className:[d,e,hH]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dy}]},{type:a,value:"android.permission.INTERNET"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dy}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cI}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I then created the "},{type:b,tag:j,props:{},children:[{type:a,value:eZ}]},{type:a,value:" class extending the "},{type:b,tag:j,props:{},children:[{type:a,value:rR}]},{type:a,value:" class and overriding the "},{type:b,tag:j,props:{},children:[{type:a,value:gm}]},{type:a,value:" method. This function will be called anytime a client makes an HTTP request to the bundled webserver."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At this point, I needed a way to trigger the "},{type:b,tag:j,props:{},children:[{type:a,value:eY}]},{type:a,value:" method when the "},{type:b,tag:j,props:{},children:[{type:a,value:gm}]},{type:a,value:" method was called. Unfortunately, I could not call it directly as the "},{type:b,tag:j,props:{},children:[{type:a,value:eY}]},{type:a,value:" method must be called from the "},{type:b,tag:X,props:{},children:[{type:a,value:"main thread"}]},{type:a,value:". So I used the powerful "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdeveloper.android.com\u002Freference\u002Fandroid\u002Fsupport\u002Fv4\u002Fcontent\u002FLocalBroadcastManager",rel:[K,L,M],target:N},children:[{type:a,value:ih}]},{type:a,value:" class to setup a receiver in the MainActivity that called the "},{type:b,tag:j,props:{},children:[{type:a,value:eY}]},{type:a,value:" method and a "},{type:b,tag:X,props:{},children:[{type:a,value:"broadcast"}]},{type:a,value:iG},{type:b,tag:j,props:{},children:[{type:a,value:gm}]},{type:a,value:" method to trigger it:"}]},{type:a,value:f},{type:b,tag:gj,props:{id:"broadcastreceiver"},children:[{type:b,tag:t,props:{href:"#broadcastreceiver",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:ii}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the MainActivity I added the receiver code:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ij]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ii}]},{type:a,value:" studioCommandReceiver "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ii}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,"annotation",e]},children:[{type:a,value:"@Override"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:rS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:gD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"onReceive"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"Context"}]},{type:a,value:" context"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:rT}]},{type:a,value:" intent"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,aK]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And the code to register\u002Funregister it:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ij]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:rS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"static"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"final"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:cG}]},{type:a,value:" STUDIO_BROADCAST_ID "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"STUDIO_BROADCAST\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Inside the onResume() method"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ih}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ik}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"registerReceiver"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:rU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:"\n                "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"IntentFilter"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:rV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F Inside the onPause() method"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:ih}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ik}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"unregisterReceiver"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:rU},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:gj,props:{id:"server"},children:[{type:b,tag:t,props:{href:"#server",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:"Server"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:eZ}]},{type:a,value:jH}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,"language-kotlin"]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"package"}]},{type:a,value:rW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"studio\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:rZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:r_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"Intent\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:rZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"support"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"v4"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:r_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"LocalBroadcastManager\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:rW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rX},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rY},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"MainActivity\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:" fi"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"iki"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"elonen"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"NanoHTTPD\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:r$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:sa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"File\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bw}]},{type:a,value:r$},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:sa},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"IOException\n\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:et}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:eZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:il}]},{type:a,value:" mainActivity"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" MainActivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:il}]},{type:a,value:" port "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" Int"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:rR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"port"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"override"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"fun"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:gm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"session"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" IHTTPSession"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:m}]},{type:a,value:" Response "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:il}]},{type:a,value:" intent "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:rT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"MainActivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:rV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n        LocalBroadcastManager"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ik}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"mainActivity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"sendBroadcast"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"intent"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"newFixedLengthResponse"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,cc,"singleline"]},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"OK\""}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And finally, the code to start the StudioServer in the MainActivity:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ij]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:eZ}]},{type:a,value:" studioServer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F In the onCreate() method"}]},{type:a,value:"\nstudioServer "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:eZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"8000"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F In the onResume() method"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n    studioServer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"start"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,V]},children:[{type:a,value:"IOException"}]},{type:a,value:" e"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n    e"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"printStackTrace"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"\u002F\u002F In the onPause() method"}]},{type:a,value:"\nstudioServer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"stop"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Now every time the MainActivity is opened, a "},{type:b,tag:X,props:{},children:[{type:a,value:"WebServer is started on port 8000"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s say the smartphone has 192.168.1.100 as IP, then any other device in the same network can access the server at the address: "},{type:b,tag:t,props:{href:sb,rel:[K,L,M],target:N},children:[{type:a,value:sb}]},{type:a,value:". Anytime a request is made, the app should start\u002Fstop a recording."}]},{type:a,value:f},{type:b,tag:af,props:{id:rK},children:[{type:b,tag:t,props:{href:"#whats-next",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:rL}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This was a very basic proof of concept you can use as a starting point when building something similar. I also added many features to the app, such as file transfer and clip naming, that you can check out in the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002FOpenCameraStudio",rel:[K,L,M],target:N},children:[{type:a,value:"Github Repository"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"In the next article, we will see how to create the Desktop control panel in Go."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Open Camera Studio Remote Desktop App",src:"\u002Fposts\u002FOCSDesktopGui.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Stay tuned :)"}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:rM},{type:b,tag:t,props:{href:dE,rel:[K,L,M],target:N},children:[{type:a,value:rN}]},{type:a,value:rO}]}]},dir:aZ,path:"\u002Farticles\u002F2019-08-27-how-to-build-remote-camera-app-android",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"how-to-build-remote-camera-app-android"},{slug:"2019-08-23-how-to-force-github-pages-to-rebuild-jekyll-website",description:"A month ago I decided to rebuild my website using Jekyll for a couple of reasons: it’s the official tool used by Github Pages and it supports blogging. Considering also that Github Pages is free, this is pretty much one of the best ways to build a personal website nowadays and I'm very happy with the result.",layout:aU,title:"How to Force Github Pages to Rebuild Jekyll Website",author:aV,date:"2019-08-23T00:00:00.000Z",categories:"jekyll github pages",toc:[{id:sc,depth:aH,text:sd},{id:se,depth:aH,text:sf}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:sg},{type:b,tag:t,props:{href:sh,rel:[K,L,M],target:N},children:[{type:a,value:si}]},{type:a,value:sj},{type:b,tag:Y,props:{},children:[{type:a,value:sk}]},{type:a,value:sl},{type:b,tag:X,props:{},children:[{type:a,value:sm}]},{type:a,value:sn}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you plan to deploy a Jekyll website on Github Pages the process is straightforward: you "},{type:b,tag:X,props:{},children:[{type:a,value:"push your website source on the correct branch"}]},{type:a,value:" ( "},{type:b,tag:j,props:{},children:[{type:a,value:rl}]},{type:a,value:" for a personal website or "},{type:b,tag:j,props:{},children:[{type:a,value:"gh-pages"}]},{type:a,value:" for a project website ) and then the site gets compiled automatically by the Github Servers."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"While this works almost always correctly, "},{type:b,tag:X,props:{},children:[{type:a,value:"sometimes the servers don’t compile the source"}]},{type:a,value:", and the website gets stuck on the old version."}]},{type:a,value:f},{type:b,tag:aI,props:{id:sc},children:[{type:b,tag:t,props:{href:"#force-a-rebuild",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:sd}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Luckily for us, we can force a website rebuild using the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fdeveloper.github.com\u002Fv3\u002Frepos\u002Fpages\u002F#request-a-page-build",rel:[K,L,M],target:N},children:[{type:a,value:"Github API v3"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"We will use "},{type:b,tag:j,props:{},children:[{type:a,value:fI}]},{type:a,value:" to make the request. If you’re using "},{type:b,tag:X,props:{},children:[{type:a,value:"Linux"}]},{type:a,value:cZ},{type:b,tag:X,props:{},children:[{type:a,value:"Mac OS"}]},{type:a,value:", it comes preinstalled with the system. If you’re using "},{type:b,tag:X,props:{},children:[{type:a,value:"Windows"}]},{type:a,value:", you can "},{type:b,tag:t,props:{href:"https:\u002F\u002Fcurl.haxx.se\u002Fwindows\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"download curl here"}]},{type:a,value:" or use "},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.getpostman.com\u002F",rel:[K,L,M],target:N},children:[{type:a,value:"Postman"}]},{type:a,value:" to make the request."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Open a Terminal and paste the following code, replacing "},{type:b,tag:j,props:{},children:[{type:a,value:"USER"}]},{type:a,value:" with your Github username and "},{type:b,tag:j,props:{},children:[{type:a,value:"REPOSITORY"}]},{type:a,value:" with your repository name."}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ds]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fI}]},{type:a,value:so},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dq}]},{type:a,value:sp},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:sq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dq}]},{type:a,value:sr},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\"USER\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dq}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"'https:\u002F\u002Fapi.github.com\u002Frepos\u002FUSER\u002FREPOSITORY\u002Fpages\u002Fbuilds'"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The command will prompt for your Github password, type it and press enter. If everything was correct, you should see a response like:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,bd]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"{\n  \"url\": \"https:\u002F\u002Fapi.github.com\u002Frepos\u002Fgithub\u002Fdeveloper.github.com\u002Fpages\u002Fbuilds\u002Flatest\",\n  \"status\": \"queued\"\n}\n"}]}]}]},{type:a,value:f},{type:b,tag:aI,props:{id:se},children:[{type:b,tag:t,props:{href:"#example",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:sf}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s suppose my Github username is “bob” and therefore my personal website has a repository called “bob.github.io”. We use the command:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ds]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fI}]},{type:a,value:so},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dq}]},{type:a,value:sp},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:sq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dq}]},{type:a,value:sr},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:pi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:dq}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"'https:\u002F\u002Fapi.github.com\u002Frepos\u002Fbob\u002Fbob.github.io\u002Fpages\u002Fbuilds'"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And then type the password."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:X,props:{},children:[{type:a,value:"If you encounter a 404 error"}]},{type:a,value:", double-check the URL and the credentials that you inserted, as they are probably incorrect."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:sg},{type:b,tag:t,props:{href:sh,rel:[K,L,M],target:N},children:[{type:a,value:si}]},{type:a,value:sj},{type:b,tag:Y,props:{},children:[{type:a,value:sk}]},{type:a,value:sl},{type:b,tag:X,props:{},children:[{type:a,value:sm}]},{type:a,value:sn}]}]},dir:aZ,path:"\u002Farticles\u002F2019-08-23-how-to-force-github-pages-to-rebuild-jekyll-website",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"how-to-force-github-pages-to-rebuild-jekyll-website"},{slug:"2019-08-22-turn-telegram-into-a-static-web-server-with-tlgur",description:"Telegram is one of the most popular messaging apps and probably the most loved by developers. The reasons are many, but I think that it mostly boils down to their openness, which led many programmers to create unique and interesting projects around it. Today I want to share one of those: TLGUR.",layout:aU,title:"Turn Telegram into a Static Web Server with TLGUR",author:aV,date:"2019-08-22T00:00:00.000Z",categories:"telegram randomdevtricks",toc:[{id:bl,depth:aH,text:bm}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:b,tag:Y,props:{},children:[{type:a,value:ss}]},{type:a,value:st},{type:b,tag:X,props:{},children:[{type:a,value:im}]},{type:a,value:s}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{href:su,rel:[K,L,M],target:N},children:[{type:a,value:im}]},{type:a,value:" is a very simple Telegram bot, originally designed to share files and images with people who don’t use Telegram. In a nutshell, "},{type:b,tag:X,props:{},children:[{type:a,value:"after sending a file to the bot you receive a URL"}]},{type:a,value:", that you can then share with everyone."}]},{type:a,value:f},{type:b,tag:hY,props:{},children:[{type:a,value:"\n "},{type:b,tag:"video",props:{width:376,height:646,loop:e_,autoPlay:e_,style:"object-fit: cover"},children:[{type:a,value:"\n                                "},{type:b,tag:"source",props:{src:"\u002Fassets\u002Fvideos\u002Ftlgur.mp4",type:"video\u002Fmp4"},children:[]},{type:a,value:"\n                                Your browser does not support the video tag.\n                            "}]},{type:a,value:B},{type:b,tag:hZ,props:{},children:[{type:a,value:sv},{type:b,tag:t,props:{href:su},children:[{type:a,value:"TLGUR Official Website"}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This is already amazing, but for a developer, things can get even more interesting. Turns out that "},{type:b,tag:Y,props:{},children:[{type:a,value:"the given link can be served as a static asset"}]},{type:a,value:" in a browser, such as a web page."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s build a quick working example:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Create a \"test.html\" file with the following content:"}]},{type:a,value:f},{type:b,tag:C,props:{className:[E]},children:[{type:b,tag:F,props:{className:["language-html",G]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:sw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:sx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:sx}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:sy}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:"TLGUR is amazing"},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:av}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:sy}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,ak]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:cv}]},{type:a,value:sw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:U}]}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"And send it to the bot:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Bot Response",src:"\u002Fposts\u002Ftelegrambot.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:t,props:{href:"https:\u002F\u002Ftlgur.com\u002Fd\u002F89eJjoO8",rel:[K,L,M],target:N},children:[{type:a,value:"The result link"}]},{type:a,value:" can be visited with any web browser, and works as expected:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Web Page",src:"\u002Fposts\u002Ftelegrambotpage.png"},children:[]}]},{type:a,value:f},{type:b,tag:aI,props:{id:bl},children:[{type:b,tag:t,props:{href:ci,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:bm}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"This opens a world of possibilities for quick experiments and, combined with the rest of Telegram APIs, could theoretically make it possible to host a full-blown website, possibly even a dynamic one. That said, this is not suited for production use and should not be abused."}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:b,tag:Y,props:{},children:[{type:a,value:ss}]},{type:a,value:st},{type:b,tag:X,props:{},children:[{type:a,value:im}]},{type:a,value:s}]}]},dir:aZ,path:"\u002Farticles\u002F2019-08-22-turn-telegram-into-a-static-web-server-with-tlgur",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"turn-telegram-into-a-static-web-server-with-tlgur"},{slug:"2019-08-10-learning-how-to-type-properly-makes-you-a-better-programmer",description:"Like many people, I wasn’t a good typer. I started using computers when I was a kid and, by the time I grew into an adult, I developed my personal typing style, using only 5 fingers.",layout:aU,title:"Learning How to Type Properly Makes You a Better Programmer",author:aV,date:"2019-08-20T00:00:00.000Z",categories:"keyboard productivity",toc:[{id:sz,depth:aH,text:sA},{id:sB,depth:aH,text:sC},{id:gw,depth:aH,text:gx}],body:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:sD},{type:b,tag:Y,props:{},children:[{type:a,value:sE}]},{type:a,value:s}]},{type:a,value:f},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Fingers",src:"\u002Fposts\u002Fhands.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Surprisingly, the biggest problem wasn’t the speed ( I achieved about 56 words per minute, an average speed ) but the "},{type:b,tag:Y,props:{},children:[{type:a,value:"wrist movements"}]},{type:a,value:" I had to make. Other than being very inefficient, that would have probably caused me "},{type:b,tag:X,props:{},children:[{type:a,value:"pain"}]},{type:a,value:" in the long run."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So about a year ago, I decided to relearn how to type "},{type:b,tag:X,props:{},children:[{type:a,value:"properly"}]},{type:a,value:", embracing the "},{type:b,tag:t,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FTouch_typing",rel:[K,L,M],target:N},children:[{type:a,value:"Touch Typing"}]},{type:a,value:" technique."}]},{type:a,value:f},{type:b,tag:aI,props:{id:sz},children:[{type:b,tag:t,props:{href:"#learning-touch-typing",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:sA}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"The first thing I did was "},{type:b,tag:X,props:{},children:[{type:a,value:"printing a keyboard layout diagram and sticking it on my monitor"}]},{type:a,value:", so each time I had a doubt, I could check the correct finger at a glance by watching the color."}]},{type:a,value:f},{type:b,tag:hY,props:{},children:[{type:a,value:B},{type:b,tag:ag,props:{src:"\u002Fassets\u002Fimages\u002Fkeyboardlayout.png"},children:[]},{type:a,value:B},{type:b,tag:hZ,props:{},children:[{type:a,value:sv},{type:b,tag:t,props:{href:"https:\u002F\u002Fwww.typing-lessons.org\u002F"},children:[{type:a,value:"Peter's Online Typing Course"}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"At the same time, I started practicing on "},{type:b,tag:t,props:{href:"https:\u002F\u002F10fastfingers.com\u002Ftyping-test\u002Fenglish",rel:[K,L,M],target:N},children:[{type:a,value:"10 Fast Fingers"}]},{type:a,value:bf},{type:b,tag:t,props:{href:"http:\u002F\u002Fwww.speedcoder.net",rel:[K,L,M],target:N},children:[{type:a,value:"Speedcoder"}]},{type:a,value:" about 20 minutes a day."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But the most important thing I did was to "},{type:b,tag:X,props:{},children:[{type:a,value:"force myself to write properly from that moment on"}]},{type:a,value:", even if it was difficult. And for the first week, it was very difficult."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"I started tracking my progress and after about 2 weeks I was achieving the same speed as my old method. Then, as time went on, my fluency kept improving, as you can tell from this graph:"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:b,tag:ag,props:{alt:"Typing Speed Graph",src:"\u002Fposts\u002Ftypingspeedgraph.png"},children:[]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After 2 months "},{type:b,tag:X,props:{},children:[{type:a,value:"I was comfortable with touch typing"}]},{type:a,value:", my speed greatly improved and I was ready for the next step:"}]},{type:a,value:f},{type:b,tag:aI,props:{id:sB},children:[{type:b,tag:t,props:{href:"#moving-to-the-us-keyboard-layout",ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:sC}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"If you live in the US this may sound obvious to you, but "},{type:b,tag:X,props:{},children:[{type:a,value:"the English US Keyboard Layout is the best for programming"}]},{type:a,value:". Why? Because the people who invented most programming languages used that layout."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Being Italian, I always used the Italian layout and, while the letters and digits were arranged in the same way as the US layout (QWERTY), the symbols were not. "},{type:b,tag:X,props:{},children:[{type:a,value:"Most of the symbols commonly used in programming were difficult"}]},{type:a,value:", if not impossible, to write on an Italian keyboard ( looking at you ~ )."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"So I decided to learn the US layout by using the same approach as before: stick a layout picture on my monitor, practicing on training websites and forcing myself to type with it."}]},{type:a,value:f},{type:b,tag:aI,props:{id:gw},children:[{type:b,tag:t,props:{href:ja,ariaHidden:O,tabIndex:P},children:[{type:b,tag:c,props:{className:[Q,R]},children:[]}]},{type:a,value:gx}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"After more than a year of touch typing on the US layout, I can say that "},{type:b,tag:X,props:{},children:[{type:a,value:"my overall productivity increased a lot"}]},{type:a,value:". Programming and other tasks, like using the terminal, are now a smoother experience."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Of course, living in a non-English country, I still need to type with the Italian layout sometimes. Luckily for me, most operating systems offer a "},{type:b,tag:X,props:{},children:[{type:a,value:"quick shortcut to switch between layouts"}]},{type:a,value:" ( For example Win+Space on Windows )."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"For those of you who are considering if learning how to type properly is worth it or not: "},{type:b,tag:X,props:{},children:[{type:a,value:"do it, it takes a little effort, but the reward is huge"}]},{type:a,value:s}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"PS: There are some other super-advanced layouts out there ( like Colemak and Dvorak ), but I’m not ready for those yet :)"}]}]},excerpt:{type:aq,children:[{type:b,tag:i,props:{},children:[{type:a,value:sD},{type:b,tag:Y,props:{},children:[{type:a,value:sE}]},{type:a,value:s}]}]},dir:aZ,path:"\u002Farticles\u002F2019-08-10-learning-how-to-type-properly-makes-you-a-better-programmer",extension:a_,createdAt:as,updatedAt:as,cleanedSlug:"learning-how-to-type-properly-makes-you-a-better-programmer"}]}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","\n"," ","operator","p","code",")","(",":","keyword","}","{",";","function",".","a","=","string","number",",","\n    ","property-access","property","\n  ","div","-","nuxt-content-highlight","pre","line-numbers","literal-property","li","comment","nofollow","noopener","noreferrer","_blank","true",-1,"icon","icon-link","\n      ","method","\u003E","class-name","\u003C","strong","em","language-javascript","[","]","\n        ","const","maybe-class-name",2,"\n\n","h2","img","\u002F","key","=\u003E","tag","atrule","ul","item","constant","console","root","1","2024-04-04T17:37:46.490Z","builtin","parameter","h1","control-flow","arrow","!","return","name","attr-name","|","alice","has","script","script-punctuation",3,"h3","b","boolean","selected","macro","onClick","log","new","\n\n    ","2","blockquote","toggleItem","post","Federico Terzi","add","this","\n\n  ","\u002Farticles",".md","state","\n          ","removals","type","language-text","*"," and ","\n            ","println!","replicaA","false","'a'","conclusion","Conclusion","\nremovals ","merge","  ","...","function-variable","user","in","if","let","import"," main","ListItem","::","elements ","elements","set","===","error","2024","01","27","20","coordinates","longitude","latitude","ol","VV","module","34","6365"," buffer received","House","useCallback","CRDTSet","\"a\"","0","plain-text","language-rust","undefined"," string","\"success\"","fn","function-definition","string-literal","remove","for","&&","string-property","\n       ","#conclusion","useState","\"failure\"","dispatch","language-jsx","\u002F\u002F true","bob","User","?","id","Espanso"," pass","includes","\u003C\u002F"," nextProps","\n    \n    ","\u002F\u002F false","main","\n\n        ","CRDTAddOnlySet","spread","Avatar","language-yaml"," $","String"," item","\u002F\u003E","React.memo","replicaB","&","ERR","\"\""," number","userToken","handleLogin","\n  type","\"pending\"","case","map","data","MemoizedListItem","language-python","word"," or ","151907","\n     ","language-ts"," type","\n      type","\n      loading","setSelected","selectedItems","namespace","espanso","language-ruby","await","151896","'b'","firstName","type ","mockHouse1","crt","\\","https:\u002F\u002Fespanso.org","language-bash","App","from","unknown","\n\n      ","handleLogout","\""," action","List"," toggleItem ","language-js","handleClick","https:\u002F\u002Fwww.youtube.com\u002Fc\u002FFedericoTerzi","defaultdict","\nreplicaA"," b","\"2024-02-24\"","nil","3","\n        config","PublicUser"," publicUser","as"," \n","Notes","requires","user.crt","signtool","login","else"," newUserToken "," initialState","\"logout\"","action","\n        loading","prevSelected","closure-punctuation","https:\u002F\u002Ftwitter.com\u002Fterzi_federico","Twitter","&str","tqdm"," item ","In the "," replicaA "," replicaB ","\nreplicaB","\n\nreplicaA","after","otherSet","10","","{alice: 2}","known-class-name","SCContentFilter"," alloc","class","language-typescript","imageUrl","user_id","latest_ordered_products","getClosestHouse","    "," build\n      ","deploy","Insert the ","modulus ","noout "," openssl md5\n","c","export","https:\u002F\u002Fespanso.org\u002F","default","setUserToken","try","catch","useReducer","reducer","!==","\n    prevProps","Cow","str","panic","Memory model","print","split","\" \"","takePicture","StudioServer",true,"get","here","{alice: 1}",").","https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fcrdt-experiments","h","StreamOutputDelegate","NSLog","@","SCShareableContent","NSError","semaphore","framework "," network ","thumbnailUrl","The ","\"product_id\"","\"product_name\"","include_latest_purchases","address","street","city","owner","phoneNumber","test","6","7","expect","toBe","T","notes","jobs","context","run","scalar","curl","openssl x509 ","e","\n        type","button onClick","button","loading","async","setLoading",", ","State","\n  loading","\n  error","\n  userToken"," State "," i ","filter","current"," current "," data","memo"," handleClick ","'s ","isEnabled","https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fespanso","use","-\u003E","\"{}\"","Youtube","h4"," word "," text","serve","nuxt-link"," in the ","\"2024-02-23\""," additionTime","of"," otherSet","):","waitFor","{alice: 1, bob: 1}","conclusions","Conclusions","I’ve just spend a good portion of this afternoon trying to understand why Apple’s ScreenCaptureKit did not behave as expected. My goal was simple: creating the simplest possible program to capture the entire display and analyse the generated buffers.","Foundation","\n#","ScreenCaptureKit","CoreGraphics","void","SCStream","dispatch_semaphore_create","^"," _Nullable error"," content","dispatch_semaphore_signal","dispatch_semaphore_wait","DISPATCH_TIME_FOREVER","NSArray"," error ","ETIMEDOUT","\nnpm ","As software engineers, we are always asked to design maintainable and extensible software architectures. While design patterns and best practices help, most of them are just facades to one larger and fundamental principle: designing good boundaries.","\n  firstName","As you can see, ","GET","users","\"recommended_products\"","1234","\"Pizza Cutter\"","\"returns closest house correctly\""," closestHouse "," mockHouse2","closestHouse","getClosestEntity","deploy-approval","https:\u002F\u002Ffedericoterzi.com\u002Fblog\u002Fautomatic-code-signing-and-notarization-for-macos-apps-using-github-actions","openssl","PRIVATEKEY"," user","pfx","env","private","keychain ","In the last decade, many functional programming concepts have been making their way into modern, non-functional languages. Instead of going all-in, developers can choose to gradually adopt some of the paradigms in their applications, enjoying the best of both worlds.","Making invalid states unrepresentable","\"react\"","value","setError","div className","\"App\"","Login Example","loading ","Loading","An error occurred","LoginBox onLogin","You're logged "," Your user token ","is","Logout","\n        error","failure","loading = false","\"idle\"","React is the most popular front-end framework, and that’s for a reason. Besides being funded by one of the largest companies on the planet, it’s also built around a few key concepts (one-way data flow, immutable data, functional components, hooks) that make it easier than ever to create robust applications. That said, it’s not without pitfalls."," i","attr-value","attr-equals"," selectedItems","expensiveOperation","prevProps","color","??","not","std","capitalize","unwrap","\u002F\u002F Output:","set_hook","closure-params","Use the ","This question comes up a lot lately, especially when considering if learning Rust is worth it or not, and so I thought it could be a wonderful opportunity to write a new article, discussing the differences between the two, as well as what they share in common.","Unless you’ve been living under a rock for the past 5 years, chances are you have used an Electron-based application at least once in your life. For those (probably few) who don’t know what Electron is, it’s a cross-platform desktop app framework built on top of Chromium and NodeJS (which in turn is based on Chrome’s V8 engine).","\"hello\"","figure","figcaption","espanso-mac.tar.gz","homebrew-espanso","end","range","10000000","\n    result ","# Cycle through each word, appending it to the correct list","append"," collections ","LocalBroadcastManager","BroadcastReceiver","language-java","getInstance","val","TLGUR","distributed systems crdt set eventual convergence real time collaboration","Understanding CRDTs","understanding-crdt","attempt-0-removing-elements","Attempt 0: Removing elements","attempt-1-adding-timestamps","Attempt 1: Adding timestamps","physical-time-and-distributed-systems","Physical time and distributed systems","attempt-2-version-vectors","Attempt 2: Version Vectors","remarks-on-replica-ids","Remarks on Replica IDs","remarks-on-version-vectors-storage","Remarks on Version Vectors storage","\u002Fblog\u002Funderstanding-crdts-a-gentle-introduction-chapter-1","previous article",", we implemented a basic Set with support for additions and removals, as well as basic CRDT semantics. Despite working in simple cases, we also highlighted two significant limitations:","logically"," from the "," was added "," removing element ","ordering","\nelements ","Date","getTime"," removalTime ","\n        existingAdditionTime ","||"," removalTime","\n        existingRemovalTime ","\n  replicaB","\n\n  replicaA","https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FNetwork_Time_Protocol"," map:","\"2099-02-24\"","unique"," comes "," ."," with ","carl","#conclusions","ScreenCaptureKit failing to capture the entire Display","AVFoundation"," getShareableContentWithCompletionHandler"," _Nullable content","displays","empty "," @","filter "," initWithDisplay","empty","SCStreamConfiguration"," init","width"," displaySize","height"," nil","semaphore2","initWithDisplay:excludingWindows:","first-step-add-only-set","First step: Add-only Set","adding-crdt-semantics","Adding CRDT semantics","adding-support-for-removals-a-naive-αttempt","Adding support for Removals: a Naive Αttempt","adding-support-for-removals-the-set-pair-approach","Adding support for Removals: the Set-pair Approach","In the past two months, I’ve been diving deeper into the realm of distributed systems. The catalyst that started my research was discovering the world of ","https:\u002F\u002Flocalfirstweb.dev\u002F","local-first applications",", a class of software that allows users to access and modify their data locally, while seamlessly synchronizing across devices, even in the face of connection failures.","https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConflict-free_replicated_data_type"," operation)"," class:","constructor"," set ","\n\nset","Our ","\nset","       "," the ","Fixing the “network request failed” error with GitHub NPM packages","The other day, I encountered this error while running ","npm install"," on a private repository:","regex-delimiter","char-set","com","npm","Good Software Architectures are mostly about Boundaries","what-went-wrong","What went wrong","how-we-could-have-prevented-it","How we could have prevented it","an-alternative-approach","An alternative approach","how","Let’s assume we already have a ","\n  lastName","\n  imageUrl","Props"," User"," Props","img src","Avatar \n  user","\n    firstName","\n    lastName","lastName","\n    imageUrl","Avatar firstName"," imageUrl","publicUser","Good boundaries do not leak any unnecessary information","\"456\"","point","\"John\"","\"1234\""," mockHouse1 "," mockHouse2 ","extra","\u002F\u002F \u003C-- missing the 'extra' field, but typescript does not complain","WithCoordinates","mockEntity1","Solving GitHub Status stuck on Pending with CircleCI’s Approvals","the-problem-github-status-gets-stuck-on-pending-for-unapproved-workflows","The problem: GitHub status gets stuck on “Pending” for unapproved workflows","the-workaround-overriding-github-commit-statuses-manually","The workaround: overriding GitHub Commit Statuses manually","the-solution-a-bash-script-to-patch-commit-statuses","The solution: a bash script to patch Commit statuses","At ","https:\u002F\u002Fwww.animaapp.com\u002F","Anima",", we are always looking for new ways to automate our workflows. One of these efforts involved creating a new ","https:\u002F\u002Fcircleci.com\u002F","CircleCI"," pipeline to automatically deploy some NPM packages, removing the need for tedious manual work. The plan was straightforward: once started, the pipeline would bump the version of our packages (using Lerna), build them and finally publish them on our NPM registry."," approval\n          "," build\n            "," deploy","\"state\"","\"target_url\"","\"description\"","\"context\"","url \"https","--header 'Accept","--header \"Authorization"," commit"," jq ","#notes","using GitHub Actions","choosing-a-certificate-authority","Choosing a Certificate Authority","buying-an-ov-certificate-from-sectigo","Buying an OV certificate from Sectigo","generating-a-certificate-signing-request-csr","Generating a Certificate Signing Request (CSR)","completing-the-verification-process","Completing the verification process","verify-that-the-certificate-and-private-key-match","Verify that the Certificate and Private key match","troubleshooting-expecting-trusted-certificate-error","convert-the-certificate-to-pfx-format","Convert the certificate to PFX format","test-the-code-signing-process-manually","Test the code-signing process manually","a-note-on-ev-certificates","A note on EV certificates","converting-the-certificate-to-base64","Converting the certificate to base64","preparing-github-secrets","Preparing GitHub Secrets","automating-the-code-sign-process","Automating the code-sign process","notes-1","alternative-approaches","Alternative approaches","After our previous article on ","automatic code-signing for macOS applications",", we are now going to cover the process for Windows binaries. The article is going to discuss all the necessary steps to get a Windows application code-signed, starting from the process to obtain a certificate, all the way down to automating the signing process in your CI pipelines.","http:\u002F\u002FCodeSigningStore.com","CodeSigningStore.com","'C:\\Program Files\\Git\\usr\\bin\\openssl.exe'","PRIVATEKEY.key","MYCSR.csr","openssl rsa ","unable to load certificate\n","34359836736","0909006C","PEM","routines","get_name","no start line","crypto","pem","pem_lib","745","Expecting","TRUSTED","CERTIFICATE","certificate.crt","codesign.pfx","signtool.exe","\"C:\\Program Files (x86)\\Windows Kits\\10\\bin\\10.0.19041.0\\x86\\signtool\"","\"\u003CPASSWORD_HERE\u003E\"","SectigoPublicCodeSigningRootR46_AAA","CODESIGN_BASE64","CODESIGN_PWD","CODESIGN_INTERMEDIATE_BASE64","Item ","https:\u002F\u002Fgithub.com\u002Fespanso\u002Fespanso\u002Fpull\u002F1352\u002Ffiles","https:\u002F\u002Fgithub.com\u002FDana-Prajea\u002Fcode-sign-action","Fixing “Error: SignerSign() failed.” during SignTool code-signing","Today I was working on the automatic code-signing CI for ",". As suggested by various articles, I went ahead and tried to sign the executable with this "," command:","signtool.exe sign \u002Fv \u002Fp ","your PFX password"," \u002Fac ","'CROSS_SIGNED_SECTIGO_CA_HERE'","'FULL_PATH_TO_FILE_TO_SIGN'","Fixing the “Expecting: TRUSTED CERTIFICATE” error with Sectigo certificates","The other day, I finally received the code-signing certificate from Sectigo. In the confirmation email, they explained the steps to download the certificate, and after following them, I found myself with a "," file.","generating-an-app-specific-password","Generating an app-specific password","getting-your-team-id","Getting your Team ID","setting-up-the-secrets","Setting up the Secrets","defining-the-code-signing-step","Defining the Code-signing step","defining-the-notarization-step","Defining the Notarization step","bonus-troubleshooting-notarization-issues","Bonus: troubleshooting Notarization issues","acknowledgments","Acknowledgments","After almost 3 years, we finally took the necessary steps to code-sign ",". This article covers the step I’ve taken to integrate the code-signing and notarization steps in our automatic CI flow. This process is built with GitHub Actions in mind, but you can easily port it to your CI provider of choice.","Selecting the right option from the “Create a New Certificate” section","Keychain Access","https:\u002F\u002Flocalazy.com\u002Fblog\u002Fhow-to-automatically-sign-macos-apps-using-github-actions","Certificates.base64","Team ID","PROD_MACOS_NOTARIZATION_APPLE_ID","PROD_MACOS_NOTARIZATION_PWD","PROD_MACOS_NOTARIZATION_TEAM_ID","target\u002Fmac\u002FEspanso.app","# Extract the secrets we defined earlier as environment variables","apple","codesign","https:\u002F\u002Fdeveloper.apple.com\u002Fdocumentation\u002Fsecurity\u002Fhardened_runtime","profile\" ","keychain","profile \"notarytool","ID","The single, most important trick to build robust applications","our-example","Our example","the-problem","The problem","a-better-approach-but-still-not-optimal","A better approach (but still not optimal)","making-invalid-states-unrepresentable","final-thoughts","Final thoughts","A ","LoginBox","Login"," useState ","onLogin","pass","label htmlFor","label","\n        value","\n        onChange","target","\"pass\"","Promise","resolve","\"test\"","generic-function","generic","newUserToken","\u002F\u002F We need to explicitly tell react that we are not loading anymore","error ","userToken ","setError(undefined)","PendingAction","SuccessAction","FailureAction","LogoutAction","Action"," PendingAction "," SuccessAction "," FailureAction "," LogoutAction"," State"," Action","switch","\n        userToken","userToken\n      ","error\n      "," dispatch"," userToken","+","loading: false","\n      userToken","\n      error","a-common-anti-pattern","A common anti-pattern","refactoring-the-listitem-component","Refactoring the ListItem component","another-common-anti-pattern","Another common anti-pattern","a-note-on-functional-state-updates","A note on functional state updates","imports","100","n","template-punctuation","`","interpolation-punctuation"," setSelected"," name"," selected"," onClick ","\u002F\u002F Run an expensive operation to simulate a load","\u002F\u002F In real-world JS applications, this could be either a custom","\u002F\u002F JS elaboration or a complex render.","style","selected ","textDecoration","\"line-through\"","+=","shallow comparison","\n         prevProps","useMemo"," prevSelected","using-cowstr-as-return-type","Using Cow\u003Cstr\u003E as return type","crossbeam-channels-instead-of-the-standard-ones","Crossbeam channels instead of the standard ones","golang-like-defer-operator-with-scopeguard","Golang-like defer operator with Scopeguard","cargo-make-for-packaging","Cargo-make for packaging","customize-and-chain-panic-handlers","Customize and chain Panic handlers","use-rust-analyzer-on-vscode","Use Rust Analyzer on VSCode","use-impl-trait-when-working-with-closures","Use impl Trait when working with Closures","enable-clippy-on-save-for-vscode","Enable Clippy on Save for VSCode","use-thiserror-and-anyhow-for-idiomatic-error-handling","Use “thiserror” and “anyhow” for idiomatic error handling","using-dbg-macro-instead-of-println","Using dbg!() macro instead of println!()","include_str-and-include_bytes-macros","include_str!() and include_bytes!() macros","integrating-with-cc-code","Integrating with C\u002FC++ code","Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as ",") and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it.","chars","Some","first_char"," first_char","Borrowed","\n              ","\"bob\"","Duration","s1","unbounded","i32","recv"," msg "," msg","scopeguard","attribute","extern"," prev_hook ","take_hook","Box","move"," panic","\n        \n        ","prev_hook","    \n    ","A","FnOnce","\"setting up...\"","\"tearing down...\"","setup_teardown","dbg!","FILE_CONTENT","\"nativemodule\"","similarities","Similarities","memory-and-thread-safety","Memory and Thread safety","unsafe-rust","Unsafe Rust","package-management-and-ecosystem","Package management and ecosystem","macros","Macros","cross-platform-core-native-ui","Cross-platform Core, Native UI","bonus","Bonus:","qt","QT","localhost-server","Localhost server","embedding-the-systems-webview","Embedding the system’s webview","notable-mentions","Notable mentions","If you liked the article, follow me on ","memory-model","string-literals","String literals","tips-for-beginners","Tips for beginners","When I started learning Rust a couple of years ago, the first thing that really got me thinking was strings. You see, in Rust, there are 2 string types: the "," and the "," types.","var s ","\" hello \"","trim","S","to_string"," is of type "," s2","validating-a-regex","Validating a Regex","extracting-data","Extracting data","substitution","Substitution","code-generation","Code generation","If you've been programming for a while, you will surely know how useful ","regular expressions"," can be when dealing with text.","You may want to validate a string (such as checking whether an email field is valid) or extract some information from formatted text. In both cases, building the right regex can take many attempts.","https:\u002F\u002Fregex101.com\u002F","Regex101","SUBSTITUTION","As a developer myself, I know how hard it can be to promote a project. You spent weeks, months, or even years, developing your idea, only to find out later that nobody is noticing it.","Turns out that promotion, probably the least favourable thing for a programmer, is important as well.","preparing-the-binary","Preparing the binary","uploading-to-github-releases","Uploading to Github Releases","preparing-the-github-repository","Preparing the Github Repository","preparing-the-formula","Preparing the Formula","installing-the-package","Installing the Package","Last week I finally released the first version of ",", a cross-platform, system-wide ","Text Expander"," written in Rust.","Save it somewhere, we will need it later.","Where ","Formula","espanso.rb","\"Cross-platform Text Expander written in Rust\"","\"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fespanso\"","\"https:\u002F\u002Fgithub.com\u002Ffederico-terzi\u002Fespanso\u002Freleases\u002Flatest\u002Fdownload\u002Fespanso-mac.tar.gz\"","\"2473866b99eef9ea983200b7aac91592b938404ffaa1fb8c72beacb2ebd3203a\"","\"0.1.0\"","def","method-definition","install","\n    bin","install ","\"espanso\"","master","counter","Counter","Python is a ","wonderful"," language. Other than being simple to learn and fast to write, it’s also very powerful thanks to its ","huge ecosystem",". In fact, it has so many features that it’s easy to miss some good ones. In this article I’m going to show you 3 great Python tricks you may have missed:","text ","\n    data","'a long text but very interesting and fun'","\n\ndata ","\n        data","list","'and another long text but interesting and fun'"," Counter","most_common","forking-open-camera","Forking Open Camera","compile-the-sources","Compile the Sources","studying-the-source","Studying the Source","adding-remote-superpowers","Adding Remote Superpowers","whats-next","What’s next?","I love automating things, especially the boring ones. Having a ","Youtube channel",", I found that editing videos can be very time-consuming and so I started thinking about ways to improve my workflow.","uses-permission","android:","NanoHTTPD","public","Intent","studioCommandReceiver","STUDIO_BROADCAST_ID"," com","federicoterzi","opencamerastudio"," android","content"," java","io","http:\u002F\u002F192.168.1.100:8000\u002F","force-a-rebuild","Force a Rebuild","example","Example","A month ago I decided to rebuild my website using ","https:\u002F\u002Fjekyllrb.com","Jekyll"," for a couple of reasons: it’s the official tool used by ","Github Pages"," and it supports ","blogging",". Considering also that Github Pages is free, this is pretty much one of the best ways to build a personal website nowadays and I'm very happy with the result."," -X POST ","\n    --header ","'Accept: application\u002Fvnd.github.mister-fantastic-preview+json'","\n    -u ","Telegram"," is one of the most popular messaging apps and probably the most loved by developers. The reasons are many, but I think that it mostly boils down to their openness, which led many programmers to create unique and interesting projects around it. Today I want to share one of those: ","https:\u002F\u002Ftlgur.com\u002F","Image from ","html","head","body","learning-touch-typing","Learning Touch Typing","moving-to-the-us-keyboard-layout","Moving to the US Keyboard layout","Like many people, I wasn’t a good typer. I started using computers when I was a kid and, by the time I grew into an adult, I developed my personal typing style, using ","only 5 fingers")));