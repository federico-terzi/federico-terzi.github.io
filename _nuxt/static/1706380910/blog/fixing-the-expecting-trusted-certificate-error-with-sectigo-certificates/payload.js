__NUXT_JSONP__("/blog/fixing-the-expecting-trusted-certificate-error-with-sectigo-certificates", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){return {data:[{article:{slug:"2022-08-20-fixing-the-expecting-trusted-certificate-error-with-sectigo-certificates",description:"The other day, I finally received the code-signing certificate from Sectigo. In the confirmation email, they explained the steps to download the certificate, and after following them, I found myself with a user.crt file.",layout:"post",title:I,author:"Federico Terzi",date:"2022-08-20T00:00:00.000Z",categories:"digital certificates certificate sectigo comodo code sign windows openssl",social_title:I,toc:[],body:{type:J,children:[{type:b,tag:g,props:{},children:[{type:a,value:K},{type:b,tag:i,props:{},children:[{type:a,value:x}]},{type:a,value:L}]},{type:a,value:f},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Firstly, I wanted to make sure that the certificate matched my private key, so I tried the steps explained in "},{type:b,tag:y,props:{href:"https:\u002F\u002Fsupport.comodo.com\u002Findex.php?\u002FKnowledgebase\u002FArticle\u002FView\u002F684\u002F17\u002Fhow-do-i-verify-that-a-private-key-matches-a-certificate-openssl",rel:[z,A,B],target:C},children:[{type:a,value:"this Comodo article"}]},{type:a,value:l}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I started by getting the private key’s modulus hash with:"}]},{type:a,value:f},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:i,props:{},children:[{type:a,value:"openssl rsa "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:u}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"private"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"key"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:a,value:G}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Then, I tried doing the same with the certificate:"}]},{type:a,value:f},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:i,props:{},children:[{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:u}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:v}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:a,value:G}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Ideally, the two output would match, and that would indicate a correct certificate\u002Fprivate key pair."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Unfortunately, the second command crashed with this message:"}]},{type:a,value:f},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:i,props:{},children:[{type:a,value:"unable to load certificate\n"},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"34359836736"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"error"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"0909006C"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"PEM"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,"literal-property","property"]},children:[{type:a,value:"routines"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"get_name"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"no start line"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"crypto"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:"pem"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:"pem_lib"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"c"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"745"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,"maybe-class-name"]},children:[{type:a,value:"Expecting"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"TRUSTED"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"CERTIFICATE"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"After a bit of researching, I found out that the "},{type:b,tag:i,props:{},children:[{type:a,value:x}]},{type:a,value:" file downloaded from Sectigo was not in the correct "},{type:b,tag:i,props:{},children:[{type:a,value:"CRT"}]},{type:a,value:" format. Luckily, the solution was converting the certificate to the correct one, as explained in "},{type:b,tag:y,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F36565316\u002Fssl-unable-to-load-certificate\u002F51290883#51290883",rel:[z,A,B],target:C},children:[{type:a,value:"this Stackoverflow question"}]},{type:a,value:", with:"}]},{type:a,value:f},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:i,props:{},children:[{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"inform "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"DER"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:u}]},{type:a,value:M},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:v}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"out certificate"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:v}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"After this command, OpenSSL produced a new "},{type:b,tag:i,props:{},children:[{type:a,value:"certificate.crt"}]},{type:a,value:" file with the correct CRT format, which we could then use:"}]},{type:a,value:f},{type:b,tag:o,props:{className:[p]},children:[{type:b,tag:q,props:{className:[r,s]},children:[{type:b,tag:i,props:{},children:[{type:a,value:H},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:u}]},{type:a,value:" certificate"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:v}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:F}]},{type:a,value:G}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Luckily, the hash of the private key’s modulo was equal to the certificate one, so we had a matching pair!"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The same workaround is likely to work with Comodo certificates."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Up next: it’s finally time to code-sign "},{type:b,tag:y,props:{href:"https:\u002F\u002Fespanso.org\u002F",rel:[z,A,B],target:C},children:[{type:a,value:"Espanso"}]},{type:a,value:" on Windows"}]}]},excerpt:{type:J,children:[{type:b,tag:g,props:{},children:[{type:a,value:K},{type:b,tag:i,props:{},children:[{type:a,value:x}]},{type:a,value:L}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F2022-08-20-fixing-the-expecting-trusted-certificate-error-with-sectigo-certificates",extension:".md",createdAt:P,updatedAt:P},header:null}],fetch:{},mutations:void 0}}("text","element","span","token","operator","\n","p","-","code"," ",":",".","punctuation","property-access","div","nuxt-content-highlight","pre","language-javascript","line-numbers","keyword","in","crt","constant","user.crt","a","nofollow","noopener","noreferrer","_blank","modulus ","noout ","|"," openssl md5\n","openssl x509 ","Fixing the “Expecting: TRUSTED CERTIFICATE” error with Sectigo certificates","root","The other day, I finally received the code-signing certificate from Sectigo. In the confirmation email, they explained the steps to download the certificate, and after following them, I found myself with a "," file."," user","number","\u002F","2024-01-27T18:41:00.403Z")));