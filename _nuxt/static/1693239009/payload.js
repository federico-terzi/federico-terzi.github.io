__NUXT_JSONP__("/", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek){return {data:[{articles:[{slug:"2023-01-19-good-software-architectures-are-mostly-about-boundaries",description:bE,layout:bF,title:cg,author:bG,date:"2023-01-19T00:00:00.000Z",categories:"software architecture design engineering",social_title:cg,toc:[{id:ch,depth:Z,text:ci},{id:cj,depth:Z,text:ck},{id:cl,depth:Z,text:cm}],body:{type:aG,children:[{type:b,tag:j,props:{},children:[{type:a,value:bE}]},{type:a,value:f},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:"Boundaries",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In this article, we are going to discuss boundaries following a pragmatic approach, presenting examples of problematic boundaries and discussing possible solutions. In the process, we’ll also try to derive general and reusable guidelines to design better boundaries in the future."}]},{type:a,value:f},{type:b,tag:aj,props:{id:"what-are-boundaries"},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#what-are-boundaries",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"What are boundaries?"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Before diving into the problematic examples, let’s take a step back and define what a boundary means in the context of this article:"}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Boundaries are the contracts between different software components, and model the communication between them."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:"Boundaries are contracts",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Boundaries are contracts. Different languages call them in different ways: interfaces, traits, types, signatures, but in a nutshell, boundaries define what information goes in and out of any given software component. Boundaries exist at all levels of the stack, defining the interactions between high-level systems, all the way down to services, modules, and functions."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Boundaries are a special part of a system. Despite accounting for a relatively small portion of a codebase, boundaries protect implementations from the outside world. A well-thought-out boundary lets consumers perform high-level operations without worrying about the low-level details of "},{type:b,tag:ad,props:{},children:[{type:a,value:"how"}]},{type:a,value:" the operation is implemented."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Boundaries are usually hard to change. Because boundaries define the interactions between software components, their shape strongly influences how consumers query producers. As a result, changing a boundary might require all its consumers to change. For example, let’s consider a web service, where its public API defines the boundary with clients. Changing the implementation of a route handler might be trivial, but changing the API shape should be done carefully, as we might break all dependent clients. This is one of the reasons why versioned APIs exist, and why changing boundaries is hard."}]},{type:a,value:f},{type:b,tag:aj,props:{id:"good-and-bad-boundaries"},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#good-and-bad-boundaries",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Good and bad boundaries"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"At the highest level, good boundaries promote two important software engineering principles:"}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:N,props:{},children:[{type:a,value:"Single responsibility"}]},{type:a,value:": every software component is only responsible for one domain area, minimizing the overlap with other components’ responsibilities."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:N,props:{},children:[{type:a,value:"Loose coupling"}]},{type:a,value:": every software component is weakly associated with the others so that a change in one component doesn’t affect the others. Moreover, software components should know as little as possible about the other components."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"At the same time, bad boundaries tend to display opposite properties:"}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:N,props:{},children:[{type:a,value:"Multiple responsibilities"}]},{type:a,value:" (aka. “fat” software components): fewer modules that are responsible for several domain areas, and are hard to change."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:N,props:{},children:[{type:a,value:"Tight coupling"}]},{type:a,value:": software components that are strongly dependent on each other, knowing a lot about each other’s implementation details."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:"Good vs Bad boundaries",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage2.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Another useful tool to evaluate the quality of a boundary is to analyze its "},{type:b,tag:ad,props:{},children:[{type:a,value:"information leaks"}]},{type:a,value:", that is, the amount of unnecessary information that goes through it."}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Each software component should minimize the amount of information it has to deal with, accepting and exposing the least amount of information necessary to perform its responsibility."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"When we allow a service or module to know more than it needs to, we expose it to the risk of becoming strongly coupled with other components, making the system hard to maintain in the long term."}]},{type:a,value:f},{type:b,tag:aj,props:{id:"a-problematic-boundary"},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#a-problematic-boundary",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"A problematic boundary"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After covering boundaries at a high level, we are now ready to tackle our first problematic boundary. We are going to discuss a common anti-pattern found in the front-end world, focusing on the process of designing good component interfaces."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Our goal is to create a React component to display users’ avatars."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:"The Avatar Component",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage3.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:cn},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" type defined in our codebase with the following schema:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,aT]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:aH}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,aU]},children:[{type:a,value:aq}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:cp},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\n  email"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"During the application lifecycle, we’ll obtain the currently logged-in "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" from our authentication API."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Given that we already have a "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" instance from our authentication layer and it contains all the information we need, a possible approach to implement the "},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" component could be to accept a "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" object as prop:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,aT]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:aH}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,aU]},children:[{type:a,value:cq}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n  user"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:cr},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,cs,R]},children:[{type:a,value:as}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" user "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:cu}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:cv},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F Then to use it"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:"Avatar user"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Despite displaying the user image and name correctly, this "},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" implementation is not great: by accepting a "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" as prop, we are leaking a lot of information through the interface boundary, which could hurt maintainability in the long run."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"For example, suppose that in a few weeks, we are asked to implement a comment section under our application’s blog posts."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:"Comment List",src:"\u002Fposts\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries\u002Fimage4.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Ideally, we would like to re-use the "},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" component to display comments’ users. Unfortunately, the Comment API does not return a "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" object, but rather a "},{type:b,tag:k,props:{},children:[{type:a,value:aJ}]},{type:a,value:" object, having the following schema:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,aT]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:aH}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,aU]},children:[{type:a,value:aJ}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\n  thumbnailUrl"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:"\n  karma"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:J}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"As you can see, "},{type:b,tag:k,props:{},children:[{type:a,value:aJ}]},{type:a,value:" has both the first name and the image URL we need, so can we use it? Well, not exactly, as the "},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" component can only accept "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" objects, not "},{type:b,tag:k,props:{},children:[{type:a,value:aJ}]},{type:a,value:" (s). If we tried to pass "},{type:b,tag:k,props:{},children:[{type:a,value:aJ}]},{type:a,value:"s to the Avatar, besides the TypeScript compiler screaming at us, we would not be able to see the image, as in "},{type:b,tag:k,props:{},children:[{type:a,value:aJ}]},{type:a,value:" the field is called "},{type:b,tag:k,props:{},children:[{type:a,value:bg}]},{type:a,value:" and not "},{type:b,tag:k,props:{},children:[{type:a,value:aW}]},{type:a,value:z}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"With deadlines looming, we might be tempted to work around the issue with hackish solutions:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,aT]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F The lazy casting"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cy},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:aX}]},{type:a,value:cr},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F Or even worse, the mock values"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:cw},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cx},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cy},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:cA},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    email"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:at}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Why is it so hard? The problem is that "},{type:b,tag:N,props:{},children:[{type:a,value:"despite only needing a first name and image URL to work, our"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:as}]}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"component takes a full"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:aq}]}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"as input!"}]},{type:a,value:" In other words, we are coupling the "},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" component with way more information than necessary, creating a "},{type:b,tag:ad,props:{},children:[{type:a,value:"leaking boundary"}]},{type:a,value:". The problem might not become apparent until we either attempt to reuse the component, try mocking some data for testing, or start a refactor."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We’ll discuss other kinds of leaking boundaries throughout the article, but for now, let’s focus on the possible solutions. As we mentioned earlier, our main problem is that "},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" is tightly coupled with the "},{type:b,tag:k,props:{},children:[{type:a,value:aq}]},{type:a,value:" type, which has way more information than necessary. In general, the solution is to make our component only dependent on the exact information we need:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,aT]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:aH}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,aU]},children:[{type:a,value:cq}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:cp},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ar]},children:[{type:a,value:w}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,cs,R]},children:[{type:a,value:as}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" firstName"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" imageUrl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ct},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:cu}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:cv},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:c},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F Then to use it with both User and PublicUser"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:cB},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cC},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aV},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:cB},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:cC},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The "},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" now only depends on "},{type:b,tag:k,props:{},children:[{type:a,value:aB}]},{type:a,value:cE},{type:b,tag:k,props:{},children:[{type:a,value:aW}]},{type:a,value:", so we can easily reuse it across the app. With this change, we promoted "},{type:b,tag:N,props:{},children:[{type:a,value:"loose coupling"}]},{type:a,value:", preventing an information leak (for example with the User’s "},{type:b,tag:k,props:{},children:[{type:a,value:"email"}]},{type:a,value:" and PublicUser’s "},{type:b,tag:k,props:{},children:[{type:a,value:"karma"}]},{type:a,value:O}]},{type:a,value:f},{type:b,tag:aj,props:{id:"towards-better-boundaries"},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#towards-better-boundaries",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Towards better boundaries"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Before diving into the next examples, let’s summarize what we learned so far:"}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:cF}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aj,props:{id:"a-service-level-example"},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#a-service-level-example",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"A service-level example"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After covering an example related to the front-end world, our next case study revolves around a hypothetical E-commerce website. In particular, our goal is to design a web service to generate product recommendations. The service will accept "},{type:b,tag:k,props:{},children:[{type:a,value:aY}]},{type:a,value:" (s) and return the list of product recommendations that might be relevant for the given users."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The main API endpoint could look as follows:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F Return a list of recommended products for the given user_id"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:bI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:bJ},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"recommended_products\n"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"At the implementation level, the service will generate product recommendations based on the users’ past order history. In a nutshell, the process could be approximated with these steps:"}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"The service receives a "},{type:b,tag:k,props:{},children:[{type:a,value:aY}]},{type:a,value:" as input."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"The service fetches the list of recently purchased products for the given user."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"The service returns a list of similar products."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The initial implementation would return a JSON response, such as:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,bj,g]},children:[{type:a,value:aM}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In a couple of weeks, the service implementation is completed and the team deploys it."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After some real-world testing, the product team realizes that despite providing good recommendations in most cases, the service occasionally returns non-relevant products for some users. Given that the recommendations are based on the recently purchased products, the product team asks the service developers to add the original “source data” alongside the recommendations. In other words, the service would not only return the product recommendations but also the list of purchased products that were used to generate it."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The service developers think “well, adding that data shouldn’t be a huge problem, we already have it in our API handler, we can just add an additional response field. We could turn it off by default and add an additional query parameter "},{type:b,tag:k,props:{},children:[{type:a,value:bk}]},{type:a,value:" to request it”."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Fast forward a couple of hours, and our API response looks as follows:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:bI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:bJ},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"recommended_products"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"?"}]},{type:a,value:bk},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,"boolean"]},children:[{type:a,value:B}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,bj,g]},children:[{type:a,value:aM}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:"\"latest_ordered_products\""}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:cG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"Pizza Plate\""}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,bj,g]},children:[{type:a,value:aM}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The product team is happy. Thanks to this additional data, they figure out that the broken product recommendations were caused by some fancy Unicode characters contained in a few products’ names. A happy ending, right? Well, kind of. For now, we got the quick win the business needed at the expense of a minor information leak."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"A few weeks afterward, a product manager realizes that users might be also interested in re-buying some of their previously purchased products. The (already busy) developers are therefore asked to add a new section to the E-commerce Homepage to show a “buy again” section, with some of their previously purchased products."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"With the deadlines looming, the assigned developer investigates the easiest way to provide that information. After a painful experience the month before, the developer dreads the idea of using the Orders API again, as it’s a legacy, badly-designed service that it’s an absolute pain to use. During this search, the developer stumbles upon the Recommendation API and its "},{type:b,tag:k,props:{},children:[{type:a,value:aZ}]},{type:a,value:" parameter. Eureka! Given that the frontend already uses the Recommendation API on the Homepage, getting the products necessary for the “buy again” section would be as straightforward as passing the "},{type:b,tag:k,props:{},children:[{type:a,value:bk}]},{type:a,value:" parameter and reading another JSON field."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Shortly thereafter, the “Buy again” section is up and running on the E-commerce homepage, and everyone is happy."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"While nothing has broken yet, let’s stop for a moment to analyze the current situation:"}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"The recommendation service, whose sole goal was to provide a list of recommended products, exposed the additional "},{type:b,tag:k,props:{},children:[{type:a,value:aZ}]},{type:a,value:" field (an implementation detail) for debugging purposes."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"The frontend now uses this additional "},{type:b,tag:k,props:{},children:[{type:a,value:aZ}]},{type:a,value:" field to implement the (unrelated) “buy again” feature."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We’ll soon discuss why this is a problem, but for now, let’s remember that ideally, all software components should have a single responsibility and be loosely coupled."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Fast-forward a few weeks, the company’s data scientists design a new recommendation algorithm based on user profiling. Instead of using the previous order history to generate the recommendations, the new algorithm would profile the users based on some demographic information, and suggest products that are relevant to the profile types. Remember, the goal of the recommendation service is to generate a list of recommended products for a given user ID."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The response format for the new algorithm is the same as the original API contract:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:bI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:bJ},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:a,value:aY},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"recommended_products\n\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bK}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bh}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bL}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,al,l]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bM}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:an},{type:b,tag:c,props:{className:[d,bj,g]},children:[{type:a,value:aM}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"While reviewing the code, the developers of the recommendation service stumble upon the "},{type:b,tag:k,props:{},children:[{type:a,value:bk}]},{type:a,value:" parameter. This time, the products are based on the users’ demographics rather than their past orders, so that information is not available. After a bit of consideration, the developers are confident they can remove it, as it was only used as a one-off debugging tool and it’s unlikely someone is still using it. Just to be safe, they look at the request metrics to verify that no client is using that parameter, and… Well, to their surprise, it’s heavily used! How come a one-off debugging tool is still being used after months?"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After some investigation, they realize the Homepage needs that parameter to display the “Buy Again” section, and deploying the new recommendation service as-is will break it."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Needless to say, the release date is postponed, a lengthy discussion between the service team and the frontend team is started, and other expensive consequences."}]},{type:a,value:f},{type:b,tag:_,props:{id:ch},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#what-went-wrong",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:ci}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"From a high-level perspective, this issue was caused by a problematic boundary:"}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"When the developers added the "},{type:b,tag:k,props:{},children:[{type:a,value:aZ}]},{type:a,value:" field, they exposed an implementation detail, leaking some information not related to the main service responsibility."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"When the frontend team used the "},{type:b,tag:k,props:{},children:[{type:a,value:aZ}]},{type:a,value:" field to implement the “buy again” feature, they created another "},{type:b,tag:ad,props:{},children:[{type:a,value:"implicit"}]},{type:a,value:" responsibility for the recommendation service, violating the single responsibility principle."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Every time a service, module, or function exposes more information than necessary, we run the risk of getting consumers to depend on it. As a result, consumers become coupled with implementation details rather than abstract APIs, making the system harder to change."}]},{type:a,value:f},{type:b,tag:_,props:{id:cj},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#how-we-could-have-prevented-it",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:ck}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"API requests and responses act as contracts. Therefore, we should be extremely careful with all the information we expose. Firstly, we should ask: “is this information absolutely necessary to perform the service responsibility?” and also “If I completely changed the implementation of the service, would this data still be relevant?”"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In the case of the product recommendation service, the only responsibility was to return the list of recommended products for the given user. The fact that it was derived from the user’s latest purchases was an implementation detail, and should not have been exposed."}]},{type:a,value:f},{type:b,tag:aj,props:{id:"another-step-forward"},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#another-step-forward",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Another step forward"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Before diving into our last example, let’s discuss what we learned so far:"}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:cF}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Good boundaries focus on a single responsibility"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aj,props:{id:"other-benefits-of-good-boundaries"},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#other-benefits-of-good-boundaries",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Other benefits of good boundaries"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We’ll close the article by discussing other benefits of good boundaries, starting again from a hypothetical scenario: we are hired as consultants by a rental company that is rebuilding its web application. As part of our duties, we are asked to create a function that, given a list of "},{type:b,tag:k,props:{},children:[{type:a,value:ac}]},{type:a,value:"s, returns the closest to a given coordinate."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:cn},{type:b,tag:k,props:{},children:[{type:a,value:ac}]},{type:a,value:" type defined in our codebase:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bN},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a_}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bl}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bp}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"As you can see, besides the address and owner information we find the "},{type:b,tag:k,props:{},children:[{type:a,value:$}]},{type:a,value:" field, which is all we need to implement this functionality."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Our method’s signature could look as follows:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:R}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:ba}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,"parameter"]},children:[{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:"houses"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:cH}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:" longitude"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F ... code to calculate the closest house"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"As part of our development process, we also want to make sure it works correctly, so we start writing unit tests:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:br}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,bs,g]},children:[{type:a,value:aI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a_}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"123\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bl}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bp}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"John\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:cI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:"mockHouse2"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a_}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:cG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bl}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bp}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"Bob\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:cI}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:bv},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:ba}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,bx,R,Y]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Despite covering the main use case of our function, this test is unnecessarily verbose and hard to maintain due to all the unrelated fields we need to specify in the mocks. Why do we need to specify an owner in the mock if we are only interested in using the "},{type:b,tag:k,props:{},children:[{type:a,value:$}]},{type:a,value:" field? If at some point in the future, another field is added to the "},{type:b,tag:k,props:{},children:[{type:a,value:ac}]},{type:a,value:" type, we would need to update the test even if the change is unrelated to the functionality we are testing. In short, this would become a maintenance burden."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"A first approach to mitigate the problem could be to use casting:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:br}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,bs,g]},children:[{type:a,value:aI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:cJ},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,G,bb]},children:[{type:a,value:aX}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,G,bb]},children:[{type:a,value:aX}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bv},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:ba}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,bx,R,Y]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This approach solves the maintenance and verbosity issues, though it has one potential problem: while TypeScript is smart enough to check whether what we are casting is reasonable (for example, if we tried to do "},{type:b,tag:k,props:{},children:[{type:a,value:"{ foo: true } as House"}]},{type:a,value:", it wouldn’t let us do it, as the two types are too incompatible), there are still some cases in which that casting could silence a problem. For example, let’s say for whatever reason we needed to add an "},{type:b,tag:k,props:{},children:[{type:a,value:cL}]},{type:a,value:" field to the "},{type:b,tag:k,props:{},children:[{type:a,value:ac}]},{type:a,value:" coordinates:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bN},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a_}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bl}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bn}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bo}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bp}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:bq}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:cL}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F \u003C- This field"}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Note: adding a field to the "},{type:b,tag:k,props:{},children:[{type:a,value:$}]},{type:a,value:" field doesn’t make much sense in this context, but there are cases where adding a field could likely happen. For the sake of this example, pretend "},{type:b,tag:k,props:{},children:[{type:a,value:$}]},{type:a,value:" is one of them :)"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Now we have a problem: our test would still pass the TypeScript compilation without errors, even though we would want to be notified of this new incompatibility:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:br}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:bO}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,bs,g]},children:[{type:a,value:aI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:cJ},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:cM}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,G,bb]},children:[{type:a,value:aX}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:cK},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:cM}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,G,bb]},children:[{type:a,value:aX}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bv},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:ba}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:bQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:bR},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,bx,R,Y]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:aD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In a lucky case, the test would fail at runtime in an obvious way, letting us realize the problem quickly. In an unlucky scenario, we would lose time to track down a cryptic error and fix it."}]},{type:a,value:f},{type:b,tag:_,props:{id:cl},children:[{type:b,tag:r,props:{ariaHidden:B,href:"#an-alternative-approach",tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:cm}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"A possible alternative would be to define the "},{type:b,tag:k,props:{},children:[{type:a,value:ba}]},{type:a,value:" function with a more focused boundary:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bN},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:cN}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:R}]},{type:a,value:" getClosestEntity"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:bS}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:"extends"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,aU]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:"entities"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:cH}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:" latitude"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:" number "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:bS}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"\u002F\u002F ...code to calculate the closest entity"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In this case, the "},{type:b,tag:k,props:{},children:[{type:a,value:bT}]},{type:a,value:" method is generic and can perform its task with whatever object has "},{type:b,tag:k,props:{},children:[{type:a,value:$}]},{type:a,value:" in it, including "},{type:b,tag:k,props:{},children:[{type:a,value:ac}]},{type:a,value:"(s). This has two advantages:"}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Tests could be lean and without casts, which would be optimal in terms of maintainability"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:br}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"returns closest entity correctly\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,bs,g]},children:[{type:a,value:aI}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:" mockEntity1 "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:" mockEntity2 "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bt}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:bu}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:bv},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:ae}]},{type:a,value:" closestEntity "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:H}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:bT}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" mockEntity2"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,R]},children:[{type:a,value:bw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:"closestEntity"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,bx,R,Y]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:P}]},{type:a,value:cO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:O}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"We could reuse the "},{type:b,tag:k,props:{},children:[{type:a,value:bT}]},{type:a,value:" function with many different entities without changing the implementation"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Important note: the example we just discussed is very likely over-engineered. I choose a simple example to make the point easier to understand, but I wouldn’t suggest this approach for such a simple use case. This approach really shines when applied to complex algorithms and logic we need to share in several different contexts."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aj,props:{id:bz},children:[{type:b,tag:r,props:{ariaHidden:B,href:bU,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:bA}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Throughout the article, we gave a general overview of boundaries. We started by defining boundaries and, through a series of examples, discussed the difference between good and bad ones, along with the consequences they can have on the software we produce."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"As always, balancing best practices and over-engineering is hard. You shouldn’t always apply these techniques, but rather, consider them as an additional tool to create better software."}]}]},excerpt:{type:aG,children:[{type:b,tag:j,props:{},children:[{type:a,value:bE}]}]},dir:bV,path:"\u002Farticles\u002F2023-01-19-good-software-architectures-are-mostly-about-boundaries",extension:bW,createdAt:aO,updatedAt:aO,cleanedSlug:"good-software-architectures-are-mostly-about-boundaries"},{slug:"2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals",description:"At Anima, we are always looking for new ways to automate our workflows. One of these efforts involved creating a new CircleCI pipeline to automatically deploy some NPM packages, removing the need for tedious manual work. The plan was straightforward: once started, the pipeline would bump the version of our packages (using Lerna), build them and finally publish them on our NPM registry.",layout:bF,title:cP,author:bG,date:"2022-10-17T00:00:00.000Z",categories:"circle ci circleci github status pending stuck approval",social_title:cP,toc:[{id:cQ,depth:Z,text:cR},{id:cS,depth:Z,text:cT},{id:cU,depth:Z,text:cV},{id:bB,depth:aE,text:aP},{id:bz,depth:Z,text:bA}],body:{type:aG,children:[{type:b,tag:j,props:{},children:[{type:a,value:cW},{type:b,tag:r,props:{href:cX,rel:[S,T,U],target:V},children:[{type:a,value:cY}]},{type:a,value:cZ},{type:b,tag:r,props:{href:c_,rel:[S,T,U],target:V},children:[{type:a,value:c$}]},{type:a,value:da}]},{type:a,value:f},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Given that we didn’t want to create a new release for every change pushed on "},{type:b,tag:k,props:{},children:[{type:a,value:"main"}]},{type:a,value:", we decided to use CircleCI’s manual approvals as “deployment gates”. The idea was to have the project owner decide when to perform a release by "},{type:b,tag:ad,props:{},children:[{type:a,value:"approving"}]},{type:a,value:" it through the CircleCI UI."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In practice, this can be easily implemented by using CircleCI’s job dependencies. For example, starting from a workflow in which we always run the deploy, such as:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[aQ,M]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bX},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" build\n"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We could decide to only run the deploy after a manual approval with:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[aQ,M]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bX},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"approval\n"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"With this configuration, the "},{type:b,tag:k,props:{},children:[{type:a,value:bd}]},{type:a,value:" job would only be started if both the "},{type:b,tag:k,props:{},children:[{type:a,value:"build"}]},{type:a,value:" succeeded and the "},{type:b,tag:k,props:{},children:[{type:a,value:bY}]},{type:a,value:" job was manually approved."}]},{type:a,value:f},{type:b,tag:_,props:{id:cQ},children:[{type:b,tag:r,props:{href:"#the-problem-github-status-gets-stuck-on-pending-for-unapproved-workflows",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:cR}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This approach worked flawlessly for our use-case, except for a small (but really annoying) problem: "},{type:b,tag:N,props:{},children:[{type:a,value:"approval jobs would always appear as “pending” on GitHub statuses unless manually approved."}]},{type:a,value:" Although this was not a blocker, we lost the ability to understand at a glance which commits passed all CI checks."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:bZ,src:"\u002Fposts\u002F2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After a bit of digging, I realized we weren’t the only ones struggling with this issue, as it was "},{type:b,tag:r,props:{href:"https:\u002F\u002Fcircleci.canny.io\u002Fcloud-feature-requests\u002Fp\u002Fshow-overall-all-checks-have-passed-status-in-github-even-on-builds-with-incompl",rel:[S,T,U],target:V},children:[{type:a,value:"one of the most requested features on CircleCI’s feedback channels"}]},{type:a,value:". Unfortunately, the thread didn’t offer any useful information or workaround, so we were stuck with this sub-optimal solution."}]},{type:a,value:f},{type:b,tag:_,props:{id:cS},children:[{type:b,tag:r,props:{href:"#the-workaround-overriding-github-commit-statuses-manually",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:cT}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Fast forward a few weeks, and I find myself developing a new CI integration. While going through the GitHub API documentation, I stumble upon the "},{type:b,tag:r,props:{href:"https:\u002F\u002Fdocs.github.com\u002Fen\u002Frest\u002Fcommits\u002Fstatuses",rel:[S,T,U],target:V},children:[{type:a,value:"GitHub’s Commit Status API"}]},{type:a,value:", which allows users to programmatically access commit statuses."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Among other things, you can "},{type:b,tag:ad,props:{},children:[{type:a,value:"create"}]},{type:a,value:" a new commit status with this HTTP request:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[aQ,M]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"curl \\\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"X POST \\\n  "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"-H \"Accept"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" application\u002Fvnd.github+json\" \\\n  "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"-H \"Authorization"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" Bearer \u003CYOUR"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"TOKEN"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Q}]},{type:a,value:"\" \\\n  https"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\u002F\u002Fapi.github.com\u002Frepos\u002FOWNER\u002FREPO\u002Fstatuses\u002FSHA \\\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"d '"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:df}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"https:\u002F\u002Fexample.com\u002Fbuild\u002Fstatus\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"The build succeeded!\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:di},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"continuous-integration\u002Fjenkins\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"'\n"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"What captures my attention is the "},{type:b,tag:k,props:{},children:[{type:a,value:bD}]},{type:a,value:" field, which acts as a sort of "},{type:b,tag:ad,props:{},children:[{type:a,value:a_}]},{type:a,value:" for the commit status. While experimenting, I ask myself: what happens if you specify a "},{type:b,tag:k,props:{},children:[{type:a,value:bD}]},{type:a,value:" value of an existing status? I was expecting the "},{type:b,tag:k,props:{},children:[{type:a,value:bD}]},{type:a,value:" to be specific to a given GitHub’s access token, but that turned out to be an incorrect assumption. As it turns out, "},{type:b,tag:N,props:{},children:[{type:a,value:"specifying the same"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:bD}]}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:a,value:"of an existing status overrides the status, regardless of the entity that created it… Bingo!"}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We finally got a possible workaround: we could wait for CircleCI’s approval status to appear on GitHub’s commit statuses, and then override it using the above request to appear as successful."}]},{type:a,value:f},{type:b,tag:_,props:{id:cU},children:[{type:b,tag:r,props:{href:"#the-solution-a-bash-script-to-patch-commit-statuses",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:cV}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"I spent the following 20 minutes putting together a script that would:"}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Wait for the approval status to appear on the GitHub commit statuses"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Override it with a “success” state"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Here it is (make sure to replace the values at the top with the correct ones):"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[aQ,M]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"#!\u002Fbin\u002Fbash"}]},{type:a,value:"\n\nset "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"e\n\n"},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"# Note that the CIRCLECI_JOB_NAME should also include the workflow name"}]},{type:a,value:"\nCIRCLECI_JOB_NAME=\"your"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"workflow\u002Fdeploy"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"approval\"\nREPO_NAME=\"your"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"repo"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"name\"\nREPO_OWNER=\"your"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"github"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"account\"\n"},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"# Note: you should also set a valid GitHub token in the GITHUB_ACCESS_TOKEN variable"}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"echo \"Patching approval job named"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" $CIRCLECI_JOB_NAME\"\n\nfor i in "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"1..10"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"\ndo\n  echo \"waiting for status to appear"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aM}]},{type:a,value:"\"\n\n  sleep 10\n\n  curl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"request GET \\\n    "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\u002F\u002Fapi.github.com\u002Frepos\u002F$REPO_OWNER\u002F$REPO_NAME\u002Fstatuses\u002F$CIRCLE_SHA1\" \\\n    "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" application\u002Fvnd.github.v3+json' \\\n    "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" Bearer $GITHUB_ACCESS_TOKEN\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Q}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"statuses.json\n\n  cat commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"statuses.json\n  cat commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"statuses.json "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aw}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"r '."},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:a,value:".context' "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:Q}]},{type:a,value:dm},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"statuses.txt\n\n  "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"if grep -q \"ci\u002Fcircleci"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" $CIRCLECI_JOB_NAME\" \"commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"statuses.txt\"; then\n    echo \"status appeared"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" patching the pending state\"\n    URL=$(cat commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"statuses.json"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aw}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"r "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"arg name \"$CIRCLECI_JOB_NAME\" "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"c 'map(select(.context "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aw}]},{type:a,value:" contains($name))) "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aw}]},{type:a,value:" ."},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ao}]},{type:a,value:".target_url' "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aw}]},{type:a,value:" head "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"1)\n\n    curl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"request POST \\\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dj},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\u002F\u002Fapi.github.com\u002Frepos\u002F$REPO_OWNER\u002F$REPO_NAME\u002Fstatuses\u002F$CIRCLE_SHA1\" \\\n      "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:dk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" application\u002Fvnd.github.v3+json' \\\n      "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:dl}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" Bearer $GITHUB_ACCESS_TOKEN\" \\\n      "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"--header 'Content-Type"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" application\u002Fjson' \\\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"data '"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:df}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:dg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" \"'\"$URL\"'\""},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:dh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"Patched pending state, please visit circleCI to start the approval.\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:di}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" \"ci\u002Fcircleci"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" '\"$CIRCLECI_JOB_NAME\"'\"\n      "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"'\n\n    exit 0\n  fi\ndone\n\necho \"Could not patch CircleCI approval"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" timed out\"\n"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In order for it to work, it has to be spawned roughly at the same time as the approval job, so having the same job dependencies is important. For example, starting from the case described at the top of our article, we could refactor the pipeline to:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[aQ,M]},children:[{type:b,tag:k,props:{},children:[{type:a,value:bX},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aH}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" patch"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"approval"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"status\n          "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" build "},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"# same dependency as approval, so that they are triggered at the same time"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bd}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:be},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:dd},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"approval\n\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aM}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"patch-deploy-approval-status"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"steps"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:"\"Patch deploy approval status\""}]},{type:a,value:aN},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"command"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,dp,w]},children:[{type:a,value:"\n          ... the code of the script above"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:aF,props:{id:bB},children:[{type:b,tag:r,props:{href:dq,ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:aP}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"You will need to have "},{type:b,tag:k,props:{},children:[{type:a,value:"jq"}]},{type:a,value:cE},{type:b,tag:k,props:{},children:[{type:a,value:"curl"}]},{type:a,value:" installed for the script to work"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"You will need to store a GitHub token (a personal access token could work as well) in a CircleCI environment variable for the API request to work"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:_,props:{id:bz},children:[{type:b,tag:r,props:{href:bU,ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:bA}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After more than a month of endless pending states, we finally got our green checks back!"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:bZ,src:"\u002Fposts\u002F2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals\u002Fimage1.png"},children:[]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Hopefully, CircleCI will fix this behavior soon, but in the meantime, this workaround should work well for our purposes."}]}]},excerpt:{type:aG,children:[{type:b,tag:j,props:{},children:[{type:a,value:cW},{type:b,tag:r,props:{href:cX,rel:[S,T,U],target:V},children:[{type:a,value:cY}]},{type:a,value:cZ},{type:b,tag:r,props:{href:c_,rel:[S,T,U],target:V},children:[{type:a,value:c$}]},{type:a,value:da}]}]},dir:bV,path:"\u002Farticles\u002F2022-10-17-solving-github-status-stuck-on-pending-with-circlecis-approvals",extension:bW,createdAt:aO,updatedAt:aO,cleanedSlug:"solving-github-status-stuck-on-pending-with-circlecis-approvals"},{slug:"2022-09-21-automatic-codesigning-on-windows-using-github-actions",description:"After our previous article on automatic code-signing for macOS applications, we are now going to cover the process for Windows binaries. The article is going to discuss all the necessary steps to get a Windows application code-signed, starting from the process to obtain a certificate, all the way down to automating the signing process in your CI pipelines.",layout:bF,title:"Automatic Code-signing on Windows using GitHub Actions",author:bG,date:"2022-09-21T00:00:00.000Z",categories:"code sign signing signtool certificate sectigo authority ci automatic github actions",social_title:"Automatic Code-signing on Windows",social_subtitle:"using GitHub Actions",toc:[{id:dr,depth:Z,text:ds},{id:bB,depth:aE,text:aP},{id:dt,depth:Z,text:du},{id:dv,depth:aE,text:dw},{id:dx,depth:aE,text:dy},{id:dz,depth:Z,text:dA},{id:dB,depth:aE,text:"Troubleshooting “Expecting: TRUSTED CERTIFICATE” error"},{id:dC,depth:Z,text:dD},{id:dE,depth:Z,text:dF},{id:dG,depth:Z,text:dH},{id:dI,depth:Z,text:dJ},{id:dK,depth:Z,text:dL},{id:dM,depth:Z,text:dN},{id:dO,depth:aE,text:aP},{id:dP,depth:aE,text:dQ}],body:{type:aG,children:[{type:b,tag:j,props:{},children:[{type:a,value:dR},{type:b,tag:r,props:{href:b_,rel:[S,T,U],target:V},children:[{type:a,value:dS}]},{type:a,value:dT}]},{type:a,value:f},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The article summarizes the steps we went through to code-sign Espanso, a cross-platform text expander. If you get stuck in the process, I also recommend checking out "},{type:b,tag:r,props:{href:"https:\u002F\u002Fgithub.com\u002Fespanso\u002Fespanso",rel:[S,T,U],target:V},children:[{type:a,value:"Espanso’s source code"}]},{type:a,value:z}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aj,props:{id:"getting-a-code-signing-certificate"},children:[{type:b,tag:r,props:{href:"#getting-a-code-signing-certificate",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Getting a Code-signing Certificate"}]},{type:a,value:f},{type:b,tag:_,props:{id:dr},children:[{type:b,tag:r,props:{href:"#choosing-a-certificate-authority",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:ds}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Before coding our way into the automatic CI pipeline, we first need to obtain a Code-signing certificate. There are multiple companies you can get one from, so the first challenge is to figure out which one to choose. We could talk to great lengths about the pros\u002Fcons of the various providers, but for the sake of this article, let’s summarize it by asking two questions:"}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Are you trying to sign the executable as a company or as an individual?"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"What is your budget?"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"These are my recommendations depending on the above answers:"}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:N,props:{},children:[{type:a,value:"Company with a large budget"}]},{type:a,value:": buy an EV certificate from DigiCert, those are the most expensive (currently at ~700$\u002Fyear) but they offer the best reputation and customer support."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:N,props:{},children:[{type:a,value:"Individual with a large budget"}]},{type:a,value:": buy an OV certificate from DigiCert. These are still expensive (~500$\u002Fyear), but don’t offer as much reputation as an EV certificate (your users will still see Windows’ SafeScreen at first). Unfortunately, individuals can’t buy EV certificates, so this is likely the best you could find"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:N,props:{},children:[{type:a,value:"Individual with a small budget"}]},{type:a,value:": buy an OV certificate from a Sectigo reseller, like CodeSigningStore.com. I went down this route as Espanso is an open-source project and I had to be careful about the budget. Overall, the experience was "},{type:b,tag:ad,props:{},children:[{type:a,value:"ok"}]},{type:a,value:", and after about 3 weeks of back and forth with their customer support, I managed to get a valid certificate at the price of ~70$\u002Fyear, thus significantly cheaper than the other options"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In short, if you are a company I recommend buying an EV certificate from DigiCert, as they offer the best reputation for your executable. On the other hand, if you are looking to code-sign your program (maybe an open-source project) on a budget, then an OV certificate from a reseller like "},{type:b,tag:r,props:{href:dU,rel:[S,T,U],target:V},children:[{type:a,value:dV}]},{type:a,value:" could be an option."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The next section will describe the process we went through to get an OV certificate from Sectigo. Feel free to jump to the next one if you already have a certificate or you decide to use a different provider."}]},{type:a,value:f},{type:b,tag:aF,props:{id:bB},children:[{type:b,tag:r,props:{href:dq,ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:aP}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"I highly recommend buying 3 years certificates. Despite being more expensive, they will save you from the “overhead” of re-applying for a certificate each year. Moreover, some certificates (like the OV version) require time to build a reputation, and buying a 3 years certificate means you won’t have to rebuild that reputation once a year."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"If you choose an EV certificate, keep in mind that you will need to have an hardware token (a USB key shipped to you by the certificate authority) connected to the machine while performing the digital signature. This has an important consequence: "},{type:b,tag:N,props:{},children:[{type:a,value:"you won’t be able to use GitHub-hosted CI agents to perform the digital signature"}]},{type:a,value:", as you can’t connect the physical USB token to them. There are several possible workarounds, but a common one used in professional environments consists in running "},{type:b,tag:ad,props:{},children:[{type:a,value:"self-hosted"}]},{type:a,value:" runners for your Windows CI integration. In short, you would keep a physical server inside your company’s office with the hardware token always connected. When a CI build is scheduled, GitHub (or your CI provider of choice) will run the build on your server (having the hardware key connected) instead of a cloud VM."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:_,props:{id:dt},children:[{type:b,tag:r,props:{href:"#buying-an-ov-certificate-from-sectigo",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:du}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After a thorough evaluation of the possible options, I decided to get an OV certificate from Sectigo (or to be more precise, a reseller), as it was the cheapest option I could find with "},{type:b,tag:ad,props:{},children:[{type:a,value:"acceptable"}]},{type:a,value:" reviews online (just search for “Comodo reviews” online to get an idea)."}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"For context: Comodo was rebranded to Sectigo in 2018, but there is the same company behind them."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"While you could buy a code-signing certificate directly from Sectigo’s website, I decided to buy it from a reseller, as the end result would be similar at a fraction of the price. I personally choose "},{type:b,tag:r,props:{href:dU,rel:[S,T,U],target:V},children:[{type:a,value:dV}]},{type:a,value:" as it seemed the reseller "},{type:b,tag:ad,props:{},children:[{type:a,value:"with the least bad reviews online"}]},{type:a,value:" (not exactly reassuring, I know)."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"So I went ahead and paid 207$ for a 3 years Sectigo certificate."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Shortly after, I received an email with a link to submit a "},{type:b,tag:ad,props:{},children:[{type:a,value:"Certificate Signing Request"}]},{type:a,value:" (CSR), a file containing your public key and other information. This will be used by the certificate authority to generate the certificate."}]},{type:a,value:f},{type:b,tag:aF,props:{id:dv},children:[{type:b,tag:r,props:{href:"#generating-a-certificate-signing-request-csr",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dw}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"As discussed above, we need to submit a CSR to the Certificate Authority to generate a certificate. While there are multiple ways to create a CSR, these are the steps to generate one using "},{type:b,tag:k,props:{},children:[{type:a,value:b$}]},{type:a,value:i}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Note: If you are on Windows, the easiest way to get "},{type:b,tag:k,props:{},children:[{type:a,value:b$}]},{type:a,value:" is by using the executable distributed as part of a "},{type:b,tag:k,props:{},children:[{type:a,value:"git"}]},{type:a,value:" installation. In my case, after installing Git, I had access to the "},{type:b,tag:k,props:{},children:[{type:a,value:"openssl.exe"}]},{type:a,value:" executable in this path: "},{type:b,tag:k,props:{},children:[{type:a,value:"'C:\\Program Files\\Git\\usr\\bin\\openssl.exe"}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Open a Powershell terminal"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Run this command to launch the generation wizard:"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:dW}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dX}]},{type:a,value:" req "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:"newkey rsa"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"4096"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:"keyout "},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:ca}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:x}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:"out "},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:"MYCSR"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"csr"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"You will be presented with a series of prompts:\n"},{type:b,tag:ap,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Create and verify a password. This is the password used to protect your private key, "},{type:b,tag:N,props:{},children:[{type:a,value:"make sure to save it somewhere, as we will need it later"}]}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:bf},{type:b,tag:N,props:{},children:[{type:a,value:"Country name"}]},{type:a,value:", a two-letter code for your country (see a"},{type:b,tag:r,props:{href:"https:\u002F\u002Fwww.ssl.com\u002Fcountry-codes\u002F",rel:[S,T,U],target:V},children:[{type:a,value:" list of possible values"}]},{type:a,value:O}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:bf},{type:b,tag:N,props:{},children:[{type:a,value:"Locality name"}]},{type:a,value:", the name of your city or town"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:bf},{type:b,tag:N,props:{},children:[{type:a,value:"Organization name"}]},{type:a,value:", the name of your company\u002Forganization\u002Fpersonal name"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:bf},{type:b,tag:N,props:{},children:[{type:a,value:"Common name"}]},{type:a,value:", the name of your website (such as "},{type:b,tag:k,props:{},children:[{type:a,value:"espanso.org"}]},{type:a,value:O}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:bf},{type:b,tag:N,props:{},children:[{type:a,value:"Email address"}]}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Skip the challenge password"}]},{type:a,value:f}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"At the end of this process, you should find a "},{type:b,tag:k,props:{},children:[{type:a,value:dY}]},{type:a,value:" file containing your private key and a "},{type:b,tag:k,props:{},children:[{type:a,value:dZ}]},{type:a,value:" file containing your certificate signing request. Keep both of them in a safe place as we will need them soon"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Submit the "},{type:b,tag:k,props:{},children:[{type:a,value:dZ}]},{type:a,value:" file to the Certificate Authority"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aF,props:{id:dx},children:[{type:b,tag:r,props:{href:"#completing-the-verification-process",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dy}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After your request has been sent, the Certificate Authority will request additional information to verify your identity. This will usually take a few days or weeks, but in the end, you should receive a certificate."}]},{type:a,value:f},{type:b,tag:aj,props:{id:"preparing-the-certificate"},children:[{type:b,tag:r,props:{href:"#preparing-the-certificate",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Preparing the Certificate"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After the certificate has been issued, we need to turn it into a format compatible with our target CI pipeline. The following steps are necessary for Sectigo-issued certificates, but keep in mind the process might be slightly different with other Certificate Authorities. Our goal is to obtain the code-signing certificate in "},{type:b,tag:k,props:{},children:[{type:a,value:"PFX"}]},{type:a,value:" format, encoded as base64."}]},{type:a,value:f},{type:b,tag:_,props:{id:dz},children:[{type:b,tag:r,props:{href:"#verify-that-the-certificate-and-private-key-match",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dA}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Before diving into the actual conversion process, it’s a good idea to verify that the certificate being issued matches our private key (the one generated with the CSR)."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"To verify that, we need to run two commands:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"openssl rsa "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:cb}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:ca}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:x}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aw}]},{type:a,value:ea}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"and also (with "},{type:b,tag:k,props:{},children:[{type:a,value:cc}]},{type:a,value:" being the certificate issued by the CA):"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"openssl x509 "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:d_},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:d$},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:cb}]},{type:a,value:" user"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:cd}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:aw}]},{type:a,value:ea}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"If the output of the two previous commands match, then the certificate is correct!"}]},{type:a,value:f},{type:b,tag:aF,props:{id:dB},children:[{type:b,tag:r,props:{href:"#troubleshooting-expecting-trusted-certificate-error",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Troubleshooting “"},{type:b,tag:N,props:{},children:[{type:a,value:"Expecting: TRUSTED CERTIFICATE” error"}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In my case, the previous commands returned the following error:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"unable to load certificate\n"},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"34359836736"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:"error"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:"0909006C"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:"PEM"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m,l]},children:[{type:a,value:"routines"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:"get_name"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:"no start line"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:"crypto"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"pem"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"pem_lib"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"c"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:"745"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:"Expecting"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:"TRUSTED"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:"CERTIFICATE"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"This error is due to the "},{type:b,tag:k,props:{},children:[{type:a,value:cc}]},{type:a,value:" file being encoded in the wrong format. Luckily, we can solve this problem by following "},{type:b,tag:r,props:{href:"https:\u002F\u002Ffedericoterzi.com\u002Fblog\u002Ffixing-the-expecting-trusted-certificate-error-with-sectigo-certificates",rel:[S,T,U],target:V},children:[{type:a,value:"these steps"}]},{type:a,value:z}]},{type:a,value:f},{type:b,tag:_,props:{id:dC},children:[{type:b,tag:r,props:{href:"#convert-the-certificate-to-pfx-format",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dD}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After verifying that the certificate matches our private key, we are ready to “bundle” all of them together into a PFX certificate. We will use "},{type:b,tag:k,props:{},children:[{type:a,value:b$}]},{type:a,value:" for this step as well:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:dW}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:dX}]},{type:a,value:" pkcs12 "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,G,bb]},children:[{type:a,value:"export"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:"out codesign"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:ce}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:"inkey "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:"\\"},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:ca}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:x}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:cb}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:"\\certificate"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:cd}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Where:"}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:dY}]},{type:a,value:" is the private key we generated during the CSR step."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"certificate.crt"}]},{type:a,value:" is the public certificate issued by the Certificate Authority. In the case of Sectigo certificates, "},{type:b,tag:N,props:{},children:[{type:a,value:"this file is not the"}]},{type:a,value:h},{type:b,tag:N,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:cc}]}]},{type:a,value:" certificate directly issued by the CA, but refers to the converted certificate after "},{type:b,tag:r,props:{href:"https:\u002F\u002Ffedericoterzi.com\u002Fblog\u002Ffixing-the-expecting-trusted-certificate-error-with-sectigo-certificates\u002F",rel:[S,T,U],target:V},children:[{type:a,value:"following these steps"}]},{type:a,value:z}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:eb}]},{type:a,value:" is the output PFX certificate file."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:_,props:{id:dE},children:[{type:b,tag:r,props:{href:"#test-the-code-signing-process-manually",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dF}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Before diving into the process to build an automatic signing pipeline, let’s verify that the code-signing certificate works as expected by attempting a manual signature."}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We will need Microsoft’s "},{type:b,tag:k,props:{},children:[{type:a,value:ec}]},{type:a,value:" to perform the following steps. You can get it by installing the Windows 10 SDK using Visual Studio. More info on this "},{type:b,tag:r,props:{href:"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F31869552\u002Fhow-to-install-signtool-exe-for-windows-10",rel:[S,T,U],target:V},children:[{type:a,value:"StackOverflow thread"}]},{type:a,value:z}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"We can sign an executable by opening a terminal and running the following command:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ed}]},{type:a,value:" sign "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"fd "},{type:b,tag:c,props:{className:[d,ag]},children:[{type:a,value:"SHA256"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"p "},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ee}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"ac "},{type:b,tag:c,props:{className:[d,ah]},children:[{type:a,value:ef}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:cd}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"f codesign"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:ce}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"tr http"},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"timestamp"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"sectigo"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"com"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"rfc3161 "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:I}]},{type:a,value:"td sha256 yourProgram"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"exe"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"where:"}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:ed}]},{type:a,value:" is the path to "},{type:b,tag:k,props:{},children:[{type:a,value:"signtool"}]},{type:a,value:". This path will vary depending on the Windows 10 SDK version being installed, so make sure to update the path accordingly."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:ee}]},{type:a,value:" should be replaced by your private key’s password (the one we choose during the CSR generation)"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"SectigoPublicCodeSigningRootR46_AAA.crt"}]},{type:a,value:" is the path to an appropriate "},{type:b,tag:ad,props:{},children:[{type:a,value:"intermediate certificate"}]},{type:a,value:". You can download the appropriate ones for "},{type:b,tag:r,props:{href:"https:\u002F\u002Fsupport.sectigo.com\u002Farticles\u002FKnowledge\u002FSectigo-Intermediate-Certificates",rel:[S,T,U],target:V},children:[{type:a,value:"Sectigo here"}]},{type:a,value:" and for "},{type:b,tag:r,props:{href:"https:\u002F\u002Fknowledge.digicert.com\u002Falerts\u002Fcode-signing-new-minimum-rsa-keysize.html",rel:[S,T,U],target:V},children:[{type:a,value:"DigiCert here"}]},{type:a,value:z}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:eb}]},{type:a,value:" is the path to the certificate we generated in the previous step."}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"yourProgram.exe"}]},{type:a,value:" is the path to the executable we want to sign"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"After running this command, right-click on the executable and choose “Properties” \u003E Digital Signatures tab. If everything was correct, you should now see an entry for your signature, as shown in the image below."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:b,tag:ax,props:{alt:bZ,src:"\u002Fposts\u002F2022-09-21-automatic-codesigning-on-windows-using-github-actions\u002Fimage0.png"},children:[]}]},{type:a,value:f},{type:b,tag:ak,props:{},children:[{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"If you don’t see a “Digital Signatures” tab, then it means the signature process didn’t complete successfully. Make sure to double check all the paths used in the above command."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aj,props:{id:"automating-the-signing-process-on-a-ci-pipeline"},children:[{type:b,tag:r,props:{href:"#automating-the-signing-process-on-a-ci-pipeline",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:"Automating the signing process on a CI pipeline"}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"Now that we successfully signed an executable with our new certificate, we are ready to automate the process as part of a CI pipeline. For this example, we are going to use GitHub Actions as platform, but these steps could be adapted to most providers with minimal changes."}]},{type:a,value:f},{type:b,tag:_,props:{id:dG},children:[{type:b,tag:r,props:{href:"#a-note-on-ev-certificates",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dH}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"If you are using a company’s EV certificate, you will likely need a hardware token (a USB key sent by the certificate authority) to sign your executables. As a result, "},{type:b,tag:N,props:{},children:[{type:a,value:"you won’t be able to use cloud-hosted CI agents"}]},{type:a,value:", as there is no way for you to connect the hardware token there."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In these scenarios, a common solution is to maintain a physical server in your company’s office with the hardware token always connected. At this point, you can use GitHub’s self-hosted runners to execute the CI pipelines from your local server, which will be connected to the required hardware token."}]},{type:a,value:f},{type:b,tag:_,props:{id:dI},children:[{type:b,tag:r,props:{href:"#converting-the-certificate-to-base64",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dJ}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In order to store the certificate as a GitHub Action "},{type:b,tag:ad,props:{},children:[{type:a,value:"Secret"}]},{type:a,value:", we need to encode it as base64 string. An easy way to do that on Windows is to run the following command:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,X]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"certutil "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:p}]},{type:a,value:"encode codesign"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:ce}]},{type:a,value:" base64cert"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"txt"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"If you also want to use an intermediate certificate (the "},{type:b,tag:k,props:{},children:[{type:a,value:ef}]},{type:a,value:" one we used above), you should generate the base64 of that one as well."}]},{type:a,value:f},{type:b,tag:_,props:{id:dK},children:[{type:b,tag:r,props:{href:"#preparing-github-secrets",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dL}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"At this point, we are ready to add the information we gathered so far as Secrets. Open your project’s repository and navigate to Settings \u003E Security \u003E Secrets \u003E Actions and add the following variables:"}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:eg}]},{type:a,value:" should contain the certificate encoded as base64, the one we prepared in the previous section"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:eh}]},{type:a,value:" should contain the private key’s password"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"(Optional) "},{type:b,tag:k,props:{},children:[{type:a,value:ei}]},{type:a,value:" the base64 of the intermediate certificate, if you’re using one"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:_,props:{id:dM},children:[{type:b,tag:r,props:{href:"#automating-the-code-sign-process",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dN}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"At this point, we are finally ready to automate the code-signing process. For the sake of this example, we will sign an executable located in path: "},{type:b,tag:k,props:{},children:[{type:a,value:"target\u002Frelease\u002Fespanso.exe"}]},{type:a,value:" , make sure to update it with the actual path of your program."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"The final Action step configuration will look like the following:"}]},{type:a,value:f},{type:b,tag:F,props:{className:[K]},children:[{type:b,tag:L,props:{className:[M,aQ]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:a$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" Sign executable\n  "},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:"env"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:eh}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:cf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" secrets.CODESIGN_PWD"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:ei}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:cf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" secrets.CODESIGN_INTERMEDIATE_BASE64 "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:eg}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:cf},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:" secrets.CODESIGN_BASE64"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,x,A]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,dp,w]},children:[{type:a,value:"\n    New-Item -ItemType directory -Path certificate\n    Set-Content -Path certificate\\certificate.txt -Value $env:CODESIGN_BASE64\n    certutil -decode certificate\\certificate.txt certificate\\certificate.pfx\n    Set-Content -Path certificate\\intermediate.txt -Value $env:CODESIGN_INTERMEDIATE_BASE64\n    certutil -decode certificate\\intermediate.txt certificate\\intermediate.crt"}]},{type:a,value:"\n\n    & 'C"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\u002FProgram Files (x86)\u002FWindows Kits\u002F10\u002Fbin\u002F10.0.22621.0\u002Fx86\u002Fsigntool.exe' sign \u002Ffd SHA256 \u002Fp $env"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"CODESIGN_PWD \u002Fac certificate\\intermediate.crt \u002Ff certificate\\certificate.pfx \u002Ftr \"http"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\u002F\u002Ftimestamp.sectigo.com\u002Frfc3161\" \u002Ftd sha256 target\u002Frelease\u002Fespanso.exe\n    \n    Remove"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"Item "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"Recurse "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"Force certificate\n"}]}]}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In a nutshell, these are the steps performed above:"}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Load the secrets as environmental variables"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Load the base64 certificates and convert them back to their original format"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Invoke "},{type:b,tag:k,props:{},children:[{type:a,value:ec}]},{type:a,value:" with the relevant parameters"}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Remove the temporary certificate files"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aF,props:{id:dO},children:[{type:b,tag:r,props:{href:"#notes-1",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:aP}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"If you are not using an intermediate certificate, you can remove the "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fac certificate\\intermediate.crt"}]},{type:a,value:" flag and all the lines that contain “intermediate”"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aF,props:{id:dP},children:[{type:b,tag:r,props:{href:"#alternative-approaches",ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:dQ}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"There are also other approaches you might prefer:"}]},{type:a,value:f},{type:b,tag:au,props:{},children:[{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"If your project is written in Rust, you could take inspiration from our PR: "},{type:b,tag:r,props:{href:ej,rel:[S,T,U],target:V},children:[{type:a,value:ej}]}]},{type:a,value:f},{type:b,tag:t,props:{},children:[{type:a,value:"Use a pre-built GitHub Action such as: "},{type:b,tag:r,props:{href:ek,rel:[S,T,U],target:V},children:[{type:a,value:ek}]}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:aj,props:{id:bz},children:[{type:b,tag:r,props:{href:bU,ariaHidden:B,tabIndex:C},children:[{type:b,tag:c,props:{className:[D,E]},children:[]}]},{type:a,value:bA}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"In this article, we discussed the process to get your Windows program code-signed, starting from the choice of certificate authority, all the way down to a fully automated CI pipeline. The article was mostly focused on Sectigo certificates and GitHub actions, but most steps can be applied to other certificate authorities and CI platforms."}]},{type:a,value:f},{type:b,tag:j,props:{},children:[{type:a,value:"If you are also distributing your app on macOS, you might also enjoy my article on "},{type:b,tag:r,props:{href:b_,rel:[S,T,U],target:V},children:[{type:a,value:"automatic code-signing and notarization for macOS apps"}]},{type:a,value:z}]}]},excerpt:{type:aG,children:[{type:b,tag:j,props:{},children:[{type:a,value:dR},{type:b,tag:r,props:{href:b_,rel:[S,T,U],target:V},children:[{type:a,value:dS}]},{type:a,value:dT}]}]},dir:bV,path:"\u002Farticles\u002F2022-09-21-automatic-codesigning-on-windows-using-github-actions",extension:bW,createdAt:aO,updatedAt:aO,cleanedSlug:"automatic-codesigning-on-windows-using-github-actions"}]}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","\n","operator"," ",":","p","code","property","literal-property","{","}","-",",","a",";","li","\n  ","\n    ","string","key","\n      ",".","atrule","true",-1,"icon","icon-link","div","keyword","=","\u002F","number","nuxt-content-highlight","pre","line-numbers","strong",")","(","\u003E","function","nofollow","noopener","noreferrer","_blank","\u003C","language-javascript","property-access",2,"h2","coordinates","longitude","latitude","House","em","const","comment","constant","maybe-class-name"," string","h1","blockquote","string-property","[","\n       ","]","ol","User","builtin","Avatar","\n\n","ul"," number","|","img","\n     ","1","2","firstName","\"\"","mockHouse1",3,"h3","root","type","=\u003E","PublicUser"," publicUser"," \n","...","\n        ","2023-08-28T16:09:09.349Z","Notes","language-yaml","requires","\n            ","language-typescript","class-name","user","imageUrl","as","user_id","latest_ordered_products","id","name","getClosestHouse","module"," build\n      ","deploy","\n          ","Insert the ","thumbnailUrl","\"product_id\"","\"product_name\"","spread","include_latest_purchases","address","street","city","state","owner","phoneNumber","test","arrow","6","7","\n\n    ","expect","method","toBe","conclusion","Conclusion","notes","jobs","context","As software engineers, we are always asked to design maintainable and extensible software architectures. While design patterns and best practices help, most of them are just facades to one larger and fundamental principle: designing good boundaries.","post","Federico Terzi","\n  firstName","GET","users","\"recommended_products\"","1234","\"Pizza Cutter\"","type ","\"returns closest house correctly\""," closestHouse "," mockHouse2","closestHouse","T","getClosestEntity","#conclusion","\u002Farticles",".md","    ","deploy-approval","","https:\u002F\u002Ffedericoterzi.com\u002Fblog\u002Fautomatic-code-signing-and-notarization-for-macos-apps-using-github-actions","openssl","PRIVATEKEY","in","user.crt","crt","pfx"," $","Good Software Architectures are mostly about Boundaries","what-went-wrong","What went wrong","how-we-could-have-prevented-it","How we could have prevented it","an-alternative-approach","An alternative approach","Let’s assume we already have a ","\n  lastName","\n  imageUrl","Props"," User","function-variable"," Props","return","img src","Avatar \n  user","\n    firstName","\n    lastName","lastName","\n    imageUrl","Avatar firstName"," imageUrl","publicUser"," and ","Good boundaries do not leak any unnecessary information","\"456\"","point","\"1234\""," mockHouse1 "," mockHouse2 ","extra","\u002F\u002F \u003C-- missing the 'extra' field, but typescript does not complain","WithCoordinates","mockEntity1","Solving GitHub Status stuck on Pending with CircleCI’s Approvals","the-problem-github-status-gets-stuck-on-pending-for-unapproved-workflows","The problem: GitHub status gets stuck on “Pending” for unapproved workflows","the-workaround-overriding-github-commit-statuses-manually","The workaround: overriding GitHub Commit Statuses manually","the-solution-a-bash-script-to-patch-commit-statuses","The solution: a bash script to patch Commit statuses","At ","https:\u002F\u002Fwww.animaapp.com\u002F","Anima",", we are always looking for new ways to automate our workflows. One of these efforts involved creating a new ","https:\u002F\u002Fcircleci.com\u002F","CircleCI"," pipeline to automatically deploy some NPM packages, removing the need for tedious manual work. The plan was straightforward: once started, the pipeline would bump the version of our packages (using Lerna), build them and finally publish them on our NPM registry."," approval\n          "," build\n            "," deploy","\"state\"","\"success\"","\"target_url\"","\"description\"","\"context\"","url \"https","--header 'Accept","--header \"Authorization"," commit"," jq ","run","scalar","#notes","choosing-a-certificate-authority","Choosing a Certificate Authority","buying-an-ov-certificate-from-sectigo","Buying an OV certificate from Sectigo","generating-a-certificate-signing-request-csr","Generating a Certificate Signing Request (CSR)","completing-the-verification-process","Completing the verification process","verify-that-the-certificate-and-private-key-match","Verify that the Certificate and Private key match","troubleshooting-expecting-trusted-certificate-error","convert-the-certificate-to-pfx-format","Convert the certificate to PFX format","test-the-code-signing-process-manually","Test the code-signing process manually","a-note-on-ev-certificates","A note on EV certificates","converting-the-certificate-to-base64","Converting the certificate to base64","preparing-github-secrets","Preparing GitHub Secrets","automating-the-code-sign-process","Automating the code-sign process","notes-1","alternative-approaches","Alternative approaches","After our previous article on ","automatic code-signing for macOS applications",", we are now going to cover the process for Windows binaries. The article is going to discuss all the necessary steps to get a Windows application code-signed, starting from the process to obtain a certificate, all the way down to automating the signing process in your CI pipelines.","http:\u002F\u002FCodeSigningStore.com","CodeSigningStore.com","&","'C:\\Program Files\\Git\\usr\\bin\\openssl.exe'","PRIVATEKEY.key","MYCSR.csr","modulus ","noout "," openssl md5\n","codesign.pfx","signtool.exe","\"C:\\Program Files (x86)\\Windows Kits\\10\\bin\\10.0.19041.0\\x86\\signtool\"","\"\u003CPASSWORD_HERE\u003E\"","SectigoPublicCodeSigningRootR46_AAA","CODESIGN_BASE64","CODESIGN_PWD","CODESIGN_INTERMEDIATE_BASE64","https:\u002F\u002Fgithub.com\u002Fespanso\u002Fespanso\u002Fpull\u002F1352\u002Ffiles","https:\u002F\u002Fgithub.com\u002FDana-Prajea\u002Fcode-sign-action")));