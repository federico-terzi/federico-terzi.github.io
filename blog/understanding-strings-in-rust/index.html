<!doctype html>
<!-- 
  Hi there! Welcome to my website :)
  It seems you are interested in the source code, did you
  know that the website is open-source? See:
  https://github.com/federico-terzi/federico-terzi.github.io
-->
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Understanding Strings in Rust - Federico Terzi - A Software Engineering Journey</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="title" name="title" content="Federico Terzi - A Software Engineering Journey"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><meta data-n-head="ssr" data-hid="description" name="description" content="When I started learning Rust a couple of years ago, the first thing that really got me thinking was strings. You see, in Rust, there are 2 string types: the String and the &str types."><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="Understanding Strings in Rust"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="When I started learning Rust a couple of years ago, the first thing that really got me thinking was strings. You see, in Rust, there are 2 string types: the String and the &str types."><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://federicoterzi.com/social/2021-01-01-understanding-strings-in-rust.png"><meta data-n-head="ssr" name="twitter:card" content="summary"><meta data-n-head="ssr" name="twitter:site" content="@terzi_federico"><meta data-n-head="ssr" name="twitter:title" content="Understanding Strings in Rust"><meta data-n-head="ssr" name="twitter:description" content="When I started learning Rust a couple of years ago, the first thing that really got me thinking was strings. You see, in Rust, there are 2 string types: the String and the &str types."><meta data-n-head="ssr" name="twitter:image" content="https://federicoterzi.com/social/2021-01-01-understanding-strings-in-rust.png"><link data-n-head="ssr" rel="stylesheet" href="/colors.css"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"><link data-n-head="ssr" rel="manifest" href="/site.webmanifest"><link data-n-head="ssr" rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"><link data-n-head="ssr" rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="preload" href="/_nuxt/ed2850d.js" as="script"><link rel="preload" href="/_nuxt/9f592cb.js" as="script"><link rel="preload" href="/_nuxt/55fe2d7.js" as="script"><link rel="preload" href="/_nuxt/97a8332.js" as="script"><link rel="preload" href="/_nuxt/9c764e2.js" as="script"><style data-vue-ssr-id="c3ae2b30:0 d75bdb94:0 fa7ff0ca:0 56b15182:0 7ab12987:0 11a04204:0 4c3275e1:0 476c9a84:0 0356ed00:0 fcd77316:0 63f29e82:0 71a90360:0">@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(/_nuxt/fonts/inter-v7-latin-regular.33e43c3.eot);src:local(""),url(/_nuxt/fonts/inter-v7-latin-regular.33e43c3.eot?#iefix) format("embedded-opentype"),url(/_nuxt/fonts/inter-v7-latin-regular.5e6a773.woff2) format("woff2"),url(/_nuxt/fonts/inter-v7-latin-regular.cefb4aa.woff) format("woff"),url(/_nuxt/fonts/inter-v7-latin-regular.0e67589.ttf) format("truetype"),url(/_nuxt/b8db5cf5416facf0c5ec4489d0ee9bbe.svg#Inter) format("svg")}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(/_nuxt/fonts/inter-v7-latin-700.129e115.eot);src:local(""),url(/_nuxt/fonts/inter-v7-latin-700.129e115.eot?#iefix) format("embedded-opentype"),url(/_nuxt/fonts/inter-v7-latin-700.c2ceaa0.woff2) format("woff2"),url(/_nuxt/fonts/inter-v7-latin-700.7f5a89b.woff) format("woff"),url(/_nuxt/fonts/inter-v7-latin-700.6bb53f6.ttf) format("truetype"),url(/_nuxt/0a85e1f2fd11f8afbfa155c7c5ec0a12.svg#Inter) format("svg")}@font-face{font-family:"PT Serif";font-style:normal;font-weight:400;font-display:swap;src:url(/_nuxt/fonts/pt-serif-v16-latin-regular.ef9b698.eot);src:local(""),url(/_nuxt/fonts/pt-serif-v16-latin-regular.ef9b698.eot?#iefix) format("embedded-opentype"),url(/_nuxt/fonts/pt-serif-v16-latin-regular.511cda7.woff2) format("woff2"),url(/_nuxt/fonts/pt-serif-v16-latin-regular.b4f2a8d.woff) format("woff"),url(/_nuxt/fonts/pt-serif-v16-latin-regular.1602721.ttf) format("truetype"),url(/_nuxt/2b24347634a541da72419674a1818855.svg#PTSerif) format("svg")}html{--content-primary:#1a1a1a;--content-primary-inverted:#fff;--accent-primary:#c84c32;--accent-secondary:#2e4364;--accent-tertiary:#ecdbba;--accent-menu:#2e4364;--background-primary:#fff;--background-elevated:#f1f1f1;--background-semitransparent:hsla(0,0%,100%,0.7);--details:rgba(26,26,26,0.1)}html[data-theme=dark]{--content-primary:#fff;--content-primary-inverted:#1a1a1a;--accent-primary:#ef6b50;--accent-secondary:#8bb8ff;--accent-tertiary:#ecdbba;--accent-menu:#fff;--background-primary:#000;--background-elevated:#343434;--background-semitransparent:rgba(0,0,0,0.7);--details:hsla(0,0%,100%,0.1)}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}body,html{font-family:Inter,sans-serif;color:var(--content-primary);background-color:transparent;margin:0;padding:0}*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.main-layout-container{max-width:1512px;margin:auto}.main-layout-content{padding-top:95px;min-height:100vh}@media (max-width:992px){.main-layout-content{padding-top:50px;max-width:100vw;overflow-x:hidden}}.container[data-v-71b3c000]{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;overflow:hidden;z-index:-10;background-color:var(--background-primary);transition:all .5s ease}.blurred[data-v-71b3c000]{filter:blur(50px);height:450px;width:450px}.animate[data-v-71b3c000]{-webkit-animation:rotate-center-data-v-71b3c000 120s linear infinite both;animation:rotate-center-data-v-71b3c000 120s linear infinite both}.red[data-v-71b3c000]{top:25vh;left:-10vw;background-color:var(--accent-primary)}.blue[data-v-71b3c000],.red[data-v-71b3c000]{position:absolute;opacity:.15}.blue[data-v-71b3c000]{top:0;right:-10vw;background-color:var(--accent-secondary)}.yellow[data-v-71b3c000]{position:absolute;top:75vh;left:40vw;background-color:var(--accent-tertiary);opacity:.4}html[data-theme=dark] .yellow[data-v-71b3c000]{opacity:.2}@media (max-width:992px){.blurred[data-v-71b3c000]{height:300px;width:300px}}@-webkit-keyframes rotate-center-data-v-71b3c000{0%{transform:rotate(0) translateX(0) translateY(0)}50%{transform:rotate(180deg) translateX(300px) translateY(300px)}to{transform:rotate(1turn) translateX(0) translateY(0)}}@keyframes rotate-center-data-v-71b3c000{0%{transform:rotate(0) translateX(0) translateY(0)}50%{transform:rotate(180deg) translateX(300px) translateY(300px)}to{transform:rotate(1turn) translateX(0) translateY(0)}}.header[data-v-4dabaaf4]{position:fixed;top:0;right:0;left:0;z-index:20;background-color:transparent;box-shadow:none;transition:all .2s ease-in-out}html:not([data-scroll="0"]) .header[data-v-4dabaaf4]{background-color:var(--background-primary);box-shadow:0 4px 43px rgba(0,0,0,.1)}.content[data-v-4dabaaf4]{display:flex;align-items:center;justify-content:space-between;padding:25px;max-width:1512px;margin:auto}.logo-link[data-v-4dabaaf4]{text-decoration:none}.details[data-v-4dabaaf4]{display:flex}.logo[data-v-4dabaaf4]{margin-right:16px}.details-text[data-v-4dabaaf4]{display:flex;flex-direction:column;justify-content:center}.name[data-v-4dabaaf4]{font-size:24px;line-height:28px;color:var(--accent-primary)}.name[data-v-4dabaaf4],.tagline[data-v-4dabaaf4]{font-weight:700;text-shadow:0 4px 4px rgba(0,0,0,.05)}.tagline[data-v-4dabaaf4]{font-size:14px;line-height:17px;opacity:.8;color:var(--content-primary)}html[data-theme=dark] .tagline[data-v-4dabaaf4]{opacity:.9}.menu-link[data-v-4dabaaf4]{position:relative;font-style:normal;font-weight:700;font-size:18px;line-height:22px;color:var(--accent-menu);margin-left:48px;text-decoration:none;transition:all .3s ease}.menu-link[data-v-4dabaaf4]:hover{color:var(--accent-primary)}.menu-link[data-v-4dabaaf4]:after{content:"";position:absolute;display:block;width:100%;height:2px;bottom:-3px;left:0;background-color:var(--accent-secondary);transform:scaleX(0);opacity:0;transition:all .3s ease}.menu-link[data-v-4dabaaf4]:hover:after{transform:scaleX(1);opacity:1;background-color:var(--accent-primary)}.open-mobile-menu[data-v-4dabaaf4]{display:none}.mobile-menu[data-v-4dabaaf4]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:var(--background-semitransparent);z-index:1000;box-shadow:0 3px 18px rgba(0,0,0,.1);display:flex;flex-direction:column;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);perspective:1000px}.menu-divider[data-v-4dabaaf4]{opacity:.05;border-bottom:2px solid #2e4364;margin-right:32px;margin-left:32px}.fade-enter-active[data-v-4dabaaf4],.fade-leave-active[data-v-4dabaaf4]{transition:opacity .5s}.fade-enter[data-v-4dabaaf4],.fade-leave-to[data-v-4dabaaf4]{opacity:0;-webkit-backdrop-filter:blur(0);backdrop-filter:blur(0)}@media (max-width:992px){.name[data-v-4dabaaf4]{font-size:14px;line-height:17px}.tagline[data-v-4dabaaf4]{display:none}.details-text[data-v-4dabaaf4]{opacity:0;transition:opacity .2s ease-in-out}html:not([data-scroll="0"]) .details-text[data-v-4dabaaf4]{opacity:1}.content[data-v-4dabaaf4]{padding:14px}.extended-menu[data-v-4dabaaf4]{display:none}.open-mobile-menu[data-v-4dabaaf4]{display:block;margin-right:4px;filter:drop-shadow(0 4px 16px rgba(0,0,0,.25))}.menu-link[data-v-4dabaaf4]{text-align:center;margin-left:0;margin-top:18px;margin-bottom:18px;-webkit-animation:slide-in-bck-center-data-v-4dabaaf4 .7s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-bck-center-data-v-4dabaaf4 .7s cubic-bezier(.25,.46,.45,.94) both}.mobile-menu-links[data-v-4dabaaf4]{display:flex;flex-direction:column;justify-content:center;flex:1}.mobile-menu-label[data-v-4dabaaf4]{text-align:center;font-size:12px;margin-bottom:100px}}@-webkit-keyframes slide-in-bck-center-data-v-4dabaaf4{0%{transform:translateZ(600px);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes slide-in-bck-center-data-v-4dabaaf4{0%{transform:translateZ(600px);opacity:0}to{transform:translateZ(0);opacity:1}}.container[data-v-66baf38d]{position:relative;width:46px;height:46px}.f[data-v-66baf38d],.t[data-v-66baf38d]{position:absolute}.t[data-v-66baf38d]{left:-3px;top:-1px}@media (max-width:992px){.container[data-v-66baf38d],.f[data-v-66baf38d],.t[data-v-66baf38d]{height:32px;width:32px}.t[data-v-66baf38d]{left:-1px;top:0}}.post-title[data-v-4240d724]{font-style:normal;font-weight:700;font-size:36px;line-height:44px;color:var(--content-primary);margin-top:0;margin-bottom:6px}.post-details[data-v-4240d724]{font-size:14px;line-height:17px;color:var(--content-secondary);margin-bottom:34px}.post-footer[data-v-4240d724]{margin-top:28px}.short-page-container{max-width:700px;margin-right:auto;margin-left:auto;margin-top:30px;padding:28px}.short-page-title{margin-bottom:50px;margin-left:-8px}@media (max-width:992px){.short-page-container{margin-top:10px}}.post-footer-container[data-v-63505c64]{font-size:18px;line-height:22px;border-top:1px solid var(--details);padding-top:28px;display:flex}.post-footer-image[data-v-63505c64]{height:138px;width:138px}.post-footer-content[data-v-63505c64]{margin-left:28px}.post-footer-content p[data-v-63505c64]:first-child{margin-top:0}.red[data-v-63505c64]{color:var(--accent-primary)}.blue[data-v-63505c64],.red[data-v-63505c64]{font-weight:700}.blue[data-v-63505c64]{color:var(--accent-secondary)}a[data-v-63505c64]{text-underline-offset:2px;text-decoration-thickness:2px}@media (max-width:992px){.post-footer-container[data-v-63505c64]{align-items:center;flex-direction:column}.post-footer-content[data-v-63505c64]{margin-left:0;margin-top:28px}}.footer-container[data-v-31194f02]{font-size:14px;line-height:17px;text-align:center;color:var(--accent-menu);margin-top:40px;padding-right:16px;padding-left:16px}.bold[data-v-31194f02]{font-weight:700}.red[data-v-31194f02]{color:var(--accent-primary)}.social-bar-container{position:fixed;left:24px;bottom:24px;background:var(--background-elevated);border:1px solid var(--details);box-sizing:border-box;box-shadow:0 3px 8px 2px rgba(0,0,0,.1);border-radius:4px;display:flex;justify-content:space-evenly;width:360px;padding-top:10px;padding-bottom:10px;transition:all .3s ease}html[data-scrolled-to-bottom=true] .social-bar-container{opacity:0;transform:translateY(100px)}.social-bar-container a{display:flex;align-items:center;filter:drop-shadow(0 4px 6px rgba(0,0,0,.25));transition:all .3s ease}.social-bar-container a:hover{transform:scale(1.2) translateY(-3px)}.social-bar-container a path{stroke:var(--accent-primary)}.social-bar-divider{border-left:1px solid var(--details)}@media (max-width:992px){.social-bar-container{left:0;right:0;bottom:0;width:100%;border-radius:0}}</style><link rel="preload" href="/_nuxt/static/1661088011/blog/understanding-strings-in-rust/state.js" as="script"><link rel="preload" href="/_nuxt/static/1661088011/blog/understanding-strings-in-rust/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1661088011/manifest.js" as="script">
    <script>const debounce=t=>{let c;return(...e)=>{c&&cancelAnimationFrame(c),c=requestAnimationFrame(()=>{t(...e)})}},handleScroll=()=>{document.documentElement.dataset.scroll=window.scrollY,document.documentElement.dataset.scrolledToBottom=window.innerHeight+window.scrollY>=document.body?.offsetHeight?"true":"false"};function switchTheme(e){"dark"===e?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}document.addEventListener("scroll",debounce(handleScroll),{passive:!0}),handleScroll();const prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)");prefersDarkScheme.matches&&switchTheme("dark"),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>e.matches?switchTheme("dark"):switchTheme("light"))</script>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="main-layout-container"><div class="container" data-v-71b3c000><div class="blurred red animate" data-v-71b3c000></div> <div class="blurred yellow animate" data-v-71b3c000></div> <div class="blurred blue animate" data-v-71b3c000></div></div> <div id="header" class="header" data-v-4dabaaf4><div class="content" data-v-4dabaaf4><a href="/" class="logo-link nuxt-link-active" data-v-4dabaaf4><div class="details" data-v-4dabaaf4><div class="container logo" data-v-66baf38d data-v-4dabaaf4><svg width="51" height="47" viewBox="0 0 51 47" fill="none" xmlns="http://www.w3.org/2000/svg" class="f" data-v-66baf38d data-v-66baf38d><g filter="url(#filter0_d_15_34)" data-v-66baf38d data-v-66baf38d><path d="M2.09039 44.1666V2H48L2.09039 44.1666Z" fill="#C84C32" data-v-66baf38d data-v-66baf38d></path></g><defs data-v-66baf38d data-v-66baf38d><filter id="filter0_d_15_34" x="0.0543151" y="0.506876" width="49.9818" height="46.2388" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-66baf38d data-v-66baf38d><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-66baf38d data-v-66baf38d></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" data-v-66baf38d data-v-66baf38d></feColorMatrix><feOffset dy="0.542954" data-v-66baf38d data-v-66baf38d></feOffset><feGaussianBlur stdDeviation="1.01804" data-v-66baf38d data-v-66baf38d></feGaussianBlur><feComposite in2="hardAlpha" operator="out" data-v-66baf38d data-v-66baf38d></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" data-v-66baf38d data-v-66baf38d></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_15_34" data-v-66baf38d data-v-66baf38d></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_15_34" result="shape" data-v-66baf38d data-v-66baf38d></feBlend></filter></defs></svg> <svg width="53" height="49" viewBox="0 0 53 49" fill="none" xmlns="http://www.w3.org/2000/svg" class="t" data-v-66baf38d data-v-66baf38d><g filter="url(#filter0_d_15_35)" data-v-66baf38d data-v-66baf38d><path d="M28.0452 45.0836L5 3H51L28.0452 45.0836Z" fill="url(#paint0_linear_15_35)" data-v-66baf38d data-v-66baf38d></path></g><defs data-v-66baf38d data-v-66baf38d><filter id="filter0_d_15_35" x="0.656367" y="0.556706" width="51.9725" height="48.0561" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-66baf38d data-v-66baf38d><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-66baf38d data-v-66baf38d></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" data-v-66baf38d data-v-66baf38d></feColorMatrix><feOffset dx="-1.35739" dy="0.542954" data-v-66baf38d data-v-66baf38d></feOffset><feGaussianBlur stdDeviation="1.49312" data-v-66baf38d data-v-66baf38d></feGaussianBlur><feComposite in2="hardAlpha" operator="out" data-v-66baf38d data-v-66baf38d></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0" data-v-66baf38d data-v-66baf38d></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_15_35" data-v-66baf38d data-v-66baf38d></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_15_35" result="shape" data-v-66baf38d data-v-66baf38d></feBlend></filter><linearGradient id="paint0_linear_15_35" x1="28" y1="3" x2="28" y2="45.0836" gradientUnits="userSpaceOnUse" data-v-66baf38d data-v-66baf38d><stop stop-color="#ECDBBA" stop-opacity="0.49" data-v-66baf38d data-v-66baf38d></stop><stop offset="1" stop-color="#ECDBBA" data-v-66baf38d data-v-66baf38d></stop></linearGradient></defs></svg></div> <div class="details-text" data-v-4dabaaf4><span class="name" data-v-4dabaaf4>Federico Terzi</span> <span class="tagline" data-v-4dabaaf4>A Software Engineering Journey</span></div></div></a> <div class="extended-menu" data-v-4dabaaf4><a href="/#about" class="menu-link" data-v-4dabaaf4>About</a><a href="/projects" class="menu-link" data-v-4dabaaf4>Projects</a><a href="/blog" class="menu-link nuxt-link-active" data-v-4dabaaf4>Blog</a><a href="/contact-me" class="menu-link" data-v-4dabaaf4>Contact me</a></div> <div class="open-mobile-menu" data-v-4dabaaf4><svg width="26" height="18" viewBox="0 0 26 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="menu-icon" data-v-4dabaaf4 data-v-4dabaaf4><path d="M2 9.25H23.75" stroke="#C84C32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" data-v-4dabaaf4 data-v-4dabaaf4></path><path d="M2 2H23.75" stroke="#C84C32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" data-v-4dabaaf4 data-v-4dabaaf4></path><path d="M2 16.5H23.75" stroke="#C84C32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" data-v-4dabaaf4 data-v-4dabaaf4></path></svg></div> <!----></div></div> <div class="main-layout-content"><article data-v-4240d724><div class="short-page-container" data-v-4240d724><!----> <h1 class="post-title" data-v-4240d724>Understanding Strings in Rust</h1> <p class="post-details" data-v-4240d724>
      January 1, 2021 - by Federico Terzi
    </p> <div class="post-content" data-v-4240d724><div class="nuxt-content" data-v-4240d724><p data-v-4240d724>When I started learning Rust a couple of years ago, the first thing that really got me thinking was strings. You see, in Rust, there are 2 string types: the <code data-v-4240d724>String</code> and the <code data-v-4240d724>&str</code> types.</p>

<p data-v-4240d724>As you go on with examples and tutorials, you see that both of them are thoroughly used, so my natural question was: when should I use one over the other?</p>
<p data-v-4240d724>In this article, we are going to explore the differences between the two, but first, we will need to discuss the way strings are kept in memory.</p>
<h2 id="memory-model" data-v-4240d724><a href="#memory-model" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Memory model</h2>
<p data-v-4240d724>Let's first start with a basic example (don’t pay attention to the language itself, the following considerations apply to Python, Go, Java, and many others). We want to create a string surrounded by spaces, such as:</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724>var s <span class="token operator" data-v-4240d724>=</span> <span class="token string" data-v-4240d724>" hello "</span>
</code></pre></div>
<p data-v-4240d724>From a memory standpoint, the situation is characterized by 2 memory entities:</p>
<ul data-v-4240d724>
<li data-v-4240d724>A memory region in the heap containing the actual string content</li>
<li data-v-4240d724>A string record on the stack containing the memory location of the first element in the heap (and generally, its length)</li>
</ul>
<p data-v-4240d724><img alt="Memory model" src="/posts/string1.JPEG" data-v-4240d724></p>
<p data-v-4240d724>Looking at our example, we can say that <code data-v-4240d724>s</code> does not contain the actual string content, but instead, it is simply a reference to the memory region containing the content.</p>
<p data-v-4240d724>This is in contrast with the other basic data types such as integers, for which their value is usually stored on the stack, due to their fixed size.</p>
<p data-v-4240d724>Let's say that we want to apply the <code data-v-4240d724>trim</code> operation to the string (or <code data-v-4240d724>strip()</code> in Python) to obtain its content, but without the surrounding spaces. We could do:</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724>var s <span class="token operator" data-v-4240d724>=</span> <span class="token string" data-v-4240d724>" hello "</span>
var t <span class="token operator" data-v-4240d724>=</span> s<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>trim</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span>
</code></pre></div>
<p data-v-4240d724>In this case, the variable <code data-v-4240d724>t</code> will hold the value <code data-v-4240d724>"hello"</code>, without any surrounding space.</p>
<p data-v-4240d724>In most garbage collected languages that operation causes a separate string being created, so you end-up with two memory blocks on the heap:</p>
<p data-v-4240d724><img alt="Memory model" src="/posts/string2.JPEG" data-v-4240d724></p>
<p data-v-4240d724>This is where Rust magic happens. If we assume that neither <code data-v-4240d724>T</code> nor <code data-v-4240d724>S</code> will be modified (they are immutable), we can optimize the previous operation by simply creating another string record having the start index at the second cell of <code data-v-4240d724>S</code> and having a length of 5 instead of 7.</p>
<p data-v-4240d724><img alt="Memory model" src="/posts/string3.JPEG" data-v-4240d724></p>
<p data-v-4240d724>From the user perspective, T will be a string with length 5 and with content "hello",  but no additional allocation will be necessary, greatly improving memory efficiency.</p>
<p data-v-4240d724>In Rust, what we called "string record" is referred to as <code data-v-4240d724>&str</code> type, and represents a reference to a contiguous char array, along with its length. Technically, this is called a reference to a string slice.</p>
<p data-v-4240d724>Of course, this technique cannot be applied to every situation. For example, if we call the <code data-v-4240d724>to_uppercase()</code> method, the resulting string will not be a different view of the same string, but instead, it will be an entirely different one. In this case, an additional allocation will be needed.</p>
<p data-v-4240d724>The powerful aspect of &str types is that the location of the string content can vary based on the situation. It can reference a memory region on the heap, a location on the stack, or even a static portion of the executable itself.</p>
<h3 id="string-literals" data-v-4240d724><a href="#string-literals" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>String literals</h3>
<p data-v-4240d724>One thing that often confuses beginners are string literals. In particular, when you write the following code in Rust:</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token keyword" data-v-4240d724>let</span> str1 <span class="token operator" data-v-4240d724>=</span> <span class="token string" data-v-4240d724>"hello"</span>
</code></pre></div>
<p data-v-4240d724>you are not allocating a string in the heap. Instead,  you're creating an immutable string literal, whose content is stored inside the binary itself. This is possible because its content is known at compile-time, which, on the other hand, is not the case with the following:</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token keyword" data-v-4240d724>let</span> i <span class="token operator" data-v-4240d724>=</span> <span class="token number" data-v-4240d724>10</span>
<span class="token keyword" data-v-4240d724>let</span> str2 <span class="token operator" data-v-4240d724>=</span> i<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>to_string</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span>
</code></pre></div>
<p data-v-4240d724>In this case, the string content is not known at compile-time, so it causes an allocation on the heap, creating the string “10”.</p>
<p data-v-4240d724>If we now analyze the type of the two previous variables, we notice that <code data-v-4240d724>str1</code> is of type <code data-v-4240d724>&str</code> and <code data-v-4240d724>str2</code> is of type <code data-v-4240d724>String</code>. This is because the first string does not allocate any memory on the heap, whereas the second one does. As a rule of thumb,  anytime you allocate new memory you will need to use the String type, whereas if you only need a different view of an existing string, the &str type will be more adequate.</p>
<p data-v-4240d724>Technically, the <code data-v-4240d724>String</code> type is an <em data-v-4240d724>owned</em> type, whereas the <code data-v-4240d724>&str</code> type is not. To really understand the difference between the two, you will need to grasp the concepts of ownership and borrowing. If you need some help, <a href="https://www.youtube.com/watch?v=N2SgcDO0QL4" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>I made a video</a> on the topic a few months ago.</p>
<p data-v-4240d724>In a nutshell, when you allocate some memory on the heap, there must be a way to free it when not used anymore, otherwise, you’ll produce a memory leak. In Java or Go, that’s the responsibility of the garbage collector, but in Rust, the ownership system takes care of freeing the memory once the owner goes out of scope.</p>
<h3 id="tips-for-beginners" data-v-4240d724><a href="#tips-for-beginners" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Tips for beginners</h3>
<p data-v-4240d724>Now that you know the basics, let me give you a couple of tips:</p>
<h4 id="convert-between-the-two" data-v-4240d724><a href="#convert-between-the-two" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Convert between the two</h4>
<p data-v-4240d724>You can easily convert between the two by using the <code data-v-4240d724>to_string()</code> method and the borrow operator (&), such as:</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token comment" data-v-4240d724>// Start from a string literal &str</span>
<span class="token keyword" data-v-4240d724>let</span> foo <span class="token operator" data-v-4240d724>=</span> <span class="token string" data-v-4240d724>"hello"</span>
<span class="token comment" data-v-4240d724>// Convert to a owned String</span>
<span class="token keyword" data-v-4240d724>let</span> bar <span class="token operator" data-v-4240d724>=</span> foo<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>to_string</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span>
<span class="token comment" data-v-4240d724>// Get the string literal &str of bar</span>
<span class="token keyword" data-v-4240d724>let</span> car <span class="token operator" data-v-4240d724>=</span> <span class="token operator" data-v-4240d724>&</span>bar
</code></pre></div>
<h4 id="strings-in-function-signatures" data-v-4240d724><a href="#strings-in-function-signatures" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Strings in function signatures</h4>
<p data-v-4240d724>When you are designing function signatures, keep in mind that generally, strings are passed as <code data-v-4240d724>&str</code> slices and returned as owned Strings, such as:</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>concatenate_strings</span><span class="token punctuation" data-v-4240d724>(</span>s1<span class="token punctuation" data-v-4240d724>:</span> <span class="token operator" data-v-4240d724>&</span><span class="token keyword" data-v-4240d724>str</span><span class="token punctuation" data-v-4240d724>,</span> s2<span class="token punctuation" data-v-4240d724>:</span> <span class="token operator" data-v-4240d724>&</span><span class="token keyword" data-v-4240d724>str</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>-></span> <span class="token class-name" data-v-4240d724>String</span> <span class="token punctuation" data-v-4240d724>{</span>
  <span class="token keyword" data-v-4240d724>return</span> <span class="token macro property" data-v-4240d724>format!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"{}{}"</span><span class="token punctuation" data-v-4240d724>,</span> s1<span class="token punctuation" data-v-4240d724>,</span> s2<span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<p data-v-4240d724>This prevents unnecessary copies when passing the parameters, but also guarantees that the output string will live long enough to be received by the calling code. Moreover, it allows the function to accept both string slices and owned Strings. Of course, there are many exceptions to this rule, but for most cases, and most importantly until you really understand ownership and borrowing, this approach will serve you well.</p>
<h3 id="conclusion" data-v-4240d724><a href="#conclusion" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Conclusion</h3>
<p data-v-4240d724>This was just a quick introduction to Rust strings, thank you for reading!</p>
<p data-v-4240d724>If you liked the article, follow me on <a href="https://www.youtube.com/c/FedericoTerzi" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Youtube</a> or <a href="https://twitter.com/terzi_federico" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Twitter</a>!</p></div></div> <div class="post-footer-container post-footer" data-v-63505c64 data-v-4240d724><img src="/_nuxt/img/profile-picture-small.40e71b2.png" alt="Federico Terzi Picture" class="post-footer-image" data-v-63505c64> <div class="post-footer-content" data-v-63505c64><p data-v-63505c64>Hi 👋, I’m <span class="red" data-v-63505c64>Federico</span>, thanks for reading!</p> <p data-v-63505c64>
      If you liked this article, make sure to follow me on
      <a href="https://twitter.com/terzi_federico" class="blue" data-v-63505c64>Twitter</a> to
      stay updated with the latest ones :)
    </p> <p data-v-63505c64>
      If you are into technical topics, you might also enjoy my
      <a href="https://www.youtube.com/c/FedericoTerzi" class="red" data-v-63505c64>YouTube</a>
      channel.
    </p></div></div></div></article></div> <div class="footer-container" data-v-31194f02><p data-v-31194f02><span class="bold" data-v-31194f02>Designed</span> and
    <span class="bold" data-v-31194f02>coded</span> with<span class="red" data-v-31194f02> ♥</span> by me.
    Copyright © Federico Terzi 2019-2022 - P.IVA 03864201201
  </p></div> <div class="social-bar-container"><a href="https://twitter.com/terzi_federico"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23 3.00005C22.0424 3.67552 20.9821 4.19216 19.86 4.53005C19.2577 3.83756 18.4573 3.34674 17.567 3.12397C16.6767 2.90121 15.7395 2.95724 14.8821 3.2845C14.0247 3.61176 13.2884 4.19445 12.773 4.95376C12.2575 5.71308 11.9877 6.61238 12 7.53005V8.53005C10.2426 8.57561 8.50127 8.18586 6.93101 7.39549C5.36074 6.60513 4.01032 5.43868 3 4.00005C3 4.00005 -1 13 8 17C5.94053 18.398 3.48716 19.099 1 19C10 24 21 19 21 7.50005C20.9991 7.2215 20.9723 6.94364 20.92 6.67005C21.9406 5.66354 22.6608 4.39276 23 3.00005V3.00005Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a> <div class="social-bar-divider"></div> <a href="https://github.com/federico-terzi/"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_31_53)"><path d="M16 21.9999V18.1299C16.0375 17.6531 15.9731 17.1737 15.811 16.7237C15.6489 16.2737 15.3929 15.8634 15.06 15.5199C18.2 15.1699 21.5 13.9799 21.5 8.51994C21.4997 7.12376 20.9627 5.78114 20 4.76994C20.4559 3.54844 20.4236 2.19829 19.91 0.999938C19.91 0.999938 18.73 0.649938 16 2.47994C13.708 1.85876 11.292 1.85876 9 2.47994C6.27 0.649938 5.09 0.999938 5.09 0.999938C4.57638 2.19829 4.54414 3.54844 5 4.76994C4.03013 5.78864 3.49252 7.1434 3.5 8.54994C3.5 13.9699 6.8 15.1599 9.94 15.5499C9.611 15.8899 9.35726 16.2953 9.19531 16.7399C9.03335 17.1844 8.96681 17.658 9 18.1299V21.9999M9 18.9999C4 20.4999 4 16.4999 2 15.9999L9 18.9999Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_31_53"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg></a> <div class="social-bar-divider"></div> <a href="https://www.linkedin.com/in/federico-terzi/"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 8C17.5913 8 19.1174 8.63214 20.2426 9.75736C21.3679 10.8826 22 12.4087 22 14V21H18V14C18 13.4696 17.7893 12.9609 17.4142 12.5858C17.0391 12.2107 16.5304 12 16 12C15.4696 12 14.9609 12.2107 14.5858 12.5858C14.2107 12.9609 14 13.4696 14 14V21H10V14C10 12.4087 10.6321 10.8826 11.7574 9.75736C12.8826 8.63214 14.4087 8 16 8V8Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6 9H2V21H6V9Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 6C5.10457 6 6 5.10457 6 4C6 2.89543 5.10457 2 4 2C2.89543 2 2 2.89543 2 4C2 5.10457 2.89543 6 4 6Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a> <div class="social-bar-divider"></div> <a href="https://www.youtube.com/c/FedericoTerzi"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.54 6.42C22.4212 5.94541 22.1793 5.51057 21.8387 5.15941C21.498 4.80824 21.0708 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.12001 4 3.40001 4.46C2.92925 4.59318 2.50198 4.84824 2.16135 5.19941C1.82072 5.55057 1.5788 5.98541 1.46001 6.46C1.14522 8.20556 0.991243 9.97631 1.00001 11.75C0.988786 13.537 1.14277 15.3213 1.46001 17.08C1.59097 17.5398 1.83831 17.9581 2.17815 18.2945C2.51799 18.6308 2.93883 18.8738 3.40001 19C5.12001 19.46 12 19.46 12 19.46C12 19.46 18.88 19.46 20.6 19C21.0708 18.8668 21.498 18.6118 21.8387 18.2606C22.1793 17.9094 22.4212 17.4746 22.54 17C22.8524 15.2676 23.0063 13.5103 23 11.75C23.0112 9.96295 22.8572 8.1787 22.54 6.42V6.42Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.75 15.02L15.5 11.75L9.75 8.47998V15.02Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div></div></div><script defer src="/_nuxt/static/1661088011/blog/understanding-strings-in-rust/state.js"></script><script src="/_nuxt/ed2850d.js" defer></script><script src="/_nuxt/9c764e2.js" defer></script><script src="/_nuxt/9f592cb.js" defer></script><script src="/_nuxt/55fe2d7.js" defer></script><script src="/_nuxt/97a8332.js" defer></script>
  </body>
</html>
