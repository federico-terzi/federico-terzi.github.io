<!doctype html>
<!-- 
  Hi there! Welcome to my website :)
  It seems you are interested in the source code, did you
  know that the website is open-source? See:
  https://github.com/federico-terzi/federico-terzi.github.io
-->
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>12 Rust Tips and Tricks you might not know yet - Federico Terzi - A Software Engineering Journey</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="title" name="title" content="Federico Terzi - A Software Engineering Journey"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><meta data-n-head="ssr" data-hid="description" name="description" content="Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as Espanso) and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it."><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="12 Rust Tips and Tricks you might not know yet"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as Espanso) and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it."><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://federicoterzi.com/social/2022-01-04-12-rust-tips-and-tricks-you-might-not-know-yet.png"><meta data-n-head="ssr" name="twitter:card" content="summary"><meta data-n-head="ssr" name="twitter:site" content="@terzi_federico"><meta data-n-head="ssr" name="twitter:title" content="12 Rust Tips and Tricks you might not know yet"><meta data-n-head="ssr" name="twitter:description" content="Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as Espanso) and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it."><meta data-n-head="ssr" name="twitter:image" content="https://federicoterzi.com/social/2022-01-04-12-rust-tips-and-tricks-you-might-not-know-yet.png"><link data-n-head="ssr" rel="stylesheet" href="/colors.css"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"><link data-n-head="ssr" rel="manifest" href="/site.webmanifest"><link data-n-head="ssr" rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"><link data-n-head="ssr" rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="preload" href="/_nuxt/e638994.js" as="script"><link rel="preload" href="/_nuxt/17ba505.js" as="script"><link rel="preload" href="/_nuxt/4293a24.js" as="script"><link rel="preload" href="/_nuxt/90cdebc.js" as="script"><link rel="preload" href="/_nuxt/a829c7d.js" as="script"><style data-vue-ssr-id="c3ae2b30:0 d75bdb94:0 fa7ff0ca:0 56b15182:0 7ab12987:0 68efd426:0 4c3275e1:0 476c9a84:0 0356ed00:0 fcd77316:0 44de9599:0 71a90360:0">@font-face{font-family:Inter;font-style:normal;font-weight:400;font-display:swap;src:url(/_nuxt/fonts/inter-v7-latin-regular.33e43c3.eot);src:local(""),url(/_nuxt/fonts/inter-v7-latin-regular.33e43c3.eot?#iefix) format("embedded-opentype"),url(/_nuxt/fonts/inter-v7-latin-regular.5e6a773.woff2) format("woff2"),url(/_nuxt/fonts/inter-v7-latin-regular.cefb4aa.woff) format("woff"),url(/_nuxt/fonts/inter-v7-latin-regular.0e67589.ttf) format("truetype"),url(/_nuxt/b8db5cf5416facf0c5ec4489d0ee9bbe.svg#Inter) format("svg")}@font-face{font-family:Inter;font-style:normal;font-weight:700;font-display:swap;src:url(/_nuxt/fonts/inter-v7-latin-700.129e115.eot);src:local(""),url(/_nuxt/fonts/inter-v7-latin-700.129e115.eot?#iefix) format("embedded-opentype"),url(/_nuxt/fonts/inter-v7-latin-700.c2ceaa0.woff2) format("woff2"),url(/_nuxt/fonts/inter-v7-latin-700.7f5a89b.woff) format("woff"),url(/_nuxt/fonts/inter-v7-latin-700.6bb53f6.ttf) format("truetype"),url(/_nuxt/0a85e1f2fd11f8afbfa155c7c5ec0a12.svg#Inter) format("svg")}@font-face{font-family:"PT Serif";font-style:normal;font-weight:400;font-display:swap;src:url(/_nuxt/fonts/pt-serif-v16-latin-regular.ef9b698.eot);src:local(""),url(/_nuxt/fonts/pt-serif-v16-latin-regular.ef9b698.eot?#iefix) format("embedded-opentype"),url(/_nuxt/fonts/pt-serif-v16-latin-regular.511cda7.woff2) format("woff2"),url(/_nuxt/fonts/pt-serif-v16-latin-regular.b4f2a8d.woff) format("woff"),url(/_nuxt/fonts/pt-serif-v16-latin-regular.1602721.ttf) format("truetype"),url(/_nuxt/2b24347634a541da72419674a1818855.svg#PTSerif) format("svg")}html{--content-primary:#1a1a1a;--content-primary-inverted:#fff;--accent-primary:#c84c32;--accent-secondary:#2e4364;--accent-tertiary:#ecdbba;--accent-menu:#2e4364;--background-primary:#fff;--background-elevated:#f1f1f1;--background-semitransparent:hsla(0,0%,100%,0.7);--details:rgba(26,26,26,0.1)}html[data-theme=dark]{--content-primary:#fff;--content-primary-inverted:#1a1a1a;--accent-primary:#ef6b50;--accent-secondary:#8bb8ff;--accent-tertiary:#ecdbba;--accent-menu:#fff;--background-primary:#000;--background-elevated:#343434;--background-semitransparent:rgba(0,0,0,0.7);--details:hsla(0,0%,100%,0.1)}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}body,html{font-family:Inter,sans-serif;color:var(--content-primary);background-color:transparent;margin:0;padding:0}*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.main-layout-container{max-width:1512px;margin:auto}.main-layout-content{padding-top:95px;min-height:100vh}@media (max-width:992px){.main-layout-content{padding-top:50px;max-width:100vw;overflow-x:hidden}}.container[data-v-71b3c000]{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;overflow:hidden;z-index:-10;background-color:var(--background-primary);transition:all .5s ease}.blurred[data-v-71b3c000]{filter:blur(50px);height:450px;width:450px}.animate[data-v-71b3c000]{-webkit-animation:rotate-center-data-v-71b3c000 120s linear infinite both;animation:rotate-center-data-v-71b3c000 120s linear infinite both}.red[data-v-71b3c000]{top:25vh;left:-10vw;background-color:var(--accent-primary)}.blue[data-v-71b3c000],.red[data-v-71b3c000]{position:absolute;opacity:.15}.blue[data-v-71b3c000]{top:0;right:-10vw;background-color:var(--accent-secondary)}.yellow[data-v-71b3c000]{position:absolute;top:75vh;left:40vw;background-color:var(--accent-tertiary);opacity:.4}html[data-theme=dark] .yellow[data-v-71b3c000]{opacity:.2}@media (max-width:992px){.blurred[data-v-71b3c000]{height:300px;width:300px}}@-webkit-keyframes rotate-center-data-v-71b3c000{0%{transform:rotate(0) translateX(0) translateY(0)}50%{transform:rotate(180deg) translateX(300px) translateY(300px)}to{transform:rotate(1turn) translateX(0) translateY(0)}}@keyframes rotate-center-data-v-71b3c000{0%{transform:rotate(0) translateX(0) translateY(0)}50%{transform:rotate(180deg) translateX(300px) translateY(300px)}to{transform:rotate(1turn) translateX(0) translateY(0)}}.header[data-v-47a7b6cf]{position:fixed;top:0;right:0;left:0;z-index:20;background-color:transparent;box-shadow:none;transition:all .2s ease-in-out}html:not([data-scroll="0"]) .header[data-v-47a7b6cf]{background-color:var(--background-primary);box-shadow:0 4px 43px rgba(0,0,0,.1)}.content[data-v-47a7b6cf]{display:flex;align-items:center;justify-content:space-between;padding:25px;max-width:1512px;margin:auto}.logo-link[data-v-47a7b6cf]{text-decoration:none}.details[data-v-47a7b6cf]{display:flex}.logo[data-v-47a7b6cf]{margin-right:16px}.details-text[data-v-47a7b6cf]{display:flex;flex-direction:column;justify-content:center}.name[data-v-47a7b6cf]{font-size:24px;line-height:28px;color:var(--accent-primary)}.name[data-v-47a7b6cf],.tagline[data-v-47a7b6cf]{font-weight:700;text-shadow:0 4px 4px rgba(0,0,0,.05)}.tagline[data-v-47a7b6cf]{font-size:14px;line-height:17px;opacity:.8;color:var(--content-primary)}html[data-theme=dark] .tagline[data-v-47a7b6cf]{opacity:.9}.menu-link[data-v-47a7b6cf]{position:relative;font-style:normal;font-weight:700;font-size:18px;line-height:22px;color:var(--accent-menu);margin-left:48px;text-decoration:none;transition:all .3s ease}.menu-link[data-v-47a7b6cf]:hover{color:var(--accent-primary)}.menu-link[data-v-47a7b6cf]:after{content:"";position:absolute;display:block;width:100%;height:2px;bottom:-3px;left:0;background-color:var(--accent-secondary);transform:scaleX(0);opacity:0;transition:all .3s ease}.menu-link[data-v-47a7b6cf]:hover:after{transform:scaleX(1);opacity:1;background-color:var(--accent-primary)}.open-mobile-menu[data-v-47a7b6cf]{display:none}.mobile-menu[data-v-47a7b6cf]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:var(--background-semitransparent);z-index:1000;box-shadow:0 3px 18px rgba(0,0,0,.1);display:flex;flex-direction:column;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);perspective:1000px}.menu-divider[data-v-47a7b6cf]{opacity:.05;border-bottom:2px solid #2e4364;margin-right:32px;margin-left:32px}.fade-enter-active[data-v-47a7b6cf],.fade-leave-active[data-v-47a7b6cf]{transition:opacity .5s}.fade-enter[data-v-47a7b6cf],.fade-leave-to[data-v-47a7b6cf]{opacity:0;-webkit-backdrop-filter:blur(0);backdrop-filter:blur(0)}@media (max-width:992px){.name[data-v-47a7b6cf]{font-size:14px;line-height:17px}.tagline[data-v-47a7b6cf]{display:none}.details-text[data-v-47a7b6cf]{opacity:0;transition:opacity .2s ease-in-out}html:not([data-scroll="0"]) .details-text[data-v-47a7b6cf]{opacity:1}.content[data-v-47a7b6cf]{padding:14px}.extended-menu[data-v-47a7b6cf]{display:none}.open-mobile-menu[data-v-47a7b6cf]{display:block;margin-right:4px;filter:drop-shadow(0 4px 16px rgba(0,0,0,.25))}.menu-link[data-v-47a7b6cf]{text-align:center;margin-left:0;margin-top:18px;margin-bottom:18px;-webkit-animation:slide-in-bck-center-data-v-47a7b6cf .7s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-bck-center-data-v-47a7b6cf .7s cubic-bezier(.25,.46,.45,.94) both}.mobile-menu-links[data-v-47a7b6cf]{display:flex;flex-direction:column;justify-content:center;flex:1}.mobile-menu-label[data-v-47a7b6cf]{text-align:center;font-size:12px;margin-bottom:100px}}@-webkit-keyframes slide-in-bck-center-data-v-47a7b6cf{0%{transform:translateZ(600px);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes slide-in-bck-center-data-v-47a7b6cf{0%{transform:translateZ(600px);opacity:0}to{transform:translateZ(0);opacity:1}}.container[data-v-66baf38d]{position:relative;width:46px;height:46px}.f[data-v-66baf38d],.t[data-v-66baf38d]{position:absolute}.t[data-v-66baf38d]{left:-3px;top:-1px}@media (max-width:992px){.container[data-v-66baf38d],.f[data-v-66baf38d],.t[data-v-66baf38d]{height:32px;width:32px}.t[data-v-66baf38d]{left:-1px;top:0}}.post-title[data-v-4240d724]{font-style:normal;font-weight:700;font-size:36px;line-height:44px;color:var(--content-primary);margin-top:0;margin-bottom:6px}.post-details[data-v-4240d724]{font-size:14px;line-height:17px;color:var(--content-secondary);margin-bottom:34px}.post-footer[data-v-4240d724]{margin-top:28px}.short-page-container{max-width:700px;margin-right:auto;margin-left:auto;margin-top:30px;padding:28px}.short-page-title{margin-bottom:50px;margin-left:-8px}@media (max-width:992px){.short-page-container{margin-top:10px}}.post-footer-container[data-v-63505c64]{font-size:18px;line-height:22px;border-top:1px solid var(--details);padding-top:28px;display:flex}.post-footer-image[data-v-63505c64]{height:138px;width:138px}.post-footer-content[data-v-63505c64]{margin-left:28px}.post-footer-content p[data-v-63505c64]:first-child{margin-top:0}.red[data-v-63505c64]{color:var(--accent-primary)}.blue[data-v-63505c64],.red[data-v-63505c64]{font-weight:700}.blue[data-v-63505c64]{color:var(--accent-secondary)}a[data-v-63505c64]{text-underline-offset:2px;text-decoration-thickness:2px}@media (max-width:992px){.post-footer-container[data-v-63505c64]{align-items:center;flex-direction:column}.post-footer-content[data-v-63505c64]{margin-left:0;margin-top:28px}}.footer-container[data-v-83760644]{font-size:14px;line-height:17px;text-align:center;color:var(--accent-menu);margin-top:40px;padding-right:16px;padding-left:16px}.bold[data-v-83760644]{font-weight:700}.red[data-v-83760644]{color:var(--accent-primary)}.social-bar-container{position:fixed;left:24px;bottom:24px;background:var(--background-elevated);border:1px solid var(--details);box-sizing:border-box;box-shadow:0 3px 8px 2px rgba(0,0,0,.1);border-radius:4px;display:flex;justify-content:space-evenly;width:360px;padding-top:10px;padding-bottom:10px;transition:all .3s ease}html[data-scrolled-to-bottom=true] .social-bar-container{opacity:0;transform:translateY(100px)}.social-bar-container a{display:flex;align-items:center;filter:drop-shadow(0 4px 6px rgba(0,0,0,.25));transition:all .3s ease}.social-bar-container a:hover{transform:scale(1.2) translateY(-3px)}.social-bar-container a path{stroke:var(--accent-primary)}.social-bar-divider{border-left:1px solid var(--details)}@media (max-width:992px){.social-bar-container{left:0;right:0;bottom:0;width:100%;border-radius:0}}</style><link rel="preload" href="/_nuxt/static/1705330835/blog/12-rust-tips-and-tricks-you-might-not-know-yet/state.js" as="script"><link rel="preload" href="/_nuxt/static/1705330835/blog/12-rust-tips-and-tricks-you-might-not-know-yet/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1705330835/manifest.js" as="script">
    <script>const debounce=t=>{let c;return(...e)=>{c&&cancelAnimationFrame(c),c=requestAnimationFrame(()=>{t(...e)})}},handleScroll=()=>{document.documentElement.dataset.scroll=window.scrollY,document.documentElement.dataset.scrolledToBottom=window.innerHeight+window.scrollY>=document.body?.offsetHeight?"true":"false"};function switchTheme(e){"dark"===e?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}document.addEventListener("scroll",debounce(handleScroll),{passive:!0}),handleScroll();const prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)");prefersDarkScheme.matches&&switchTheme("dark"),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>e.matches?switchTheme("dark"):switchTheme("light"))</script>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="main-layout-container"><div class="container" data-v-71b3c000><div class="blurred red animate" data-v-71b3c000></div> <div class="blurred yellow animate" data-v-71b3c000></div> <div class="blurred blue animate" data-v-71b3c000></div></div> <div id="header" class="header" data-v-47a7b6cf><div class="content" data-v-47a7b6cf><a href="/" class="logo-link nuxt-link-active" data-v-47a7b6cf><div class="details" data-v-47a7b6cf><div class="container logo" data-v-66baf38d data-v-47a7b6cf><svg width="51" height="47" viewBox="0 0 51 47" fill="none" xmlns="http://www.w3.org/2000/svg" class="f" data-v-66baf38d data-v-66baf38d><g filter="url(#filter0_d_15_34)" data-v-66baf38d data-v-66baf38d><path d="M2.09039 44.1666V2H48L2.09039 44.1666Z" fill="#C84C32" data-v-66baf38d data-v-66baf38d></path></g><defs data-v-66baf38d data-v-66baf38d><filter id="filter0_d_15_34" x="0.0543151" y="0.506876" width="49.9818" height="46.2388" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-66baf38d data-v-66baf38d><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-66baf38d data-v-66baf38d></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" data-v-66baf38d data-v-66baf38d></feColorMatrix><feOffset dy="0.542954" data-v-66baf38d data-v-66baf38d></feOffset><feGaussianBlur stdDeviation="1.01804" data-v-66baf38d data-v-66baf38d></feGaussianBlur><feComposite in2="hardAlpha" operator="out" data-v-66baf38d data-v-66baf38d></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" data-v-66baf38d data-v-66baf38d></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_15_34" data-v-66baf38d data-v-66baf38d></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_15_34" result="shape" data-v-66baf38d data-v-66baf38d></feBlend></filter></defs></svg> <svg width="53" height="49" viewBox="0 0 53 49" fill="none" xmlns="http://www.w3.org/2000/svg" class="t" data-v-66baf38d data-v-66baf38d><g filter="url(#filter0_d_15_35)" data-v-66baf38d data-v-66baf38d><path d="M28.0452 45.0836L5 3H51L28.0452 45.0836Z" fill="url(#paint0_linear_15_35)" data-v-66baf38d data-v-66baf38d></path></g><defs data-v-66baf38d data-v-66baf38d><filter id="filter0_d_15_35" x="0.656367" y="0.556706" width="51.9725" height="48.0561" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB" data-v-66baf38d data-v-66baf38d><feFlood flood-opacity="0" result="BackgroundImageFix" data-v-66baf38d data-v-66baf38d></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" data-v-66baf38d data-v-66baf38d></feColorMatrix><feOffset dx="-1.35739" dy="0.542954" data-v-66baf38d data-v-66baf38d></feOffset><feGaussianBlur stdDeviation="1.49312" data-v-66baf38d data-v-66baf38d></feGaussianBlur><feComposite in2="hardAlpha" operator="out" data-v-66baf38d data-v-66baf38d></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0" data-v-66baf38d data-v-66baf38d></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_15_35" data-v-66baf38d data-v-66baf38d></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_15_35" result="shape" data-v-66baf38d data-v-66baf38d></feBlend></filter><linearGradient id="paint0_linear_15_35" x1="28" y1="3" x2="28" y2="45.0836" gradientUnits="userSpaceOnUse" data-v-66baf38d data-v-66baf38d><stop stop-color="#ECDBBA" stop-opacity="0.49" data-v-66baf38d data-v-66baf38d></stop><stop offset="1" stop-color="#ECDBBA" data-v-66baf38d data-v-66baf38d></stop></linearGradient></defs></svg></div> <div class="details-text" data-v-47a7b6cf><span class="name" data-v-47a7b6cf>Federico Terzi</span> <span class="tagline" data-v-47a7b6cf>A Software Engineering Journey</span></div></div></a> <div class="extended-menu" data-v-47a7b6cf><a href="/#about" class="menu-link" data-v-47a7b6cf>About</a><a href="/projects" class="menu-link" data-v-47a7b6cf>Projects</a><a href="/blog" class="menu-link nuxt-link-active" data-v-47a7b6cf>Blog</a><a href="/talks" class="menu-link" data-v-47a7b6cf>Talks</a><a href="/contact-me" class="menu-link" data-v-47a7b6cf>Contact me</a></div> <div class="open-mobile-menu" data-v-47a7b6cf><svg width="26" height="18" viewBox="0 0 26 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="menu-icon" data-v-47a7b6cf data-v-47a7b6cf><path d="M2 9.25H23.75" stroke="#C84C32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" data-v-47a7b6cf data-v-47a7b6cf></path><path d="M2 2H23.75" stroke="#C84C32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" data-v-47a7b6cf data-v-47a7b6cf></path><path d="M2 16.5H23.75" stroke="#C84C32" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" data-v-47a7b6cf data-v-47a7b6cf></path></svg></div> <!----></div></div> <div class="main-layout-content"><article data-v-4240d724><div class="short-page-container" data-v-4240d724><!----> <h1 class="post-title" data-v-4240d724>12 Rust Tips and Tricks you might not know yet</h1> <p class="post-details" data-v-4240d724>
      January 4th, 2022 - by Federico Terzi
    </p> <div class="post-content" data-v-4240d724><div class="nuxt-content" data-v-4240d724><p data-v-4240d724>Rust is a great programming language: reliable, fast, enjoyable, but also rather complex. Over the past two years, I’ve been using it both professionally and on side projects (such as <a href="https://github.com/federico-terzi/espanso" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Espanso</a>) and, over that time, I stumbled upon many useful patterns and crates that I wish I knew when I first started learning it.</p>

<h2 id="using-cowstr-as-return-type" data-v-4240d724><a href="#using-cowstr-as-return-type" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Using Cow&lt;str> as return type</h2>
<p data-v-4240d724>Sometimes you need to write methods that accept a string slice (&str) and conditionally return either a modified version of it or the original one. For these cases, you might use <a href="https://doc.rust-lang.org/std/borrow/enum.Cow.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Cow&lt;str></a>, so that you only allocate new memory when necessary.</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token keyword" data-v-4240d724>use</span> <span class="token namespace" data-v-4240d724>std<span class="token punctuation" data-v-4240d724>::</span>borrow<span class="token punctuation" data-v-4240d724>::</span></span><span class="token class-name" data-v-4240d724>Cow</span><span class="token punctuation" data-v-4240d724>;</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>capitalize</span><span class="token punctuation" data-v-4240d724>(</span>name<span class="token punctuation" data-v-4240d724>:</span> <span class="token operator" data-v-4240d724>&</span><span class="token keyword" data-v-4240d724>str</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>-></span> <span class="token class-name" data-v-4240d724>Cow</span><span class="token operator" data-v-4240d724>&lt;</span><span class="token keyword" data-v-4240d724>str</span><span class="token operator" data-v-4240d724>></span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token keyword" data-v-4240d724>match</span> name<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>chars</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>nth</span><span class="token punctuation" data-v-4240d724>(</span><span class="token number" data-v-4240d724>0</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
        <span class="token class-name" data-v-4240d724>Some</span><span class="token punctuation" data-v-4240d724>(</span>first_char<span class="token punctuation" data-v-4240d724>)</span> <span class="token keyword" data-v-4240d724>if</span> first_char<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>is_uppercase</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token operator" data-v-4240d724>=></span> <span class="token punctuation" data-v-4240d724>{</span>
            <span class="token comment" data-v-4240d724>// No allocation is necessary, as the string</span>
            <span class="token comment" data-v-4240d724>// already starts with an uppercase char</span>
            <span class="token class-name" data-v-4240d724>Cow</span><span class="token punctuation" data-v-4240d724>::</span><span class="token class-name" data-v-4240d724>Borrowed</span><span class="token punctuation" data-v-4240d724>(</span>name<span class="token punctuation" data-v-4240d724>)</span>
        <span class="token punctuation" data-v-4240d724>}</span>
        <span class="token class-name" data-v-4240d724>Some</span><span class="token punctuation" data-v-4240d724>(</span>first_char<span class="token punctuation" data-v-4240d724>)</span> <span class="token operator" data-v-4240d724>=></span> <span class="token punctuation" data-v-4240d724>{</span>
            <span class="token comment" data-v-4240d724>// An allocation is necessary, as the old string</span>
            <span class="token comment" data-v-4240d724>// does not start with an uppercase char</span>
            <span class="token keyword" data-v-4240d724>let</span> new_string<span class="token punctuation" data-v-4240d724>:</span> <span class="token class-name" data-v-4240d724>String</span> <span class="token operator" data-v-4240d724>=</span> first_char<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>to_uppercase</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span>
              <span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>chain</span><span class="token punctuation" data-v-4240d724>(</span>name<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>chars</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>skip</span><span class="token punctuation" data-v-4240d724>(</span><span class="token number" data-v-4240d724>1</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span>
              <span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>collect</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
            
            <span class="token class-name" data-v-4240d724>Cow</span><span class="token punctuation" data-v-4240d724>::</span><span class="token class-name" data-v-4240d724>Owned</span><span class="token punctuation" data-v-4240d724>(</span>new_string<span class="token punctuation" data-v-4240d724>)</span>
        <span class="token punctuation" data-v-4240d724>}</span><span class="token punctuation" data-v-4240d724>,</span>
        <span class="token class-name" data-v-4240d724>None</span> <span class="token operator" data-v-4240d724>=></span> <span class="token class-name" data-v-4240d724>Cow</span><span class="token punctuation" data-v-4240d724>::</span><span class="token class-name" data-v-4240d724>Borrowed</span><span class="token punctuation" data-v-4240d724>(</span>name<span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>,</span>
    <span class="token punctuation" data-v-4240d724>}</span>
<span class="token punctuation" data-v-4240d724>}</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"{}"</span><span class="token punctuation" data-v-4240d724>,</span> <span class="token function" data-v-4240d724>capitalize</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"bob"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>   <span class="token comment" data-v-4240d724>// Allocation</span>
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"{}"</span><span class="token punctuation" data-v-4240d724>,</span> <span class="token function" data-v-4240d724>capitalize</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"John"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>  <span class="token comment" data-v-4240d724>// No allocation</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<h2 id="crossbeam-channels-instead-of-the-standard-ones" data-v-4240d724><a href="#crossbeam-channels-instead-of-the-standard-ones" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Crossbeam channels instead of the standard ones</h2>
<p data-v-4240d724>The <a href="https://github.com/crossbeam-rs/crossbeam" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>crossbeam crate</a> offers a powerful alternative to standard channels with support for the Select operation, timeouts, and more. Similar to what you get out of the box in Golang and traditional Unix sockets.</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token keyword" data-v-4240d724>use</span> <span class="token namespace" data-v-4240d724>crossbeam_channel<span class="token punctuation" data-v-4240d724>::</span></span><span class="token punctuation" data-v-4240d724>{</span>select<span class="token punctuation" data-v-4240d724>,</span> unbounded<span class="token punctuation" data-v-4240d724>}</span><span class="token punctuation" data-v-4240d724>;</span>
<span class="token keyword" data-v-4240d724>use</span> <span class="token namespace" data-v-4240d724>std<span class="token punctuation" data-v-4240d724>::</span>time<span class="token punctuation" data-v-4240d724>::</span></span><span class="token class-name" data-v-4240d724>Duration</span><span class="token punctuation" data-v-4240d724>;</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token keyword" data-v-4240d724>let</span> <span class="token punctuation" data-v-4240d724>(</span>s1<span class="token punctuation" data-v-4240d724>,</span> r1<span class="token punctuation" data-v-4240d724>)</span> <span class="token operator" data-v-4240d724>=</span> <span class="token function" data-v-4240d724>unbounded</span><span class="token punctuation" data-v-4240d724>::</span><span class="token operator" data-v-4240d724>&lt;</span><span class="token keyword" data-v-4240d724>i32</span><span class="token operator" data-v-4240d724>></span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    <span class="token keyword" data-v-4240d724>let</span> <span class="token punctuation" data-v-4240d724>(</span>s2<span class="token punctuation" data-v-4240d724>,</span> r2<span class="token punctuation" data-v-4240d724>)</span> <span class="token operator" data-v-4240d724>=</span> <span class="token function" data-v-4240d724>unbounded</span><span class="token punctuation" data-v-4240d724>::</span><span class="token operator" data-v-4240d724>&lt;</span><span class="token keyword" data-v-4240d724>i32</span><span class="token operator" data-v-4240d724>></span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    s1<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>send</span><span class="token punctuation" data-v-4240d724>(</span><span class="token number" data-v-4240d724>10</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>unwrap</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>

    <span class="token macro property" data-v-4240d724>select!</span> <span class="token punctuation" data-v-4240d724>{</span>
        <span class="token function" data-v-4240d724>recv</span><span class="token punctuation" data-v-4240d724>(</span>r1<span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>-></span> msg <span class="token operator" data-v-4240d724>=></span> <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"r1 > {}"</span><span class="token punctuation" data-v-4240d724>,</span> msg<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>unwrap</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>,</span>
        <span class="token function" data-v-4240d724>recv</span><span class="token punctuation" data-v-4240d724>(</span>r2<span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>-></span> msg <span class="token operator" data-v-4240d724>=></span> <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"r2 > {}"</span><span class="token punctuation" data-v-4240d724>,</span> msg<span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>unwrap</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>,</span>
        <span class="token function" data-v-4240d724>default</span><span class="token punctuation" data-v-4240d724>(</span><span class="token class-name" data-v-4240d724>Duration</span><span class="token punctuation" data-v-4240d724>::</span><span class="token function" data-v-4240d724>from_millis</span><span class="token punctuation" data-v-4240d724>(</span><span class="token number" data-v-4240d724>100</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token operator" data-v-4240d724>=></span> <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"timed out"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>,</span>
    <span class="token punctuation" data-v-4240d724>}</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<h2 id="golang-like-defer-operator-with-scopeguard" data-v-4240d724><a href="#golang-like-defer-operator-with-scopeguard" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Golang-like defer operator with Scopeguard</h2>
<p data-v-4240d724>If you are coming from Golang, you might miss the "defer" operator for certain use-cases (like freeing memory when working with raw pointers or closing a socket).</p>
<p data-v-4240d724>In Rust (besides the RAII pattern), you can use the <a href="https://docs.rs/scopeguard/latest/scopeguard/" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>scopeguard</a> crate to easily implement "cleaup" logic.</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token attribute attr-name" data-v-4240d724>#[macro_use(defer)]</span> <span class="token keyword" data-v-4240d724>extern</span> <span class="token keyword" data-v-4240d724>crate</span> <span class="token module-declaration namespace" data-v-4240d724>scopeguard</span><span class="token punctuation" data-v-4240d724>;</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"start"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    <span class="token punctuation" data-v-4240d724>{</span>
        <span class="token comment" data-v-4240d724>// This action will run at the end of the current scope</span>
        <span class="token macro property" data-v-4240d724>defer!</span> <span class="token punctuation" data-v-4240d724>{</span>
           <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"defer"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
        <span class="token punctuation" data-v-4240d724>}</span>

        <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"scope end"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    <span class="token punctuation" data-v-4240d724>}</span>
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"end"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token comment" data-v-4240d724>// Output:</span>
    <span class="token comment" data-v-4240d724>// start</span>
    <span class="token comment" data-v-4240d724>// scope end</span>
    <span class="token comment" data-v-4240d724>// defer</span>
    <span class="token comment" data-v-4240d724>// end</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<h2 id="cargo-make-for-packaging" data-v-4240d724><a href="#cargo-make-for-packaging" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Cargo-make for packaging</h2>
<p data-v-4240d724><a href="https://doc.rust-lang.org/cargo/reference/build-scripts.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Build scripts</a> are great for a lot of things, but usually not for packaging. My favorite solution for that is <a href="https://github.com/sagiegurari/cargo-make" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Cargo Make</a> by <a href="https://sagiegurari.github.io/" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>sagiegurari</a>, a Rust-based task runner and build tool.</p>
<h2 id="customize-and-chain-panic-handlers" data-v-4240d724><a href="#customize-and-chain-panic-handlers" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Customize and chain Panic handlers</h2>
<p data-v-4240d724><a href="https://doc.rust-lang.org/std/panic/fn.set_hook.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Panic handlers (called hooks)</a> can be overridden and chained, which becomes particularly useful when setting up custom error reporting and logging for your application.</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token keyword" data-v-4240d724>use</span> <span class="token namespace" data-v-4240d724>std<span class="token punctuation" data-v-4240d724>::</span>panic<span class="token punctuation" data-v-4240d724>::</span></span><span class="token punctuation" data-v-4240d724>{</span>set_hook<span class="token punctuation" data-v-4240d724>,</span> take_hook<span class="token punctuation" data-v-4240d724>}</span><span class="token punctuation" data-v-4240d724>;</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token keyword" data-v-4240d724>let</span> prev_hook <span class="token operator" data-v-4240d724>=</span> <span class="token function" data-v-4240d724>take_hook</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token function" data-v-4240d724>set_hook</span><span class="token punctuation" data-v-4240d724>(</span><span class="token class-name" data-v-4240d724>Box</span><span class="token punctuation" data-v-4240d724>::</span><span class="token function" data-v-4240d724>new</span><span class="token punctuation" data-v-4240d724>(</span><span class="token keyword" data-v-4240d724>move</span> <span class="token closure-params" data-v-4240d724><span class="token closure-punctuation punctuation" data-v-4240d724>|</span>panic<span class="token closure-punctuation punctuation" data-v-4240d724>|</span></span> <span class="token punctuation" data-v-4240d724>{</span>
        <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"custom logging logic {}"</span><span class="token punctuation" data-v-4240d724>,</span> panic<span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
        
        <span class="token function" data-v-4240d724>prev_hook</span><span class="token punctuation" data-v-4240d724>(</span>panic<span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>    
    <span class="token punctuation" data-v-4240d724>}</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token keyword" data-v-4240d724>let</span> prev_hook <span class="token operator" data-v-4240d724>=</span> <span class="token function" data-v-4240d724>take_hook</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token function" data-v-4240d724>set_hook</span><span class="token punctuation" data-v-4240d724>(</span><span class="token class-name" data-v-4240d724>Box</span><span class="token punctuation" data-v-4240d724>::</span><span class="token function" data-v-4240d724>new</span><span class="token punctuation" data-v-4240d724>(</span><span class="token keyword" data-v-4240d724>move</span> <span class="token closure-params" data-v-4240d724><span class="token closure-punctuation punctuation" data-v-4240d724>|</span>panic<span class="token closure-punctuation punctuation" data-v-4240d724>|</span></span> <span class="token punctuation" data-v-4240d724>{</span>
        <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"custom error reporting logic {}"</span><span class="token punctuation" data-v-4240d724>,</span> panic<span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
        
        <span class="token function" data-v-4240d724>prev_hook</span><span class="token punctuation" data-v-4240d724>(</span>panic<span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>    
    <span class="token punctuation" data-v-4240d724>}</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token macro property" data-v-4240d724>panic!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"test"</span><span class="token punctuation" data-v-4240d724>)</span>
    
    <span class="token comment" data-v-4240d724>// Output:</span>
    <span class="token comment" data-v-4240d724>// custom error reporting logic panicked at 'test', src/main.rs:20:5</span>
    <span class="token comment" data-v-4240d724>// custom logging logic panicked at 'test', src/main.rs:20:5</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<h2 id="use-rust-analyzer-on-vscode" data-v-4240d724><a href="#use-rust-analyzer-on-vscode" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Use Rust Analyzer on VSCode</h2>
<p data-v-4240d724>The <a href="https://marketplace.visualstudio.com/items?itemName=matklad.rust-analyzer" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Rust analyzer</a> VSCode extension by <a href="https://matklad.github.io/" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>matklad</a> is significantly better than the “official” Rust one. Unfortunately, it’s still showing as a second result on the extensions marketplace, misguiding a lot of beginners.</p>
<p data-v-4240d724><img alt="Rust Analyzer extension" src="/posts/rustanalyzer.png" data-v-4240d724></p>
<h2 id="use-impl-trait-when-working-with-closures" data-v-4240d724><a href="#use-impl-trait-when-working-with-closures" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Use impl Trait when working with Closures</h2>
<p data-v-4240d724>Prefer impl Fn/FnOnce/FnMut to pass a closure to a function (called impl Trait) instead of a generic when possible to keep the signature clean. For non-trivial cases, you might need to box the closure with Box&lt;Fn()>, but keep in mind you’ll pay an additional overhead.</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token comment" data-v-4240d724>// Instead of this</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>setup_teardown_generic</span><span class="token operator" data-v-4240d724>&lt;</span><span class="token class-name" data-v-4240d724>A</span><span class="token punctuation" data-v-4240d724>:</span> <span class="token class-name" data-v-4240d724>FnOnce</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token operator" data-v-4240d724>></span><span class="token punctuation" data-v-4240d724>(</span>action<span class="token punctuation" data-v-4240d724>:</span> <span class="token class-name" data-v-4240d724>A</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"setting up..."</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token function" data-v-4240d724>action</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"tearing down..."</span><span class="token punctuation" data-v-4240d724>)</span>
<span class="token punctuation" data-v-4240d724>}</span>

<span class="token comment" data-v-4240d724>// Use this</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>setup_teardown</span><span class="token punctuation" data-v-4240d724>(</span>action<span class="token punctuation" data-v-4240d724>:</span> <span class="token keyword" data-v-4240d724>impl</span> <span class="token class-name" data-v-4240d724>FnOnce</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"setting up..."</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token function" data-v-4240d724>action</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"tearing down..."</span><span class="token punctuation" data-v-4240d724>)</span>
<span class="token punctuation" data-v-4240d724>}</span>

<span class="token comment" data-v-4240d724>// As a note, this pattern is very useful inside tests</span>
<span class="token comment" data-v-4240d724>// to create/destroy resources.</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token function" data-v-4240d724>setup_teardown</span><span class="token punctuation" data-v-4240d724>(</span><span class="token closure-params" data-v-4240d724><span class="token closure-punctuation punctuation" data-v-4240d724>|</span><span class="token closure-punctuation punctuation" data-v-4240d724>|</span></span> <span class="token punctuation" data-v-4240d724>{</span>
        <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"Action!"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
    <span class="token punctuation" data-v-4240d724>}</span><span class="token punctuation" data-v-4240d724>)</span>
    
    <span class="token comment" data-v-4240d724>// Output:</span>
    <span class="token comment" data-v-4240d724>// setting up...</span>
    <span class="token comment" data-v-4240d724>// Action!</span>
    <span class="token comment" data-v-4240d724>// tearing down...</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<h2 id="enable-clippy-on-save-for-vscode" data-v-4240d724><a href="#enable-clippy-on-save-for-vscode" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Enable Clippy on Save for VSCode</h2>
<p data-v-4240d724>If you’re using VSCode + Rust Analyzer, I highly suggest going into the settings > Rust Analyzer > Check On Save: Command and setting "clippy" as the new default instead of "check". Same UX, better warnings.</p>
<p data-v-4240d724><img alt="Enable Clippy on Save" src="/posts/clippyonsave.png" data-v-4240d724></p>
<h2 id="use-thiserror-and-anyhow-for-idiomatic-error-handling" data-v-4240d724><a href="#use-thiserror-and-anyhow-for-idiomatic-error-handling" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Use “thiserror” and “anyhow” for idiomatic error handling</h2>
<p data-v-4240d724>Use the <a href="https://docs.rs/thiserror/latest/thiserror/" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>thiserror</a> and <a href="https://crates.io/crates/anyhow" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>anyhow</a> crates for idiomatic error handling. You should use thiserror when the consumer needs to conditionally act based on the error, anyhow otherwise. A good guideline is “use thiserror for libraries and anyhow for applications”.</p>
<h2 id="using-dbg-macro-instead-of-println" data-v-4240d724><a href="#using-dbg-macro-instead-of-println" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Using dbg!() macro instead of println!()</h2>
<p data-v-4240d724>Use the <a href="https://doc.rust-lang.org/stable/std/macro.dbg.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>dbg!() macro</a> instead of println!() when debugging. Less code, more useful information.</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token keyword" data-v-4240d724>let</span> var1 <span class="token operator" data-v-4240d724>=</span> <span class="token number" data-v-4240d724>2</span><span class="token punctuation" data-v-4240d724>;</span>

    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"{}"</span><span class="token punctuation" data-v-4240d724>,</span> <span class="token number" data-v-4240d724>2</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span> <span class="token comment" data-v-4240d724>// Output: 2</span>
    <span class="token macro property" data-v-4240d724>dbg!</span><span class="token punctuation" data-v-4240d724>(</span>var1<span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>        <span class="token comment" data-v-4240d724>// Output: [src/main.rs:5] var1 = 2</span>
    <span class="token macro property" data-v-4240d724>dbg!</span><span class="token punctuation" data-v-4240d724>(</span>var1 <span class="token operator" data-v-4240d724>*</span> <span class="token number" data-v-4240d724>2</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>    <span class="token comment" data-v-4240d724>// Output: [src/main.rs:6] var1 * 2 = 4</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<h2 id="include_str-and-include_bytes-macros" data-v-4240d724><a href="#include_str-and-include_bytes-macros" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>include_str!() and include_bytes!() macros</h2>
<p data-v-4240d724>Use the <a href="https://doc.rust-lang.org/std/macro.include_str.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>include_str!()</a> and <a href="https://doc.rust-lang.org/std/macro.include_bytes.html" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>include_bytes!()</a> macros to read the content of a file at <em data-v-4240d724>compile time</em> and store it inside a const. Useful to avoid messing with multiline string literals.</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token comment" data-v-4240d724>// Both of these files are read at *compile time*</span>
<span class="token keyword" data-v-4240d724>const</span> <span class="token constant" data-v-4240d724>FILE_CONTENT</span><span class="token punctuation" data-v-4240d724>:</span> <span class="token operator" data-v-4240d724>&</span><span class="token keyword" data-v-4240d724>str</span> <span class="token operator" data-v-4240d724>=</span> <span class="token macro property" data-v-4240d724>include_str!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"./path/to/the/file.txt"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
<span class="token keyword" data-v-4240d724>const</span> <span class="token constant" data-v-4240d724>BINARY_FILE_CONTENT</span><span class="token punctuation" data-v-4240d724>:</span> <span class="token operator" data-v-4240d724>&</span><span class="token punctuation" data-v-4240d724>[</span><span class="token keyword" data-v-4240d724>u8</span><span class="token punctuation" data-v-4240d724>]</span> <span class="token operator" data-v-4240d724>=</span> <span class="token macro property" data-v-4240d724>include_bytes!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"./path/to/image.png"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
    <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"{}"</span><span class="token punctuation" data-v-4240d724>,</span> <span class="token constant" data-v-4240d724>FILE_CONTENT</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>  <span class="token comment" data-v-4240d724>// Output: file content as string</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<h2 id="integrating-with-cc-code" data-v-4240d724><a href="#integrating-with-cc-code" aria-hidden="true" tabindex="-1" data-v-4240d724><span class="icon icon-link" data-v-4240d724></span></a>Integrating with C/C++ code</h2>
<p data-v-4240d724>If you need to integrate C/C++ code with Rust, the <a href="https://crates.io/crates/cc" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>cc crate</a> and the proper build script can get you pretty far. For example, I’ve used them to integrate wxWidgets, a popular C++ gui framework, with my project <a href="https://github.com/federico-terzi/espanso" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Espanso</a> (see the <a href="https://github.com/federico-terzi/espanso/blob/master/espanso-modulo/build.rs" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>build script</a>)</p>
<div class="nuxt-content-highlight" data-v-4240d724><pre class="language-rust line-numbers" data-v-4240d724><code data-v-4240d724><span class="token comment" data-v-4240d724>// Inside the build script (build.rs)</span>

<span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>main</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span> <span class="token punctuation" data-v-4240d724>{</span>
  <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"cargo:rerun-if-changed=src/native.c"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
  <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"cargo:rerun-if-changed=src/native.h"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
  <span class="token namespace" data-v-4240d724>cc<span class="token punctuation" data-v-4240d724>::</span></span><span class="token class-name" data-v-4240d724>Build</span><span class="token punctuation" data-v-4240d724>::</span><span class="token function" data-v-4240d724>new</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span>
    <span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>include</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"src/native.h"</span><span class="token punctuation" data-v-4240d724>)</span>
    <span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>file</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"src/native.c"</span><span class="token punctuation" data-v-4240d724>)</span>
    <span class="token punctuation" data-v-4240d724>.</span><span class="token function" data-v-4240d724>compile</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"nativemodule"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
  <span class="token macro property" data-v-4240d724>println!</span><span class="token punctuation" data-v-4240d724>(</span><span class="token string" data-v-4240d724>"cargo:rustc-link-lib=static=nativemodule"</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
<span class="token punctuation" data-v-4240d724>}</span>

<span class="token comment" data-v-4240d724>// Then, in another Rust file (for example, ffi.rs)</span>

<span class="token attribute attr-name" data-v-4240d724>#[link(name = <span class="token string" data-v-4240d724>"nativemodule"</span>, kind = <span class="token string" data-v-4240d724>"static"</span>)]</span>
<span class="token keyword" data-v-4240d724>extern</span> <span class="token string" data-v-4240d724>"C"</span> <span class="token punctuation" data-v-4240d724>{</span>
  <span class="token keyword" data-v-4240d724>pub</span> <span class="token keyword" data-v-4240d724>fn</span> <span class="token function-definition function" data-v-4240d724>your_cool_c_module</span><span class="token punctuation" data-v-4240d724>(</span><span class="token punctuation" data-v-4240d724>)</span><span class="token punctuation" data-v-4240d724>;</span>
<span class="token punctuation" data-v-4240d724>}</span>
</code></pre></div>
<p data-v-4240d724>Thanks for reading! If you like these topics, make sure to follow me on <a href="https://twitter.com/terzi_federico" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>Twitter</a> and <a href="https://www.youtube.com/c/FedericoTerzi" rel="nofollow noopener noreferrer" target="_blank" data-v-4240d724>YouTube</a> to stay updated with the latest articles and videos.</p></div></div> <div class="post-footer-container post-footer" data-v-63505c64 data-v-4240d724><img src="/_nuxt/img/profile-picture-small.40e71b2.png" alt="Federico Terzi Picture" class="post-footer-image" data-v-63505c64> <div class="post-footer-content" data-v-63505c64><p data-v-63505c64>Hi 👋, I’m <span class="red" data-v-63505c64>Federico</span>, thanks for reading!</p> <p data-v-63505c64>
      If you liked this article, make sure to follow me on
      <a href="https://twitter.com/terzi_federico" class="blue" data-v-63505c64>Twitter</a> to
      stay updated with the latest ones :)
    </p> <p data-v-63505c64>
      If you are into technical topics, you might also enjoy my
      <a href="https://www.youtube.com/c/FedericoTerzi" class="red" data-v-63505c64>YouTube</a>
      channel.
    </p></div></div></div></article></div> <div class="footer-container" data-v-83760644><p data-v-83760644><span class="bold" data-v-83760644>Designed</span> and
    <span class="bold" data-v-83760644>coded</span> with<span class="red" data-v-83760644> ♥</span> by me.
    Copyright © Federico Terzi 2019-2023 - P.IVA 03864201201
  </p></div> <div class="social-bar-container"><a href="https://twitter.com/terzi_federico"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23 3.00005C22.0424 3.67552 20.9821 4.19216 19.86 4.53005C19.2577 3.83756 18.4573 3.34674 17.567 3.12397C16.6767 2.90121 15.7395 2.95724 14.8821 3.2845C14.0247 3.61176 13.2884 4.19445 12.773 4.95376C12.2575 5.71308 11.9877 6.61238 12 7.53005V8.53005C10.2426 8.57561 8.50127 8.18586 6.93101 7.39549C5.36074 6.60513 4.01032 5.43868 3 4.00005C3 4.00005 -1 13 8 17C5.94053 18.398 3.48716 19.099 1 19C10 24 21 19 21 7.50005C20.9991 7.2215 20.9723 6.94364 20.92 6.67005C21.9406 5.66354 22.6608 4.39276 23 3.00005V3.00005Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a> <div class="social-bar-divider"></div> <a href="https://github.com/federico-terzi/"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_31_53)"><path d="M16 21.9999V18.1299C16.0375 17.6531 15.9731 17.1737 15.811 16.7237C15.6489 16.2737 15.3929 15.8634 15.06 15.5199C18.2 15.1699 21.5 13.9799 21.5 8.51994C21.4997 7.12376 20.9627 5.78114 20 4.76994C20.4559 3.54844 20.4236 2.19829 19.91 0.999938C19.91 0.999938 18.73 0.649938 16 2.47994C13.708 1.85876 11.292 1.85876 9 2.47994C6.27 0.649938 5.09 0.999938 5.09 0.999938C4.57638 2.19829 4.54414 3.54844 5 4.76994C4.03013 5.78864 3.49252 7.1434 3.5 8.54994C3.5 13.9699 6.8 15.1599 9.94 15.5499C9.611 15.8899 9.35726 16.2953 9.19531 16.7399C9.03335 17.1844 8.96681 17.658 9 18.1299V21.9999M9 18.9999C4 20.4999 4 16.4999 2 15.9999L9 18.9999Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_31_53"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg></a> <div class="social-bar-divider"></div> <a href="https://www.linkedin.com/in/federico-terzi/"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 8C17.5913 8 19.1174 8.63214 20.2426 9.75736C21.3679 10.8826 22 12.4087 22 14V21H18V14C18 13.4696 17.7893 12.9609 17.4142 12.5858C17.0391 12.2107 16.5304 12 16 12C15.4696 12 14.9609 12.2107 14.5858 12.5858C14.2107 12.9609 14 13.4696 14 14V21H10V14C10 12.4087 10.6321 10.8826 11.7574 9.75736C12.8826 8.63214 14.4087 8 16 8V8Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6 9H2V21H6V9Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 6C5.10457 6 6 5.10457 6 4C6 2.89543 5.10457 2 4 2C2.89543 2 2 2.89543 2 4C2 5.10457 2.89543 6 4 6Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a> <div class="social-bar-divider"></div> <a href="https://www.youtube.com/c/FedericoTerzi"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.54 6.42C22.4212 5.94541 22.1793 5.51057 21.8387 5.15941C21.498 4.80824 21.0708 4.55318 20.6 4.42C18.88 4 12 4 12 4C12 4 5.12001 4 3.40001 4.46C2.92925 4.59318 2.50198 4.84824 2.16135 5.19941C1.82072 5.55057 1.5788 5.98541 1.46001 6.46C1.14522 8.20556 0.991243 9.97631 1.00001 11.75C0.988786 13.537 1.14277 15.3213 1.46001 17.08C1.59097 17.5398 1.83831 17.9581 2.17815 18.2945C2.51799 18.6308 2.93883 18.8738 3.40001 19C5.12001 19.46 12 19.46 12 19.46C12 19.46 18.88 19.46 20.6 19C21.0708 18.8668 21.498 18.6118 21.8387 18.2606C22.1793 17.9094 22.4212 17.4746 22.54 17C22.8524 15.2676 23.0063 13.5103 23 11.75C23.0112 9.96295 22.8572 8.1787 22.54 6.42V6.42Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.75 15.02L15.5 11.75L9.75 8.47998V15.02Z" stroke="#2E4364" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div></div></div><script defer src="/_nuxt/static/1705330835/blog/12-rust-tips-and-tricks-you-might-not-know-yet/state.js"></script><script src="/_nuxt/e638994.js" defer></script><script src="/_nuxt/a829c7d.js" defer></script><script src="/_nuxt/17ba505.js" defer></script><script src="/_nuxt/4293a24.js" defer></script><script src="/_nuxt/90cdebc.js" defer></script>
  </body>
</html>
